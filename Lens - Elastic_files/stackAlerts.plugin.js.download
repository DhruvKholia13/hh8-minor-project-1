/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,r={954:(e,r,t)=>{"use strict";t.d(r,{WC:()=>n,s3:()=>a,Pp:()=>i});var s=t(991);function a(e){var r;const{ast:t}=(0,s.parse)(e),a=t.find((({name:e})=>["from","ts"].includes(e))),i=(null!==(r=null==a?void 0:a.args)&&void 0!==r?r:[]).filter((e=>"index"===e.sourceType));return null==i?void 0:i.map((e=>e.name)).join(",")}const i=e=>{const{ast:r}=(0,s.parse)(e),t=[];(0,s.walk)(r,{visitFunction:e=>t.push(e)});const a=s.Walker.params(r).find((e=>"_tstart"===e.value||"_tend"===e.value));if(!a||!t.length)return;const i=t.filter((({location:e})=>e.min<=a.location.min&&e.max>=a.location.max));if(!i.length)return;let n;return i[i.length-1].args.some((e=>{const r=e;return"column"===r.type?(n=r.name,!0):"inlineCast"===r.type&&"column"===r.value.type&&(n=r.value.name,!0)})),n},n=e=>"as"===e.name?{original:e.args[0],renamed:e.args[1]}:{original:e.args[1],renamed:e.args[0]}},875:(e,r,t)=>{"use strict";t.d(r,{iR:()=>a,oU:()=>s});const s="stackAlerts",a=".es-query"},475:(e,r,t)=>{"use strict";t.d(r,{o:()=>s});let s=function(e){return e.GREATER_THAN=">",e.GREATER_THAN_OR_EQUALS=">=",e.BETWEEN="between",e.LESS_THAN="<",e.LESS_THAN_OR_EQUALS="<=",e.NOT_BETWEEN="notBetween",e}({})},672:(e,r,t)=>{"use strict";t.d(r,{iP:()=>u,Ob:()=>d,Tu:()=>n,ow:()=>o,OU:()=>p,zS:()=>c,BF:()=>m});var s=t(770),a=t(991),i=t(954);const n=1e4,o=100,l="esql_query_document",u="Alert ID",d=10,c=(e,r)=>{const t={};for(let s=0;s<e.length;++s)t[e[s].name]=r[s];return t},p=async(e,r,t,s=!1)=>{if(t){const t=y(r,e.columns);return await h(e,t,s)}return await g(e,s)},g=async(e,r=!1,t=100)=>{const s=[],a=[];for(let i=0;i<e.values.length;i++){const n=e.values[i],o=c(e.columns,n);s.push({_id:l,_index:"",_source:o}),r&&a.push(a.length>0?o:Object.assign({[u]:"query matched"},o)),0!==i&&i%t===0&&await new Promise(setImmediate)}return{results:{isCountAgg:!0,isGroupAgg:!1,esResult:{took:0,timed_out:!1,_shards:{failed:0,successful:0,total:0},hits:{hits:s,total:s.length}}},rows:a,cols:r?w(e.columns):[]}},h=async(e,r,t=!1,a=100)=>{const i=new Set,n=new Set,o=[],p={},g={};for(let h=0;h<e.values.length;h++){const m=e.values[h],y=c(e.columns,m),f=r.filter((e=>!(0,s.isNil)(y[e]))).map((e=>y[e]));if(f.length>0){const e=f.join(","),r={_id:l,_index:"",_source:y};g[e]?(i.add(e),g[e].push(r)):(g[e]=[r],p[e]=f),t&&(o.push(Object.assign({[u]:e},y)),f.length>=d&&n.add(e)),0!==h&&h%a===0&&await new Promise(setImmediate)}}return{results:{isCountAgg:!1,isGroupAgg:!0,esResult:{took:0,timed_out:!1,_shards:{failed:0,successful:0,total:0},hits:{hits:[]},aggregations:{groupAgg:{buckets:(0,s.entries)(g).map((([e,r])=>({key:p[e],doc_count:r.length,topHitsAgg:{hits:{hits:r}}})))}}},termField:r},duplicateAlertIds:i,longAlertIds:n,rows:o,cols:t?w(e.columns):[]}},m=e=>({columns:e.columns.map((e=>({name:e.id,type:e.meta.type}))),values:e.rows.map((e=>Object.values(e)))}),y=(e,r)=>{const{root:t}=a.Parser.parse(e),s=t.commands,i=r.map((e=>e.name)),n=f(s);if(n>-1){const e=s[n],r=T(e);if(r){let e=_(r);const t=v(s.slice(n));if(t.length>0&&(e=x(t,e)),e=A(e,i),e.length>0)return e}}const o=b(s);if(o){const e=k(o);if(A(e,i).length>0)return e}return i},f=e=>(0,s.findLastIndex)(e,(e=>"stats"===e.name)),T=e=>{for(const r of e.args)if((0,a.isOptionNode)(r)&&"by"===r.name)return r},_=e=>{const r=[];for(const t of e.args)(0,a.isColumn)(t)&&r.push(t.name);return r},v=e=>e.filter((e=>"rename"===e.name)),x=(e,r)=>{for(const t of e)for(const e of t.args)if((0,a.isFunctionExpression)(e)){const{original:t,renamed:s}=(0,i.WC)(e);(0,a.isColumn)(t)&&(0,a.isColumn)(s)&&(r=r.map((e=>e===t.name?s.name:e)))}return r},b=e=>{const r=e.find((e=>"from"===e.name));if(r)for(const e of r.args)if((0,a.isOptionNode)(e)&&"metadata"===e.name)return e},k=e=>{const r=[];for(const t of e.args)if((0,a.isColumn)(t)&&"_id"===t.name)return r.push(t.name),r;return r},w=e=>{const r=[{id:u,actions:!1}];for(const t of e)r.push({id:t.name,actions:!1});return r},A=(e,r)=>{const t=new Set(r);return e.filter((e=>t.has(e)))}},455:(e,r,t)=>{"use strict";t.r(r),t.d(r,{ALERT_ID_COLUMN:()=>o.iP,ALERT_ID_SUGGESTED_MAX:()=>o.Ob,ES_QUERY_MAX_HITS_PER_EXECUTION:()=>o.Tu,ES_QUERY_MAX_HITS_PER_EXECUTION_SERVERLESS:()=>o.ow,getComparatorScript:()=>i,getEsqlQueryHits:()=>o.OU,getHumanReadableComparator:()=>n,rowToDocument:()=>o.zS,transformDatatableToEsqlTable:()=>o.BF});let s=function(e){return e.GT=">",e.LT="<",e.GT_OR_EQ=">=",e.LT_OR_EQ="<=",e.BETWEEN="between",e.NOT_BETWEEN="notBetween",e}({});const a=new Map([[s.LT,"less than"],[s.LT_OR_EQ,"less than or equal to"],[s.GT_OR_EQ,"greater than or equal to"],[s.GT,"greater than"],[s.BETWEEN,"between"],[s.NOT_BETWEEN,"not between"]]),i=(e,r,t)=>{if(0===r.length)throw new Error("Threshold value required");function a(e){return Number.isInteger(e)?`${e}L`:`${e}`}switch(e){case s.LT:return`${t} < ${a(r[0])}`;case s.LT_OR_EQ:return`${t} <= ${a(r[0])}`;case s.GT:return`${t} > ${a(r[0])}`;case s.GT_OR_EQ:return`${t} >= ${a(r[0])}`;case s.BETWEEN:if(r.length<2)throw new Error("Threshold values required");return`${t} >= ${a(r[0])} && ${t} <= ${a(r[1])}`;case s.NOT_BETWEEN:if(r.length<2)throw new Error("Threshold values required");return`${t} < ${a(r[0])} || ${t} > ${a(r[1])}`}};function n(e){return a.has(e)?a.get(e):e}var o=t(672)},285:(e,r,t)=>{"use strict";t.r(r),t.d(r,{DataViewSelectPopover:()=>h.R,plugin:()=>m});var s=t(915),a=t(286),i=t(8);const n=e=>{const{index:r,geoField:t,entity:s,dateField:a,boundaryType:n,boundaryIndexTitle:o,boundaryGeoField:l}=e,u={errors:{}},d={index:new Array,indexId:new Array,geoField:new Array,entity:new Array,dateField:new Array,boundaryType:new Array,boundaryIndexTitle:new Array,boundaryIndexId:new Array,boundaryGeoField:new Array};return u.errors=d,r||d.index.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredIndexTitleText",{defaultMessage:"Data view is required."})),t||d.geoField.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredGeoFieldText",{defaultMessage:"Geo field is required."})),s||d.entity.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredEntityText",{defaultMessage:"Entity is required."})),a||d.dateField.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredDateFieldText",{defaultMessage:"Date field is required."})),n||d.boundaryType.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryTypeText",{defaultMessage:"Boundary type is required."})),o||d.boundaryIndexTitle.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryIndexTitleText",{defaultMessage:"Boundary data view is required."})),l||d.boundaryGeoField.push(i.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryGeoFieldText",{defaultMessage:"Boundary geo field is required."})),u};var o=t(964),l=t(73);const u=e=>{const{index:r,timeField:t,aggType:s,aggField:a,groupBy:n,termSize:u,termField:d,threshold:c,timeWindowSize:p,thresholdComparator:g,filterKuery:h}=e,m={errors:{}},y={aggField:new Array,termSize:new Array,termField:new Array,timeWindowSize:new Array,threshold0:new Array,threshold1:new Array,index:new Array,timeField:new Array,filterKuery:new Array};if(m.errors=y,h)try{(0,o.toElasticsearchQuery)((0,o.fromKueryExpression)(h))}catch(e){y.filterKuery.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.invalidKql",{defaultMessage:"Filter query is invalid."}))}return r&&0!==r.length||y.index.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredIndexText",{defaultMessage:"Index is required."})),t||y.timeField.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),s&&l.builtInAggregationTypes[s].fieldRequired&&!a&&y.aggField.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredAggFieldText",{defaultMessage:"Aggregation field is required."})),n&&l.builtInGroupByTypes[n]&&l.builtInGroupByTypes[n].sizeRequired&&!u&&y.termSize.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTermSizedText",{defaultMessage:"Term size is required."})),n&&l.builtInGroupByTypes[n].validNormalizedTypes&&l.builtInGroupByTypes[n].validNormalizedTypes.length>0&&!d&&y.termField.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTermFieldText",{defaultMessage:"Term field is required."})),p||y.timeWindowSize.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTimeWindowSizeText",{defaultMessage:"Time window size is required."})),c&&0!==c.length&&void 0!==c[0]||y.threshold0.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold0 is required."})),g&&l.builtInComparators[g].requiredValues>1&&(!c||void 0===c[1]||c&&c.length<l.builtInComparators[g].requiredValues)&&y.threshold1.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredThreshold1Text",{defaultMessage:"Threshold1 is required."})),c&&2===c.length&&c[0]>c[1]&&y.threshold1.push(i.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.greaterThenThreshold0Text",{defaultMessage:"Threshold1 should be > Threshold0."})),m};var d=t(875),c=t(251),p=t(587);function g({ruleTypeRegistry:e,alerting:r},s){s||e.register({id:".geo-containment",description:i.i18n.translate("xpack.stackAlerts.geoContainment.descriptionText",{defaultMessage:"Alert when an entity is contained or no longer contained within a boundary."}),iconClass:"globe",documentationUrl:null,ruleParamsExpression:(0,a.lazy)((()=>t.e(508).then(t.bind(t,508)))),validate:n,requiresAppContext:!1}),e.register({id:".index-threshold",description:i.i18n.translate("xpack.stackAlerts.threshold.ui.alertType.descriptionText",{defaultMessage:"Alert when an aggregated query meets the threshold."}),iconClass:"alert",documentationUrl:e=>e.links.alerting.indexThreshold,ruleParamsExpression:(0,a.lazy)((()=>t.e(204).then(t.bind(t,204)))),validate:u,defaultActionMessage:i.i18n.translate("xpack.stackAlerts.threshold.ui.alertType.defaultActionMessage",{defaultMessage:"Rule '{{rule.name}}' is active for group '{{context.group}}':\n\n- Value: '{{context.value}}'\n- Conditions Met: '{{context.conditions}}' over '{{rule.params.timeWindowSize}}{{rule.params.timeWindowUnit}}'\n- Timestamp: '{{context.date}}'"}),requiresAppContext:!1}),e.register(function(e){return function(e){e.registerNavigation("discover",d.iR,(e=>`/app/discover#/viewAlert/${e.id}`)),e.registerNavigation(d.oU,d.iR,(e=>{if((0,p.k_)(e.params))return`/app/discover#/viewAlert/${e.id}`})),e.registerNavigation("logs",d.iR,(e=>{if((0,p.k_)(e.params))return`/app/discover#/viewAlert/${e.id}`})),e.registerNavigation("infrastructure",d.iR,(e=>{if((0,p.k_)(e.params))return`/app/discover#/viewAlert/${e.id}`})),e.registerNavigation("observability",d.iR,(e=>{if((0,p.k_)(e.params))return`/app/discover#/viewAlert/${e.id}`}))}(e),{id:d.iR,description:i.i18n.translate("xpack.stackAlerts.esQuery.ui.alertType.descriptionText",{defaultMessage:"Alert when matches are found during the latest query run."}),iconClass:"logoElastic",documentationUrl:e=>e.links.alerting.esQuery,ruleParamsExpression:(0,a.lazy)((()=>t.e(606).then(t.bind(t,606)))),validate:c.P,defaultActionMessage:i.i18n.translate("xpack.stackAlerts.esQuery.ui.alertType.defaultActionMessage",{defaultMessage:"Elasticsearch query rule '{{rule.name}}' is active:\n\n- Value: '{{context.value}}'\n- Conditions Met: '{{context.conditions}}' over '{{rule.params.timeWindowSize}}''{{rule.params.timeWindowUnit}}'\n- Timestamp: '{{context.date}}'\n- Link: '{{context.link}}'"}),requiresAppContext:!1}}(r))}class StackAlertsPublicPlugin{constructor(e){(0,s.default)(this,"isServerless",void 0),this.isServerless="serverless"===e.env.packageInfo.buildFlavor}setup(e,{triggersActionsUi:r,alerting:t}){g({ruleTypeRegistry:r.ruleTypeRegistry,alerting:t},this.isServerless)}start(){}stop(){}}var h=t(887);const m=e=>new StackAlertsPublicPlugin(e)},887:(e,r,t)=>{"use strict";t.d(r,{R:()=>d});var s=t(286),a=t(8),i=t(879),n=t(791),o=t(319),l=t(684);const u=e=>({id:e.id,title:e.title,name:e.name,type:e.type,isAdhoc:!e.isPersisted()}),d=({dependencies:{dataViews:e,dataViewEditor:r},metadata:t,dataView:d,onSelectDataView:c,onChangeMetaData:p})=>{var g;const[h,m]=(0,s.useState)(!1),[y,f]=(0,s.useState)([]),[T,_]=(0,s.useState)(!1),v=(0,o.useIsWithinBreakpoints)(["xs"]),x=(0,s.useRef)(),b=(0,s.useMemo)((()=>{var e,r;return{...t,adHocDataViewList:null!==(e=null==t?void 0:t.adHocDataViewList)&&void 0!==e?e:[],isManagementPage:null===(r=null==t?void 0:t.isManagementPage)||void 0===r||r}}),[t]),k=(0,s.useMemo)((()=>[...null!=y?y:[],...(b.adHocDataViewList||[]).map(u)]),[y,b.adHocDataViewList]),w=(0,s.useCallback)((()=>_(!1)),[]),A=(0,s.useCallback)((async r=>{const t=await e.get(r);c(t),w()}),[w,e,c]),E=(0,s.useCallback)((async()=>{m(!0);try{const r=await e.getIds(!0),t=await Promise.all(r.map((r=>e.get(r))));f(t.map(u))}catch(e){}m(!1)}),[e]),q=(0,s.useCallback)((e=>{p({...b,adHocDataViewList:[...b.adHocDataViewList||[],e]})}),[b,p]),S=(0,s.useMemo)((()=>r.userPermissions.editDataView()?()=>{x.current=r.openEditor({onSave:async e=>{e.id&&(e.isPersisted()||q(e),await E(),await A(e.id))},allowAdHocDataView:!0})}:void 0),[r,E,A,q]);(0,s.useEffect)((()=>()=>{x.current&&x.current()}),[]),(0,s.useEffect)((()=>{E()}),[E]);const P=(0,o.useEuiPaddingCSS)("left"),M=(0,s.useCallback)((async r=>{var t;const s=await e.create(r);"date"===(null===(t=s.fields.getByName("@timestamp"))||void 0===t?void 0:t.type)&&(s.timeFieldName="@timestamp"),q(s),A(s.id)}),[e,q,A]);return h?(0,n.jsx)(o.EuiLoadingSpinner,null):(0,n.jsx)(o.EuiPopover,{id:"dataViewPopover",button:(0,n.jsx)(o.EuiExpression,{display:"columns","data-test-subj":"selectDataViewExpression",description:a.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewLabel",{defaultMessage:"data view"}),value:null!==(g=null==d?void 0:d.getName())&&void 0!==g?g:a.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewPlaceholder",{defaultMessage:"Select a data view"}),isActive:T,onClick:()=>{_(!0)},isInvalid:!(null!=d&&d.id)}),isOpen:T,closePopover:w,ownFocus:!0,anchorPosition:"downLeft",display:"block"},(0,n.jsx)("div",{css:(0,n.css)("width:",v?"350px":"450px",";",""),"data-test-subj":"chooseDataViewPopoverContent"},(0,n.jsx)(o.EuiPopoverTitle,null,(0,n.jsx)(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},(0,n.jsx)(o.EuiFlexItem,null,a.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewPopoverTitle",{defaultMessage:"Data view"})),(0,n.jsx)(o.EuiFlexItem,{grow:!1},(0,n.jsx)(o.EuiButtonIcon,{"data-test-subj":"closeDataViewPopover",iconType:"cross",color:"danger","aria-label":a.i18n.translate("xpack.stackAlerts.components.ui.alertParams.closeDataViewPopoverLabel",{defaultMessage:"Close"}),onClick:w})))),(0,n.jsx)(l.DataViewSelector,{currentDataViewId:null==d?void 0:d.id,dataViewsList:k,setPopoverIsOpen:_,onChangeDataView:A,onCreateDefaultAdHocDataView:M}),S?(0,n.jsx)(o.EuiPopoverFooter,{paddingSize:"none"},(0,n.jsx)(o.EuiButtonEmpty,{css:P.s,iconType:"plusInCircleFilled","data-test-subj":"chooseDataViewPopover.createDataViewButton",onClick:()=>{w(),S()}},a.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewPopover.createDataViewButton",{defaultMessage:"Create a data view"}))):(0,n.jsx)(o.EuiPopoverFooter,null,(0,n.jsx)(o.EuiText,{color:"subdued",size:"xs"},(0,n.jsx)(i.FormattedMessage,{id:"xpack.stackAlerts.components.ui.alertParams.dataViewPopover.createDataViewButton.noPermissionDescription",defaultMessage:"You need additional privileges to create data views. Contact your administrator."})))))}},70:(e,r,t)=>{"use strict";t.d(r,{FO:()=>n,LP:()=>s,P8:()=>d,Qz:()=>a,bN:()=>l,mK:()=>o,pj:()=>i});const s={THRESHOLD_COMPARATOR:t(475).o.GREATER_THAN,QUERY:'{\n    "query":{\n      "match_all" : {}\n    }\n  }',SIZE:100,TIME_WINDOW_SIZE:5,TIME_WINDOW_UNIT:"m",THRESHOLD:[1e3],AGGREGATION_TYPE:"count",TERM_SIZE:5,GROUP_BY:"all",EXCLUDE_PREVIOUS_HITS:!1,CAN_SELECT_MULTI_TERMS:!0},a={SIZE:10},i={searchType:new Array,threshold0:new Array,threshold1:new Array,timeWindowSize:new Array,size:new Array,aggField:new Array,aggType:new Array,groupBy:new Array,termSize:new Array,termField:new Array},n={searchConfiguration:new Array,timeField:new Array},o={index:new Array,esQuery:new Array,timeField:new Array},l={esqlQuery:new Array,timeField:new Array,thresholdComparator:new Array,threshold0:new Array,groupBy:new Array},u={...i,...n,...o},d=Object.keys(u)},587:(e,r,t)=>{"use strict";t.d(r,{Af:()=>l,U3:()=>u,gQ:()=>n,k_:()=>i,rG:()=>o});var s=t(73),a=t(399);const i=e=>"searchSource"===e.searchType,n=e=>"esqlQuery"===e.searchType,o=e=>(null!=e?e:[]).filter((e=>e.isMapped||e.runtimeField)).map((e=>{const r={name:e.name,searchable:e.searchable,aggregatable:e.aggregatable,type:e.type,normalizedType:e.type};if("string"===e.type){const t=e.esTypes&&e.esTypes.length>0?e.esTypes[0]:e.type;r.type=t,r.normalizedType=t}else if("number"===e.type){const t=e.esTypes&&e.esTypes.length>0?e.esTypes[0]:e.type;r.type=t}return r})),l=e=>{const r=[];let t;try{t=Object.keys(e)}catch(e){return r}for(const s of t){const t=e[s].type,i=a.NORMALIZED_FIELD_TYPES[t]||t,n="lookup"!==t,o=n,l=n;t&&r.push({name:s,type:t,normalizedType:i,aggregatable:o,searchable:l})}return r},u=()=>(0,s.useKibana)().services},251:(e,r,t)=>{"use strict";t.d(r,{F:()=>g,P:()=>p});var s=t(770),a=t(8),i=t(73),n=t(475),o=t(672),l=t(587),u=t(70);const d=e=>{const r=(0,s.defaultsDeep)({},u.FO);return e.searchConfiguration?e.searchConfiguration.index?(e.timeField||r.timeField.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredDataViewTimeFieldText",{defaultMessage:"Data view should have a time field."})),r):(r.searchConfiguration.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredDataViewText",{defaultMessage:"Data view is required."})),r):(r.searchConfiguration.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSearchConfiguration",{defaultMessage:"Search source configuration is required."})),r)},c=e=>{const r=(0,s.defaultsDeep)({},u.bN);return e.esqlQuery||r.esqlQuery.push(a.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredQueryText",{defaultMessage:"ES|QL query is required."})),e.timeField||r.timeField.push(a.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),e.thresholdComparator!==n.o.GREATER_THAN&&r.thresholdComparator.push(a.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredThresholdComparatorText",{defaultMessage:"Threshold comparator is required to be greater than."})),e.threshold&&0!==e.threshold[0]&&r.threshold0.push(a.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold is required to be 0."})),e.groupBy&&"top"===e.groupBy&&r.groupBy.push(a.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredGroupByText",{defaultMessage:"Group by is required."})),r},p=(e,r)=>{const t={errors:{}},n=((e,r)=>{const{size:t,threshold:n,timeWindowSize:l,thresholdComparator:d,aggType:c,aggField:p,groupBy:g,termSize:h,termField:m}=e,y=(0,s.defaultsDeep)({},u.pj);if(!("index"in e)&&!e.searchType)return y.searchType.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSearchType",{defaultMessage:"Query type is required."})),y;c&&i.builtInAggregationTypes[c].fieldRequired&&!p&&y.aggField.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredAggFieldText",{defaultMessage:"Aggregation field is required."})),g&&i.builtInGroupByTypes[g]&&i.builtInGroupByTypes[g].sizeRequired&&!h&&y.termSize.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTermSizedText",{defaultMessage:"Term size is required."})),g&&i.builtInGroupByTypes[g]&&i.builtInGroupByTypes[g].sizeRequired&&t&&t>100&&y.size.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.sizeTooLargeForGroupByText",{defaultMessage:"Size cannot exceed {max} when using a group by field.",values:{max:100}})),g&&i.builtInGroupByTypes[g]&&i.builtInGroupByTypes[g].validNormalizedTypes&&i.builtInGroupByTypes[g].validNormalizedTypes.length>0&&(!m||m.length<=0)&&y.termField.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTermFieldText",{defaultMessage:"Term field is required."})),g&&i.builtInGroupByTypes[g]&&i.builtInGroupByTypes[g].validNormalizedTypes&&i.builtInGroupByTypes[g].validNormalizedTypes.length>0&&m&&Array.isArray(m)&&m.length>4&&y.termField.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.overNumberedTermFieldText",{defaultMessage:"Cannot select more than {max} terms",values:{max:4}})),n&&0!==n.length&&void 0!==n[0]||y.threshold0.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold 0 is required."})),d&&i.builtInComparators[d].requiredValues>1&&(!n||void 0===n[1]||n&&n.length<i.builtInComparators[d].requiredValues)&&y.threshold1.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredThreshold1Text",{defaultMessage:"Threshold 1 is required."})),n&&2===n.length&&n[0]>n[1]&&y.threshold1.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.greaterThenThreshold0Text",{defaultMessage:"Threshold 1 must be > Threshold 0."})),l||y.timeWindowSize.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTimeWindowSizeText",{defaultMessage:"Time window size is required."})),(0,s.isNil)(t)&&y.size.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSizeText",{defaultMessage:"Size is required."}));const f=r?o.ow:o.Tu;return(t&&t<0||t>f)&&y.size.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.invalidSizeRangeText",{defaultMessage:"Size must be between 0 and {max, number}.",values:{max:f}})),y})(e,r);if(t.errors=n,(0,l.k_)(e))return t.errors={...t.errors,...d(e)},t;if((0,l.gQ)(e))return t.errors={...t.errors,...c(e)},t;const p=(e=>{const r=(0,s.defaultsDeep)({},u.mK);if(e.index&&0!==e.index.length||r.index.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredIndexText",{defaultMessage:"Index is required."})),e.timeField||r.timeField.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),e.esQuery)try{JSON.parse(e.esQuery).query||r.esQuery.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredEsQueryText",{defaultMessage:"Query field is required."}))}catch(e){r.esQuery.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.jsonQueryText",{defaultMessage:"Query must be valid JSON."}))}else r.esQuery.push(a.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredQueryText",{defaultMessage:"Elasticsearch query is required."}));return r})(e);return t.errors={...t.errors,...p},t},g=(e,r)=>{const{errors:t}=p(e,r);return Object.keys(t).some((e=>t[e]&&t[e].length))}},72:(e,r,t)=>{t.p=window.__kbnPublicPath__.stackAlerts},109:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/alerting/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},496:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/alerting/common/parse_duration");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},195:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/data/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},627:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/data/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},744:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},104:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/esql/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},409:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},73:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/triggersActionsUi/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},399:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/triggersActionsUi/public/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},684:(e,r,t)=>{t.r(r);var s=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))},915:(e,r,t)=>{e.exports=t(497)(67493)},927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},59:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},424:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},551:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCryptoBrowser},964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},991:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsqlAst},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},583:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useDebounce},157:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useMountedState},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},t={};function s(e){var a=t[e];if(void 0!==a)return a.exports;var i=t[e]={exports:{}};return r[e](i,i.exports,s),i.exports}s.m=r,s.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return s.d(r,{a:r}),r},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((r,t)=>(s.f[t](e,r),r)),[])),s.u=e=>"stackAlerts.chunk."+e+".js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),e={},s.l=(r,t,a,i)=>{if(e[r])e[r].push(t);else{var n,o;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r){n=d;break}}n||(o=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.src=r),e[r]=[t];var c=(t,s)=>{n.onerror=n.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(s))),t)return t(s)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=c.bind(null,n.onerror),n.onload=c.bind(null,n.onload),o&&document.head.appendChild(n)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var a=t.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=t[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={56:0};s.f.j=(r,t)=>{var a=s.o(e,r)?e[r]:void 0;if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(((t,s)=>a=e[r]=[t,s]));t.push(a[2]=i);var n=s.p+s.u(r),o=new Error;s.l(n,(t=>{if(s.o(e,r)&&(0!==(a=e[r])&&(e[r]=void 0),a)){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;o.message="Loading chunk "+r+" failed.\n("+i+": "+n+")",o.name="ChunkLoadError",o.type=i,o.request=n,a[1](o)}}),"chunk-"+r,r)}};var r=(r,t)=>{var a,i,[n,o,l]=t,u=0;if(n.some((r=>0!==e[r]))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);l&&l(s)}for(r&&r(t);u<n.length;u++)i=n[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0},t=self.stackAlerts_bundle_jsonpfunction=self.stackAlerts_bundle_jsonpfunction||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})(),s(72),__kbnBundles__.define("plugin/stackAlerts/public",s,285),__kbnBundles__.define("plugin/stackAlerts/common",s,455)})();