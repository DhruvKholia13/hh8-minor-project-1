(()=>{var e,t,s={7334:(e,t,s)=>{"use strict";s.d(t,{P:()=>n,Z:()=>i});var r=s(770);const i="esql.lookup_action_shown",n=(0,r.once)((e=>{e.registerEventType({eventType:i,schema:{trigger_action:{type:"keyword",_meta:{description:"The lookup index action shown. Possible values are: create|edit|read"}},trigger_source:{type:"keyword",_meta:{description:"The way how the index editor action has been triggered. Possible values are: esql_hover|esql_autocomplete"}},highest_privilege:{type:"keyword",_meta:{description:"The higher privilege the user has for this index. Possible values are: create|edit|read"}}}})}))},4087:(e,t,s)=>{"use strict";s.d(t,{G3:()=>o,Hi:()=>n,zh:()=>i});var r=s(770);const i="index_editor.flyout_opened",n="index_editor.save_submitted",o=(0,r.once)((e=>{e.registerEventType({eventType:i,schema:{flyout_mode:{type:"keyword",_meta:{description:"The mode in which the index editor flyout was opened. Possible values are: create|view|edit"}},trigger_source:{type:"keyword",_meta:{description:"The way how the index editor flyout has been triggered. Possible values are: esql_hover|esql_autocomplete"}},doc_count_bucket:{type:"keyword",_meta:{description:"The bucket in which the document count of the index falls into. Possible values are: 0|1-100|101-10k|10k+"}},field_count_bucket:{type:"keyword",_meta:{description:"The bucket in which the field count of the index falls into. Possible values are: 0|1-4|5-20|20+"}}}}),e.registerEventType({eventType:n,schema:{flyout_mode:{type:"keyword",_meta:{description:"The mode in which the index editor flyout was opened. Possible values are: create|view|edit"}},pending_rows_added:{type:"integer",_meta:{description:"The number of rows added in the index editor before saving"}},pending_cols_added:{type:"integer",_meta:{description:"The number of columns added in the index editor before saving"}},pending_cells_edited:{type:"integer",_meta:{description:"The number of cells edited in the index editor before saving"}},action:{type:"keyword",_meta:{description:"The action taken when submitting the save. Possible values are: save|save_and_exit"}},outcome:{type:"keyword",_meta:{description:"The outcome of the save action. Possible values are: success|error"}},exec_latency_bucket:{type:"keyword",_meta:{description:"The latency of the save action in buckets"}}}})}))},5915:(e,t,s)=>{"use strict";s.d(t,{I4:()=>i,_m:()=>n,si:()=>r});const r="EDIT_LOOKUP_INDEX_CONTENT_TRIGGER_ID",i={id:r,title:"Edit Lookup Index",description:"This trigger is used to edit the lookup index content."},n="ACTION_EDIT_LOOKUP_INDEX"},3862:(e,t,s)=>{"use strict";s.d(t,{OY:()=>i,z7:()=>n,Rh:()=>o,Eq:()=>r});let r=function(e){return e.IDENTIFIER="??",e.VALUE="?",e}({}),i=function(e){return e.TIME_LITERAL="time_literal",e.FIELDS="fields",e.VALUES="values",e.FUNCTIONS="functions",e}({}),n=function(e){return e.STATIC_VALUES="STATIC_VALUES",e.VALUES_FROM_QUERY="VALUES_FROM_QUERY",e}({});const o="/internal/esql_registry/extensions/"},3294:(e,t,s)=>{"use strict";s.d(t,{h:()=>l}),s(4286);var r=s(1319),i=s(6524),n=s.n(i),o=s(409),a=s(9723),c=s(6791);const l=e=>{var t;const{loading:i,value:l}=n()((()=>{const e=(0,a.f0)(),t=s.e(748).then(s.bind(s,3570));return Promise.all([e,t])}),[]),u=null==l||null===(t=l[1])||void 0===t?void 0:t.default,d=null==l?void 0:l[0];return!i&&d&&u?(0,c.jsx)(o.KibanaContextProvider,{services:{...d}},(0,c.jsx)(u,e)):(0,c.jsx)(r.EuiLoadingSpinner,null)}},9391:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ESQLLangEditor:()=>f.h,plugin:()=>m});var r=s(3862),i=s(1215),n=s(7334),o=s(5915),a=s(4087),c=s(5008);const l="ESQL_CONTROL_TRIGGER",u={id:l,title:c.i18n.translate("esql.triggers.esqlControlTigger",{defaultMessage:"Create an ES|QL control"}),description:c.i18n.translate("esql.triggers.esqlControlTiggerDescription",{defaultMessage:"Create an ES|QL control to interact with the charts"})},d="UPDATE_ESQL_QUERY_TRIGGER",_={id:d,title:c.i18n.translate("esql.triggers.updateEsqlQueryTrigger",{defaultMessage:"Update ES|QL query"}),description:c.i18n.translate("esql.triggers.updateEsqlQueryTriggerDescription",{defaultMessage:"Update ES|QL query with a new one"})};var p=s(4671),b=s(9723);const h=(e,t=(...e)=>JSON.stringify(e),s=3e5,r=15e3,i=Date.now)=>{const n=new Map;return function(...o){var a;const c=null!==(a=null==this?void 0:this.forceRefresh)&&void 0!==a&&a,l=t(...o);if(c){const t=e(...o);return n.set(l,{value:t,lastCallTime:i()}),t}const u=i();let d=n.get(l);if(!d||u-d.lastCallTime>s){const t=e(...o);return d={value:t,lastCallTime:u},n.set(l,d),t}return u-d.lastCallTime>r&&Promise.resolve().then((async()=>{const t=await e(...o);n.set(l,{value:Promise.resolve(t),lastCallTime:i()})})),d.value}};var g=s(8915);class EsqlVariablesService{constructor(){(0,g.default)(this,"esqlVariables",[]),(0,g.default)(this,"areSuggestionsEnabled",!1)}enableSuggestions(){this.areSuggestionsEnabled=!0}disableSuggestions(){this.areSuggestionsEnabled=!1}addVariable(e){const t=[...this.esqlVariables];t.find((t=>t.key===e.key))||(t.push({...e,value:Number.isNaN(Number(e.value))?e.value:Number(e.value)}),this.esqlVariables=t)}clearVariables(){this.esqlVariables=[]}}class EsqlPlugin{setup(e,{uiActions:t}){return t.registerTrigger(_),t.registerTrigger(u),(0,n.P)(e.analytics),(0,a.G3)(e.analytics),{}}start(e,{dataViews:t,expressions:n,data:a,uiActions:c,fieldsMetadata:u,usageCollection:_,licensing:g,fileUpload:f,fieldFormats:m,share:v}){const y=new i.Storage(localStorage);c.addTriggerActionAsync(d,p._,(async()=>{const{UpdateESQLQueryAction:e}=await s.e(944).then(s.bind(s,944));return new e(a)})),c.addTriggerActionAsync(l,p.S,(async()=>{const{CreateESQLControlAction:t}=await s.e(816).then(s.bind(s,6816));return new t(e,a.search.search,a.query.timefilter.timefilter)})),function(e){const{uiActions:t}=e;t.registerTrigger(o.I4),t.addTriggerActionAsync(o.si,o._m,(async()=>{const{createEditLookupIndexContentAction:t}=await s.e(396).then(s.bind(s,8396));return t({data:e.data,coreStart:e.coreStart,share:e.share,uiActions:e.uiActions,fieldFormats:e.fieldFormats,fileUpload:e.fileUpload})}))}({data:a,coreStart:e,share:v,uiActions:c,fieldFormats:m,fileUpload:f});const S=new EsqlVariablesService,k={getJoinIndicesAutocomplete:h((async t=>{const s=t?{remoteClusters:t}:{};return await e.http.get("/internal/esql/autocomplete/join/indices",{query:s})}),(e=>e||""),3e5,15e3),getTimeseriesIndicesAutocomplete:((e,t=3e5,s=15e3,r=Date.now)=>{let i,n=0;return({forceRefresh:o=!1}={})=>{const a=r();return(o||a-n>t)&&(i=void 0),i?(a-n>s&&(n=a,Promise.resolve().then((()=>{i=e()}))),i):(n=a,i=e(),i)}})((async()=>await e.http.get("/internal/esql/autocomplete/timeseries/indices")),3e5,15e3),getEditorExtensionsAutocomplete:h((async(t,s)=>{const i=encodeURIComponent(t);return await e.http.get(`${r.Rh}${s}/${i}`)}),((e,t)=>`${e}-${t}`),3e5,15e3),getInferenceEndpointsAutocomplete:h((async t=>await e.http.get(`/internal/esql/autocomplete/inference_endpoints/${t}`)),(e=>e),3e5,15e3),variablesService:S,getLicense:async()=>await(null==g?void 0:g.getLicense())};return(0,b.bE)(k,e,t,a,n,y,c,u,_),k}stop(){}}var f=s(3294);function m(){return new EsqlPlugin}},9723:(e,t,s)=>{"use strict";let r;s.d(t,{bE:()=>o,f0:()=>n});const i=new(s(190).BehaviorSubject)(void 0),n=()=>i.value?Promise.resolve(i.value):new Promise((e=>{const t=i.subscribe((s=>{s&&(t.unsubscribe(),e(s))}))})),o=(e,t,s,n,o,a,c,l,u)=>{r=t,i.next({core:r,dataViews:s,expressions:o,data:n,storage:a,uiActions:c,fieldsMetadata:l,usageCollection:u,esql:e})}},4671:(e,t,s)=>{"use strict";s.d(t,{S:()=>r,_:()=>i});const r="ACTION_CREATE_ESQL_CONTROL",i="ACTION_UPDATE_ESQL_QUERY"},9121:(e,t,s)=>{s.p=window.__kbnPublicPath__.esql},7195:(e,t,s)=>{s.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},4627:(e,t,s)=>{s.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},4685:(e,t,s)=>{s.r(t);var r=__kbnBundles__.get("plugin/fileUpload/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},409:(e,t,s)=>{s.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},1215:(e,t,s)=>{s.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},4839:(e,t,s)=>{s.r(t);var r=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},8915:(e,t,s)=>{e.exports=s(2497)(67493)},5927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},1319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},6752:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticNumeral},6791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},9424:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},9551:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCryptoBrowser},6494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},5964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},1991:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsqlAst},5008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},5879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},5804:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaMount},1728:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},3803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},1060:e=>{"use strict";e.exports=__kbnSharedDeps__.LodashFp},1783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},2488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},4286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},2874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},3530:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactQuery},6524:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useAsync},4048:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useAsyncFn},7583:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useDebounce},2644:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useEvent},3467:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useLatest},9985:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useMount},7157:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useMountedState},693:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.usePrevious},6476:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useUnmount},5668:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useUpdateEffect},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},9472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},2497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return s[e].call(n.exports,n,n.exports,i),n.exports}i.m=s,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>"esql.chunk."+e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="@kbn/esql:",i.l=(s,r,n,o)=>{if(e[s])e[s].push(r);else{var a,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+n){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+n),a.src=s),e[s]=[r];var _=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(_.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=_.bind(null,a.onerror),a.onload=_.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=s[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={316:0};i.f.j=(t,s)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var n=new Promise(((s,i)=>r=e[t]=[s,i]));s.push(r[2]=n);var o=i.p+i.u(t),a=new Error;i.l(o,(s=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,s)=>{var r,n,[o,a,c]=s,l=0;if(o.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);c&&c(i)}for(t&&t(s);l<o.length;l++)n=o[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},s=self.esql_bundle_jsonpfunction=self.esql_bundle_jsonpfunction||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i(9121),__kbnBundles__.define("plugin/esql/public",i,9391)})();