(()=>{var e,t={787:(e,t,r)=>{"use strict";r.d(t,{D3:()=>n,HI:()=>o,SE:()=>a,X1:()=>s,j7:()=>i});const a="search",n="discover session",s=1,i=1,o=1e4},850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LATEST_VERSION:()=>i.X1,MAX_SAVED_SEARCH_SAMPLE_SIZE:()=>i.HI,MIN_SAVED_SEARCH_SAMPLE_SIZE:()=>i.j7,SavedSearchType:()=>i.SE,SavedSearchTypeDisplayName:()=>i.D3,VIEW_MODE:()=>c,extractTabs:()=>s.S,fromSavedSearchAttributes:()=>n.H,getSavedSearchFullPathUrl:()=>a.j,toSavedSearchAttributes:()=>o.Y});var a=r(690),n=r(550),s=r(267),i=r(787),o=r(138);let c=function(e){return e.DOCUMENT_LEVEL="documents",e.AGGREGATED_LEVEL="aggregated",e.PATTERN_LEVEL="patterns",e}({})},690:(e,t,r)=>{"use strict";r.d(t,{j:()=>n,t:()=>a});const a=e=>e?`#/view/${encodeURIComponent(e)}`:"#/",n=e=>`/app/discover${a(e)}`},550:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});const a=(e,{title:t,description:r,tabs:a},n,s,i,o=!1)=>{const[{attributes:c}]=a;return{id:e,...o?{serializedSearchSource:s}:{searchSource:s},title:t,sort:c.sort,columns:c.columns,description:r,tags:n,grid:c.grid,hideChart:c.hideChart,viewMode:c.viewMode,hideAggregatedPreview:c.hideAggregatedPreview,rowHeight:c.rowHeight,headerRowHeight:c.headerRowHeight,isTextBasedQuery:c.isTextBasedQuery,usesAdHocDataView:c.usesAdHocDataView,timeRestore:c.timeRestore,timeRange:c.timeRange,refreshInterval:c.refreshInterval,rowsPerPage:c.rowsPerPage,sampleSize:c.sampleSize,breakdownField:c.breakdownField,visContext:c.visContext,controlGroupJson:c.controlGroupJson,density:c.density,tabs:a,managed:i}}},267:(e,t,r)=>{"use strict";r.d(t,{S:()=>o});const a=__kbnSharedDeps__.Uuid;var n=r(8),s=r(770);const i="617f8ea7-754a-4a75-86bf-58c4b2f99690";function o(e,t){const{title:r,description:o,...c}=e,l=[{id:t?(0,a.v5)(t,i):(0,a.v4)(),label:n.i18n.translate("savedSearch.defaultTabLabel",{defaultMessage:"Untitled"}),attributes:(0,s.omit)(c,"tabs")}];return{...e,tabs:l}}},138:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,Y:()=>o});var a=r(770),n=r(550),s=r(267);const i=(e,t,r,a,s,i,o,c=!1)=>({...(0,n.H)(e,t,r,s,o,c),sharingSavedObjectProps:i,references:a}),o=(e,t)=>{var r,n,i,o,c,l,d,u;return(0,s.S)({kibanaSavedObjectMeta:{searchSourceJSON:t},title:null!==(r=e.title)&&void 0!==r?r:"",sort:null!==(n=e.sort)&&void 0!==n?n:[],columns:null!==(i=e.columns)&&void 0!==i?i:[],description:null!==(o=e.description)&&void 0!==o?o:"",grid:null!==(c=e.grid)&&void 0!==c?c:{},hideChart:null!==(l=e.hideChart)&&void 0!==l&&l,viewMode:e.viewMode,hideAggregatedPreview:e.hideAggregatedPreview,rowHeight:e.rowHeight,headerRowHeight:e.headerRowHeight,isTextBasedQuery:null!==(d=e.isTextBasedQuery)&&void 0!==d&&d,usesAdHocDataView:e.usesAdHocDataView,controlGroupJson:e.controlGroupJson,timeRestore:null!==(u=e.timeRestore)&&void 0!==u&&u,timeRange:e.timeRange?(0,a.pick)(e.timeRange,["from","to"]):void 0,refreshInterval:e.refreshInterval,rowsPerPage:e.rowsPerPage,sampleSize:e.sampleSize,density:e.density,breakdownField:e.breakdownField,visContext:e.visContext})}},739:(e,t,r)=>{"use strict";r.r(t),r.d(t,{VIEW_MODE:()=>s.VIEW_MODE,getSavedSearchFullPathUrl:()=>p.j,getSavedSearchUrl:()=>p.t,plugin:()=>v});var a=r(8),n=r(770),s=r(850),i=r(195);const o={name:"kibana_context",from:{null:()=>({type:"kibana_context"})},to:{null:()=>({type:"null"}),filter:e=>{const{filters:t=[]}=e;return{type:"filter",filterType:"filter",and:t.map(i.adaptToExpressionValueFilter)}}}},c=__kbnSharedDeps__.KbnEsQuery;var l=r(876);const d=(e=[],t)=>(0,n.uniqBy)([...Array.isArray(e)?e:[e],...Array.isArray(t)?t:[t]],(e=>JSON.stringify(e.query)));class SavedSearchPublicPlugin{setup({getStartServices:e},{contentManagement:t,expressions:r}){return t.registry.register({id:s.SavedSearchType,version:{latest:s.LATEST_VERSION},name:a.i18n.translate("savedSearch.contentManagementType",{defaultMessage:"Discover session"})}),r.registerFunction(function({getStartServices:e}){return t=async()=>{const[,,{get:t}]=await e();return{getSavedSearch:t}},{name:"kibana_context",type:"kibana_context",inputTypes:["kibana_context","null"],help:a.i18n.translate("savedSearch.kibana_context.help",{defaultMessage:"Updates kibana global context"}),args:{q:{types:["kibana_query","null"],multi:!0,aliases:["query","_"],help:a.i18n.translate("savedSearch.kibana_context.q.help",{defaultMessage:"Specify Kibana free form text query"})},filters:{types:["kibana_filter","null"],multi:!0,help:a.i18n.translate("savedSearch.kibana_context.filters.help",{defaultMessage:"Specify Kibana generic filters"})},timeRange:{types:["timerange","null"],default:null,help:a.i18n.translate("savedSearch.kibana_context.timeRange.help",{defaultMessage:"Specify Kibana time range filter"})},savedSearchId:{types:["string","null"],default:null,help:a.i18n.translate("savedSearch.kibana_context.savedSearchId.help",{defaultMessage:"Specify saved search ID to be used for queries and filters"})}},extract(e){const t=[];if(e.savedSearchId.length&&"string"==typeof e.savedSearchId[0]){const r="kibana_context.savedSearchId";return t.push({name:r,type:"search",id:e.savedSearchId[0]}),{state:{...e,savedSearchId:[r]},references:t}}return{state:e,references:t}},inject(e,t){const r=t.find((e=>"kibana_context.savedSearchId"===e.name));return r&&(e.savedSearchId[0]=r.id),e},async fn(e,r,{getKibanaRequest:a}){var s,i;const{getSavedSearch:o}=await t(),u=r.timeRange||(null==e?void 0:e.timeRange);let p=d(null==e?void 0:e.query,(null==r||null===(s=r.q)||void 0===s?void 0:s.filter(Boolean))||[]);const v=(null==r||null===(i=r.filters)||void 0===i?void 0:i.map(l.unboxExpressionValue))||[];let g=[...(null==e?void 0:e.filters)||[]];if(r.savedSearchId){const e=await o(r.savedSearchId),{query:t,filter:a}=e.searchSource.getFields();t&&(p=d(p,t)),a&&(g=[...g,...Array.isArray(a)?a:[a]])}const h=v.filter((e=>!g.some((t=>(0,n.isEqual)((0,c.fromCombinedFilter)(t).query,e.query)))));return g=[...g,...h],{type:"kibana_context",query:p,esqlVariables:null==e?void 0:e.esqlVariables,filters:(0,c.uniqFilters)(g.filter((e=>{var t;return!(null!==(t=e.meta)&&void 0!==t&&t.disabled)}))),timeRange:u}}};var t}({getStartServices:e})),r.registerType(o),{}}start(e,{data:{search:t},spaces:r,savedObjectsTaggingOss:a,contentManagement:{client:n}}){const s={search:t,spaces:r,savedObjectsTaggingOss:a,contentManagement:n};return{get:async(e,t)=>(await u(s)).get(e,t),getDiscoverSession:async e=>(await u(s)).getDiscoverSession(e),getAll:async()=>(await u(s)).getAll(),getNew:()=>(({searchSource:e})=>({searchSource:e.createEmpty(),managed:!1}))({searchSource:t.searchSource}),save:async(e,t)=>(await u(s)).save(e,t),saveDiscoverSession:async(e,t)=>(await u(s)).saveDiscoverSession(e,t),checkForDuplicateTitle:async e=>(await u(s)).checkForDuplicateTitle(e),byValueToSavedSearch:async(e,t)=>(await u(s)).byValueToSavedSearch(e,t)}}}const u=(0,n.once)((async e=>{const{SavedSearchesService:t}=await r.e(320).then(r.bind(r,320));return new t(e)}));var p=r(690);function v(){return new SavedSearchPublicPlugin}},871:(e,t,r)=>{r.p=window.__kbnPublicPath__.savedSearch},195:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},876:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},215:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>"savedSearch.chunk."+e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},a.l=(t,r,n,s)=>{if(e[t])e[t].push(r);else{var i,o;if(void 0!==n)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==t){i=d;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=t),e[t]=[r];var u=(r,a)=>{i.onerror=i.onload=null,clearTimeout(p);var n=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(a))),r)return r(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={256:0};a.f.j=(t,r)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,a)=>n=e[t]=[r,a]));r.push(n[2]=s);var i=a.p+a.u(t),o=new Error;a.l(i,(r=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[i,o,c]=r,l=0;if(i.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);c&&c(a)}for(t&&t(r);l<i.length;l++)s=i[l],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.savedSearch_bundle_jsonpfunction=self.savedSearch_bundle_jsonpfunction||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a(871),__kbnBundles__.define("plugin/savedSearch/public",a,739),__kbnBundles__.define("plugin/savedSearch/common",a,850)})();