/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t,s,i={747:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerGlobalSessionContextProvider=function(e){var t=e.analyticsClient,s=e.userId$,i=e.organizationId,l=s.pipe((0,r.filter)((function(e){return!!e})),(0,r.map)((function(e){var t=(0,a.default)().utc().startOf("day").format("YYYY-MM-DD");return(0,n.sha256)("".concat(i,":").concat(e,":").concat(t))})));t.registerContextProvider({name:"global_session",schema:{global_session:{type:"keyword",_meta:{description:"Global session ID"}}},context$:(0,r.merge)(l,(0,r.of)(sessionStorage.getItem(o))).pipe((0,r.filter)((function(e){return!!e})),(0,r.tap)((function(e){sessionStorage.setItem(o,e)})),(0,r.distinctUntilChanged)(),(0,r.map)((function(e){return{global_session:e}})))})};var i=s(1941),r=s(190),n=s(6032),a=i.__importDefault(s(1783)),o="ebt_global_session"},3723:(e,t,s)=>{"use strict";t.p=void 0;var i=s(747);Object.defineProperty(t,"p",{enumerable:!0,get:function(){return i.registerGlobalSessionContextProvider}})},3991:(e,t,s)=>{"use strict";s.d(t,{BK:()=>l,JG:()=>u});var i=s(4286),r=s.n(i),n=s(6791);const a=r().createContext(null),o=({children:e,...t})=>(0,n.jsx)(a.Provider,{value:t},e),l=({children:e,...t})=>{const{core:{notifications:s,...i},security:{userProfiles:r},toMountPoint:a}=t;return(0,n.jsx)(o,{userProfileApiClient:r,notifySuccess:({title:e,text:t},r)=>{const n={};null!=r&&r.durationMs&&(n.toastLifeTimeMs=r.durationMs),s.toasts.addSuccess({title:e,text:t?a(t,i):void 0},n)}},e)};function u(){const e=(0,i.useContext)(a);if(!e)throw new Error("UserProfilesContext is missing. Ensure your component or React root is wrapped with <UserProfilesProvider /> or <UserProfilesKibanaProvider />.");return e}},8856:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var i=s(3185),r=s(1319),n=(s(4286),s(892)),a=s(6791);const o=({user:e,avatar:t,...s})=>{const{euiTheme:o}=(0,r.useEuiTheme)();if(!e)return(0,a.jsx)(r.EuiAvatar,(0,i.default)({name:"",color:o.colors.lightestShade,initials:"?"},s));const l=(0,n.Qb)(e);return null!=t&&t.imageUrl?(0,a.jsx)(r.EuiAvatar,(0,i.default)({name:l,imageUrl:t.imageUrl,color:"plain"},s)):(0,a.jsx)(r.EuiAvatar,(0,i.default)({name:l,initials:(0,n.G8)(e,t),initialsLength:n.Nw,color:(0,n.WW)(e,t)},s))}},892:(e,t,s)=>{"use strict";s.d(t,{G8:()=>o,Nc:()=>l,Nw:()=>n,Qb:()=>u,WW:()=>a});var i=s(1319);const r=97,n=2;function a(e,t){if(t&&t.color)return t.color;const s=l(e).codePointAt(0)||r;return i.VISUALIZATION_COLORS[s%i.VISUALIZATION_COLORS.length]}function o(e,t){if(t&&t.initials)return t.initials;const s=l(e).split(" "),i=Math.min(n,s.length);return s.splice(i,s.length),s.map((e=>e.substring(0,1))).join("")}function l(e){return e.full_name||e.email||e.username}function u(e){const t=l(e);return e.email&&e.email!==t?`${t} (${e.email})`:t}},6183:(e,t,s)=>{"use strict";s.d(t,{V:()=>u});var i=s(3185),r=s(4286),n=s(1243);var a=s(6791);const o={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},l=({children:e,navigateToUrl:t,currentAppId:s,...n})=>{const l=(0,r.useRef)(null),u=(0,r.useCallback)((e=>(({event:e,container:t,navigateToUrl:s,currentAppId:i})=>{if(!t||!i)return;const r=((e,t)=>{let s=e;do{var i,r;if("a"===(null===(i=s)||void 0===i?void 0:i.tagName.toLowerCase()))return s;const e=null===(r=s)||void 0===r?void 0:r.parentElement;if(!e||e===document.body||e===t)break;s=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!r)return;const n=r.href,a=""===r.target||"_self"===r.target,o=0===e.button;n&&a&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),s(r.href))})({event:e,currentAppId:s,navigateToUrl:t,container:l.current})),[s,t]);return(0,a.jsx)("div",(0,i.default)({onClick:u,ref:l,css:o,"data-test-subj":"kbnRedirectAppLink"},n),e)},u=({children:e,...t})=>(0,a.jsx)(l,(0,i.default)({},(0,n.A$)(),t),e)},1243:(e,t,s)=>{"use strict";s.d(t,{A$:()=>c,gx:()=>l,m4:()=>u});var i=s(4286),r=s.n(i),n=s(7880),a=s(6791);const o=r().createContext(null),l=({children:e,...t})=>{const{navigateToUrl:s,currentAppId:i}=t;return(0,a.jsx)(o.Provider,{value:{navigateToUrl:s,currentAppId:i}},e)},u=({children:e,coreStart:t})=>{const{navigateToUrl:s,currentAppId$:i}=t.application,r=(0,n.A)(i,void 0);return(0,a.jsx)(o.Provider,{value:{navigateToUrl:s,currentAppId:r}},e)};function c(){const e=(0,i.useContext)(o);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}},2787:(e,t,s)=>{"use strict";s.d(t,{AE:()=>c,B:()=>f,Bo:()=>b,EM:()=>d,KM:()=>r,LV:()=>y,QI:()=>a,Vd:()=>l,Vz:()=>g,dZ:()=>v,hp:()=>m,nz:()=>o,pJ:()=>n,pr:()=>h,rX:()=>p,wY:()=>i,x:()=>u});const i="*",r="auth_provider_hint",n="auth_url_hash",a="provider",o="msg",l="next",u="kbn-session-error-reason",c=/^(?! )[a-zA-Z0-9 !"#$%&'()*+,\-./\\:;<=>?@\[\]^_`{|}~]*[a-zA-Z0-9!"#$%&'()*+,\-./\\:;<=>?@\[\]^_`{|}~]$/,h=/^[a-zA-Z0-9][a-zA-Z0-9._-]*$/,d=1024,p=5e3,g=3e5,f=1e3,v=6e4,y="/internal/security/session",m=["image/svg+xml","image/jpeg","image/png","image/gif"],b={roles:{public:{v1:"2023-10-31"}}}},1672:(e,t,s)=>{"use strict";s.d(t,{ob:()=>p,RP:()=>d,Lb:()=>h,iY:()=>A,Sy:()=>S,WW:()=>o,G8:()=>l,Nc:()=>r,Sk:()=>x,U$:()=>m,sg:()=>v,tH:()=>_,Pt:()=>y,QD:()=>b,f7:()=>w,FL:()=>c,PJ:()=>P});var i=s(1319);function r(e){return e.full_name||e.email||e.username}const n=97,a=2;function o(e,t){if(t&&t.color)return t.color;const s=r(e).codePointAt(0)||n;return i.VISUALIZATION_COLORS[s%i.VISUALIZATION_COLORS.length]}function l(e,t){if(t&&t.initials)return t.initials;const s=r(e).split(" "),i=Math.min(a,s.length);return s.splice(i,s.length),s.map((e=>e.substring(0,1))).join("")}const u=["reserved","native"];function c(e){return"anonymous"===e.authentication_provider.type}function h(e){return!c(e)&&"http"!==e.authentication_provider.type}function d(e){return u.includes(e.authentication_realm.type)&&!c(e)}function p(e,t){return"native"===e.authentication_realm.type&&t.management.security.users}var g=s(770),f=s(5008);function v(e){var t,s;return null===(t=null===(s=e.transient_metadata)||void 0===s?void 0:s.enabled)||void 0===t||t}function y(e){var t,s;return null!==(t=null===(s=e.metadata)||void 0===s?void 0:s._reserved)&&void 0!==t&&t}function m(e){var t,s;return null!==(t=null===(s=e.metadata)||void 0===s?void 0:s._deprecated)&&void 0!==t&&t}function b(e){var t,s;return null!==(t=y(e)&&(null===(s=e.name)||void 0===s?void 0:s.endsWith("_system")))&&void 0!==t&&t}function x(e){var t,s;return null!==(t=y(e)&&((null===(s=e.name)||void 0===s?void 0:s.endsWith("_admin"))||"superuser"===e.name)||w(e))&&void 0!==t&&t}function S(e){return f.i18n.translate("xpack.security.common.extendedRoleDeprecationNotice",{defaultMessage:"The {roleName} role is deprecated. {reason}",values:{roleName:e.name,reason:C(e)}})}function w(e){var t,s;return null!==(t=null===(s=e.kibana)||void 0===s?void 0:s.some((e=>e.base.includes("*"))))&&void 0!==t&&t}function _(e){var t,s;return y(e)||w(e)||(null!==(t=null===(s=e._transform_error)||void 0===s?void 0:s.length)&&void 0!==t?t:0)>0}function A(e){return(0,g.cloneDeep)(e)}function P(e){const t=A(e);return t.name="",t}function C(e){var t,s;return null!==(t=null===(s=e.metadata)||void 0===s?void 0:s._deprecated_reason)&&void 0!==t?t:""}},38:(e,t,s)=>{"use strict";s.d(t,{$c:()=>c,Qp:()=>o,gb:()=>l});var i=s(4286),r=s(409),n=s(6791);const a=(0,i.createContext)(void 0),o=({children:e,...t})=>{const s=(0,i.useContext)(a),r=(0,n.jsx)(u,{breadcrumb:t},e);return s?r:(0,n.jsx)(l,null,r)},l=({children:e,onChange:t})=>{const{services:s}=(0,r.useKibana)(),o=(0,i.useRef)([]),l=e=>{const i=e.map(((t,s)=>s===e.length-1?{...t,href:void 0}:t));t?t(i):s.chrome&&c(s.chrome)(i)};return(0,n.jsx)(a.Provider,{value:{parents:[],onMount:e=>{e.length>o.current.length&&(o.current=e,l(e))},onUnmount:e=>{e.length<o.current.length&&(o.current=e,l(e))}}},e)},u=({breadcrumb:e,children:t})=>{const{parents:s,onMount:r,onUnmount:o}=(0,i.useContext)(a),l=[...s,e];return(0,i.useEffect)((()=>(r(l),()=>o(s))),[e.text,e.href]),(0,n.jsx)(a.Provider,{value:{parents:l,onMount:r,onUnmount:o}},t)};function c(e,t=e.setBreadcrumbs){return s=>{t(s),0===s.length?e.docTitle.reset():e.docTitle.change(function(e,t=2){return e.slice(0,t).reverse().map((({text:e})=>e))}(s))}}},751:(e,t,s)=>{"use strict";s.d(t,{sH:()=>a.sH,Sh:()=>r,iZ:()=>a.iZ,Ee:()=>n,sb:()=>a.sb});var i=s(3160);const[r,n]=(0,i.A)((({userProfiles:e,users:t})=>({userProfiles:e,users:t})));var a=s(9942)},1221:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var i=s(409);function r(e){const{services:t}=(0,i.useKibana)();return e?t.application.capabilities[e]:t.application.capabilities}},9942:(e,t,s)=>{"use strict";s.d(t,{iZ:()=>c,sH:()=>l,sb:()=>h,uM:()=>u});var i=s(3160),r=s(6524),n=s.n(r),a=s(7880),o=s(751);const[l,u]=(0,i.A)((({authc:e})=>e));function c(){const e=u();return n()(e.getCurrentUser,[e])}function h(e){const{userProfiles:t}=(0,o.Ee)(),s=(0,a.A)(t.dataUpdates$);return n()((()=>t.getCurrent(e?{dataPath:e}:void 0)),[t,s])}},357:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ALL_SPACES_ID:()=>A.wY,plugin:()=>de});var i=s(8915),r=s(5008),n=s(4286),a=s.n(n),o=s(2874),l=s.n(o),u=s(409),c=s(5804),h=s(193),d=s(3991),p=s(751),g=s(38),f=s(6791);const v=Object.freeze({id:"security_account",create({application:e,authc:t,getStartServices:i,securityApiClients:n}){e.register({id:this.id,title:r.i18n.translate("xpack.security.account.breadcrumb",{defaultMessage:"User settings"}),visibleIn:[],appRoute:"/security/account",async mount({element:e,history:r}){const[[a],{AccountManagementPage:l}]=await Promise.all([i(),Promise.all([s.e(148),s.e(424),s.e(554)]).then(s.bind(s,8554))]);return(0,o.render)(a.rendering.addContext((0,f.jsx)(y,{services:a,history:r,authc:t,securityApiClients:n},(0,f.jsx)(l,null))),e),()=>(0,o.unmountComponentAtNode)(e)}})}}),y=({services:e,history:t,authc:s,securityApiClients:i,onChange:r,children:n})=>(0,f.jsx)(u.KibanaContextProvider,{services:e},(0,f.jsx)(p.sH,{authc:s},(0,f.jsx)(p.Sh,i,(0,f.jsx)(h.Router,{history:t},(0,f.jsx)(g.gb,{onChange:r},(0,f.jsx)(d.BK,{core:e,security:{userProfiles:i.userProfiles},toMountPoint:c.toMountPoint},n))))));var m=s(770),b=s(190);class UserProfileAPIClient{constructor(e){(0,i.default)(this,"internalDataUpdates$",new b.Subject),(0,i.default)(this,"dataUpdates$",this.internalDataUpdates$.asObservable()),(0,i.default)(this,"_userProfile$",new b.BehaviorSubject(null)),(0,i.default)(this,"_enabled$",new b.BehaviorSubject(!1)),(0,i.default)(this,"_userProfileLoaded$",new b.BehaviorSubject(!1)),(0,i.default)(this,"userProfile$",this._userProfile$.asObservable()),(0,i.default)(this,"userProfileLoaded$",this._userProfileLoaded$.asObservable().pipe((0,b.distinctUntilChanged)())),(0,i.default)(this,"enabled$",void 0),this.http=e,this.enabled$=this.userProfileLoaded$.pipe((0,b.skipWhile)((e=>!e)),(0,b.switchMap)((()=>this._enabled$.asObservable())),(0,b.distinctUntilChanged)())}start(){this.getCurrent({dataPath:"avatar,userSettings"}).catch((()=>{}))}getCurrent(e){return this.http.anonymousPaths.isAnonymous(window.location.pathname)?(this._enabled$.next(!1),this._userProfileLoaded$.next(!0),Promise.reject(new Error("Unable to retrieve user profile for anonymous paths"))):this.http.get("/internal/security/user_profile",{query:{dataPath:null==e?void 0:e.dataPath}}).then((e=>{var t;const s=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:{},i=(0,m.merge)(this._userProfile$.getValue(),s);return this._userProfile$.next(i),this._enabled$.next(!0),this._userProfileLoaded$.next(!0),e})).catch((e=>{var t;const s=404===(null==e||null===(t=e.response)||void 0===t?void 0:t.status);return this._enabled$.next(!s),this._userProfileLoaded$.next(!0),Promise.reject(e)}))}bulkGet(e){return this.http.post("/internal/security/user_profile/_bulk_get",{body:JSON.stringify({...e,uids:[...e.uids]})})}suggest(e,t){return this.http.post(e,{body:JSON.stringify(t)})}update(e){const t=this._userProfile$.getValue();return this._userProfile$.next(e),this.http.post("/internal/security/user_profile/_data",{body:JSON.stringify(e)}).then((()=>{this.internalDataUpdates$.next(e)})).catch((e=>(this._userProfile$.next(t),Promise.reject(e))))}partialUpdate(e){const t=(0,m.merge)(this._userProfile$.getValue(),e);return this.update(t)}}var x=s(3723);const S=__kbnSharedDeps__.KbnCryptoBrowser;class AnalyticsService{constructor(){(0,i.default)(this,"securityLicense",void 0),(0,i.default)(this,"securityFeaturesSubscription",void 0)}setup({analytics:e,authc:t,cloudId:s,http:i,securityLicense:r}){this.securityLicense=r,!1===i.anonymousPaths.isAnonymous(window.location.pathname)&&function(e,t,s){const i=(0,b.from)(t.getCurrentUser()).pipe((0,b.catchError)((()=>(0,b.of)(void 0))));(0,x.p)({analyticsClient:e,userId$:i.pipe((0,b.filter)(Boolean),(0,b.map)((({username:e})=>e))),organizationId:s}),e.registerContextProvider({name:"user_id",context$:i.pipe((0,b.map)((e=>e?e.elastic_cloud_user?{userId:e.username,isElasticCloudUser:!0}:{userId:s?`${s}:${e.username}`:e.username,isElasticCloudUser:!1}:{userId:void 0,isElasticCloudUser:!1})),(0,b.map)((({userId:e,isElasticCloudUser:t})=>{return{userId:e?(s=e,(new S.Sha256).update(s,"utf8").digest("hex")):e,isElasticCloudUser:t};var s}))),schema:{userId:{type:"keyword",_meta:{description:"The user id scoped as seen by Cloud (hashed)",optional:!0}},isElasticCloudUser:{type:"boolean",_meta:{description:"`true` if the user is managed by ESS."}}}})}(e,t,s)}start({http:e}){this.securityFeaturesSubscription=this.securityLicense.features$.pipe((0,b.filter)((({allowLogin:e})=>e)),(0,b.throttleTime)(5e3),(0,b.switchMap)((async()=>{try{await AnalyticsService.recordAuthTypeAnalytics(e)}catch{}}))).subscribe()}stop(){this.securityFeaturesSubscription&&(this.securityFeaturesSubscription.unsubscribe(),this.securityFeaturesSubscription=void 0)}static async recordAuthTypeAnalytics(e){localStorage.setItem(AnalyticsService.AuthTypeInfoStorageKey,JSON.stringify(await e.post("/internal/security/analytics/_record_auth_type",{body:localStorage.getItem(AnalyticsService.AuthTypeInfoStorageKey)})))}}(0,i.default)(AnalyticsService,"AuthTypeInfoStorageKey","kibana.security.userAuthType");const w=Object.freeze({isEnabled:!1,accessURLParameters:null});class AnonymousAccessService{constructor(){(0,i.default)(this,"internalService",void 0)}setup({share:e}){e.setAnonymousAccessServiceProvider((()=>this.internalService))}start({http:e}){this.internalService={getCapabilities:()=>e.get("/internal/security/anonymous_access/capabilities"),getState:()=>e.anonymousPaths.isAnonymous(window.location.pathname)?Promise.resolve(w):e.get("/internal/security/anonymous_access/state").catch((()=>w))}}}const _=Object.freeze({id:"security_access_agreement",create({application:e,getStartServices:t}){e.register({id:this.id,title:r.i18n.translate("xpack.security.accessAgreementAppTitle",{defaultMessage:"Access Agreement"}),chromeless:!0,appRoute:"/security/access_agreement",async mount({element:e}){const[[i],{renderAccessAgreementPage:r}]=await Promise.all([t(),Promise.all([s.e(33),s.e(256),s.e(744)]).then(s.bind(s,7744))]);return r(i,{element:e},{http:i.http,notifications:i.notifications,fatalErrors:i.fatalErrors})}})}});var A=s(2787);const P=Object.freeze({id:"security_capture_url",create({application:e,fatalErrors:t,http:i}){i.anonymousPaths.register("/internal/security/capture-url"),e.register({id:this.id,title:"Capture URL",chromeless:!0,appRoute:"/internal/security/capture-url",async mount(){try{const{parseNextURL:e}=await Promise.resolve().then(s.t.bind(s,9433,23)),t=new URL(e(window.location.href,i.basePath.serverBasePath),window.location.origin);t.searchParams.append(A.pJ,window.location.hash),window.location.replace(t.toString())}catch(e){t.add(new Error(`Cannot parse current URL: ${e&&e.message}.`))}return()=>{}}})}}),C=Object.freeze({id:"security_logged_out",create({application:e,http:t,getStartServices:i}){t.anonymousPaths.register("/security/logged_out"),e.register({id:this.id,title:r.i18n.translate("xpack.security.loggedOutAppTitle",{defaultMessage:"Logged out"}),chromeless:!0,appRoute:"/security/logged_out",async mount({element:e}){const[[t],{renderLoggedOutPage:r}]=await Promise.all([i(),Promise.all([s.e(33),s.e(716)]).then(s.bind(s,2716))]);return r(t,{element:e},{basePath:t.http.basePath,customBranding:t.customBranding})}})}}),j=Object.freeze({id:"security_login",create({application:e,http:t,getStartServices:i,config:n}){t.anonymousPaths.register("/login"),e.register({id:this.id,title:r.i18n.translate("xpack.security.loginAppTitle",{defaultMessage:"Login"}),chromeless:!0,appRoute:"/login",async mount({element:e}){const[[t],{renderLoginPage:r}]=await Promise.all([i(),Promise.all([s.e(256),s.e(938)]).then(s.bind(s,1694))]);return r(t,{element:e},{customBranding:t.customBranding,http:t.http,notifications:t.notifications,fatalErrors:t.fatalErrors,loginAssistanceMessage:n.loginAssistanceMessage,sameSiteCookies:n.sameSiteCookies})}})}}),E=Object.freeze({id:"security_logout",create({application:e,http:t}){t.anonymousPaths.register("/logout"),e.register({id:this.id,title:r.i18n.translate("xpack.security.logoutAppTitle",{defaultMessage:"Logout"}),chromeless:!0,appRoute:"/logout",mount:async()=>(window.sessionStorage.clear(),window.localStorage.removeItem(AnalyticsService.AuthTypeInfoStorageKey),window.location.href=t.basePath.prepend(`/api/security/logout${window.location.search}`),()=>{})})}}),M=Object.freeze({id:"security_overwritten_session",create({application:e,authc:t,getStartServices:i}){e.register({id:this.id,title:r.i18n.translate("xpack.security.overwrittenSessionAppTitle",{defaultMessage:"Overwritten Session"}),chromeless:!0,appRoute:"/security/overwritten_session",async mount({element:e}){const[[r],{renderOverwrittenSessionPage:n}]=await Promise.all([i(),Promise.all([s.e(33),s.e(704)]).then(s.bind(s,9704))]);return n(r,{element:e},{authc:t,basePath:r.http.basePath})}})}});class AuthenticationService{setup({application:e,fatalErrors:t,config:s,getStartServices:i,http:r}){const n=async()=>await r.get("/internal/security/me",{asSystemRequest:!0});return _.create({application:e,getStartServices:i}),P.create({application:e,fatalErrors:t,http:r}),j.create({application:e,config:s,getStartServices:i,http:r}),E.create({application:e,http:r}),C.create({application:e,getStartServices:i,http:r}),M.create({application:e,authc:{getCurrentUser:n},getStartServices:i}),{getCurrentUser:n,areAPIKeysEnabled:async()=>(await r.get("/internal/security/api_key/_enabled")).apiKeysEnabled}}}var I=s(9942),k=s(8558);const R=Object.freeze({id:"api_keys",create({authc:e,getStartServices:t}){return{id:this.id,order:30,title:r.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API keys"}),async mount({element:i,setBreadcrumbs:n,history:a}){const[[l],{APIKeysGridPage:u}]=await Promise.all([t(),Promise.all([s.e(148),s.e(424),s.e(693)]).then(s.bind(s,8693))]);return(0,o.render)(l.rendering.addContext((0,f.jsx)(U,{services:l,history:a,authc:e,onChange:(0,g.$c)(l.chrome,n)},(0,f.jsx)(g.Qp,{text:r.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API keys"}),href:"/"},(0,f.jsx)(u,null)))),i),()=>{(0,o.unmountComponentAtNode)(i)}}}}}),U=({services:e,history:t,authc:s,onChange:i,children:n})=>(0,f.jsx)(u.KibanaContextProvider,{services:e},(0,f.jsx)(I.sH,{authc:s},(0,f.jsx)(h.Router,{history:t},(0,f.jsx)(k.G,{featureId:"api_keys",tooltip:r.i18n.translate("xpack.security.management.api_keys.readonlyTooltip",{defaultMessage:"Unable to create or edit API keys"})}),(0,f.jsx)(g.gb,{onChange:i},n))));var T=s(1493),L=s(2527);const O=Object.freeze({id:"role_mappings",create({getStartServices:e}){const t=r.i18n.translate("xpack.security.management.roleMappingsTitle",{defaultMessage:"Role Mappings"});return{id:this.id,order:40,title:t,async mount({element:i,setBreadcrumbs:n,history:a}){const[[l],{RoleMappingsGridPage:c},{EditRoleMappingPage:d},{RoleMappingsAPIClient:p},{RolesAPIClient:v},{SecurityFeaturesAPIClient:y}]=await Promise.all([e(),Promise.all([s.e(148),s.e(362)]).then(s.bind(s,9362)),s.e(502).then(s.bind(s,6502)),s.e(648).then(s.bind(s,3648)),Promise.resolve().then(s.bind(s,1726)),s.e(482).then(s.bind(s,3482))]);l.chrome.docTitle.change(t);const m=new p(l.http),b=new y(l.http),x=({action:e})=>{const{name:t}=(0,T.useParams)(),s=t?(0,L.R)(t):void 0,i="edit"===e&&t&&s?{text:s,href:`/edit/${encodeURIComponent(t)}`}:{text:r.i18n.translate("xpack.security.roleMappings.createBreadcrumb",{defaultMessage:"Create"})};return(0,f.jsx)(g.Qp,{text:i.text,href:i.href},(0,f.jsx)(d,{action:e,name:s,roleMappingsAPI:m,securityFeaturesAPI:b,rolesAPIClient:new v(l.http),notifications:l.notifications,docLinks:l.docLinks,history:a,readOnly:!l.application.capabilities.role_mappings.save}))};return(0,o.render)(l.rendering.addContext((0,f.jsx)(u.KibanaContextProvider,{services:l},(0,f.jsx)(h.Router,{history:a},(0,f.jsx)(k.G,{"data-test-subj":"readOnlyBadge",featureId:"role_mappings",tooltip:r.i18n.translate("xpack.security.management.roleMappings.readonlyTooltip",{defaultMessage:"Unable to create or edit role mappings"})}),(0,f.jsx)(g.gb,{onChange:(0,g.$c)(l.chrome,n)},(0,f.jsx)(g.Qp,{text:t,href:"/"},(0,f.jsx)(h.Route,{path:["/",""],exact:!0},(0,f.jsx)(c,{notifications:l.notifications,rolesAPIClient:new v(l.http),roleMappingsAPI:m,securityFeaturesAPI:b,docLinks:l.docLinks,history:a,navigateToApp:l.application.navigateToApp,readOnly:!l.application.capabilities.role_mappings.save})),(0,f.jsx)(h.Route,{path:"/edit/:name?"},(0,f.jsx)(x,{action:"edit"})),(0,f.jsx)(h.Route,{path:"/clone/:name"},(0,f.jsx)(x,{action:"clone"}))))))),i),()=>{(0,o.unmountComponentAtNode)(i)}}}}});var $=s(1726),B=s(5587);class ManagementService{constructor(e){var t,s;(0,i.default)(this,"license",void 0),(0,i.default)(this,"licenseFeaturesSubscription",void 0),(0,i.default)(this,"securitySection",void 0),(0,i.default)(this,"userManagementEnabled",void 0),(0,i.default)(this,"roleManagementEnabled",void 0),(0,i.default)(this,"roleMappingManagementEnabled",void 0),this.userManagementEnabled=!1!==(null===(t=e.ui)||void 0===t?void 0:t.userManagementEnabled),this.roleManagementEnabled=!1!==e.roleManagementEnabled,this.roleMappingManagementEnabled=!1!==(null===(s=e.ui)||void 0===s?void 0:s.roleMappingManagementEnabled)}setup({getStartServices:e,management:t,authc:s,license:i,fatalErrors:r,buildFlavor:n}){this.license=i,this.securitySection=t.sections.section.security,this.userManagementEnabled&&this.securitySection.registerApp(B.usersManagementApp.create({authc:s,getStartServices:e})),this.roleManagementEnabled&&this.securitySection.registerApp($.rolesManagementApp.create({fatalErrors:r,license:i,getStartServices:e,buildFlavor:n})),this.securitySection.registerApp(R.create({authc:s,getStartServices:e})),this.roleMappingManagementEnabled&&this.securitySection.registerApp(O.create({getStartServices:e}))}start({capabilities:e}){this.licenseFeaturesSubscription=this.license.features$.subscribe((t=>{const s=this.securitySection,i=[[s.getApp(R.id),t.showLinks]];this.userManagementEnabled&&i.push([s.getApp(B.usersManagementApp.id),t.showLinks]),this.roleManagementEnabled&&i.push([s.getApp($.rolesManagementApp.id),t.showLinks]),this.roleMappingManagementEnabled&&i.push([s.getApp(O.id),t.showLinks&&t.showRoleMappingsManagement]);for(const[t,s]of i)!0===e.management.security[t.id]?t.enabled!==s&&(s?t.enable():t.disable()):t.disable()}))}stop(){this.licenseFeaturesSubscription&&(this.licenseFeaturesSubscription.unsubscribe(),this.licenseFeaturesSubscription=void 0)}}var F=s(869);class AuthorizationService{setup({config:e,http:t}){const s=new $.RolesAPIClient(t),i=new $.PrivilegesAPIClient(t);return{isRoleManagementEnabled:()=>e.roleManagementEnabled,roles:{getRoles:s.getRoles,getRole:s.getRole,deleteRole:s.deleteRole,saveRole:s.saveRole,bulkUpdateRoles:s.bulkUpdateRoles},privileges:{getAll:i.getAll.bind(i)}}}}var N=s(6183),D=s(1243);const z=({children:e,...t})=>{if((e=>void 0!==e.coreStart)(t)){const{coreStart:s,...i}=t,r=(0,f.jsx)(N.V,i,e);return(0,f.jsx)(D.m4,{coreStart:s},r)}const{navigateToUrl:s,currentAppId:i,...r}=t,n=(0,f.jsx)(N.V,r,e);return(0,f.jsx)(D.gx,{currentAppId:i,navigateToUrl:s},n)};var V=s(1319),K=s(7880),H=s(5879),W=s(8856),G=s(1672);const J=({items:e,closePopover:t})=>(0,f.jsx)(a().Fragment,null,(0,f.jsx)(V.EuiContextMenuPanel,null,e.map(((e,s)=>e.content?(0,f.jsx)(n.Fragment,{key:s},"function"==typeof e.content?e.content({closePopover:t}):e.content):(0,f.jsx)(V.EuiContextMenuItem,{key:s,icon:e.icon,size:"s",href:e.href,"data-test-subj":e["data-test-subj"]},e.name))))),q=({editProfileUrl:e,logoutUrl:t,userMenuLinks$:s})=>{const i=(0,K.A)(s,[]),[a,o]=(0,n.useState)(!1),l=(0,p.sb)("avatar,userSettings"),u=(0,p.iZ)(),c=u.value?(0,G.Nc)(u.value):"",h=(0,f.jsx)(V.EuiHeaderSectionItemButton,{"aria-controls":"headerUserMenu","aria-expanded":a,"aria-haspopup":"true","aria-label":r.i18n.translate("xpack.security.navControlComponent.accountMenuAriaLabel",{defaultMessage:"Account menu"}),onClick:()=>o((e=>!!u.value&&!e)),"data-test-subj":"userMenuButton",style:{lineHeight:"normal"}},l.value?(0,f.jsx)(W.H,{user:l.value.user,avatar:l.value.data.avatar,size:"s","data-test-subj":"userMenuAvatar"}):u.value&&l.error?(0,f.jsx)(W.H,{user:u.value,size:"s","data-test-subj":"userMenuAvatar"}):(0,f.jsx)(V.EuiLoadingSpinner,{size:"m"})),d=[];if(i.length){const e=i.sort((({order:e=1/0},{order:t=1/0})=>e-t)).map((({label:e,iconType:t,href:s,content:i})=>({name:e,icon:(0,f.jsx)(V.EuiIcon,{type:t,size:"m"}),href:s,"data-test-subj":`userMenuLink__${e}`,content:i})));d.push(...e)}const g=!!u.value&&(0,G.FL)(u.value),v=i.some((({setAsProfile:e})=>!0===e));if(!g&&!v){const t={name:(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.navControlComponent.editProfileLinkText",defaultMessage:"Edit profile"}),icon:(0,f.jsx)(V.EuiIcon,{type:"user",size:"m"}),href:e,onClick:()=>{o(!1)},"data-test-subj":"profileLink"};d.unshift(t)}return d.push({name:g?(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.navControlComponent.loginLinkText",defaultMessage:"Log in"}):(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.navControlComponent.logoutLinkText",defaultMessage:"Log out"}),icon:(0,f.jsx)(V.EuiIcon,{type:"exit",size:"m"}),href:t,"data-test-subj":"logoutLink"}),(0,f.jsx)(V.EuiPopover,{id:"headerUserMenu",ownFocus:!0,button:h,isOpen:a,anchorPosition:"downRight",repositionOnScroll:!0,closePopover:()=>o(!1),panelPaddingSize:"none",buffer:0},(0,f.jsx)(V.EuiContextMenu,{className:"chrNavControl__userMenu",initialPanelId:0,panels:[{id:0,title:c,content:(0,f.jsx)(J,{items:d,closePopover:()=>o(!1)})}],"data-test-subj":"userMenu"}))};class SecurityNavControlService{constructor(){(0,i.default)(this,"securityLicense",void 0),(0,i.default)(this,"logoutUrl",void 0),(0,i.default)(this,"securityApiClients",void 0),(0,i.default)(this,"navControlRegistered",void 0),(0,i.default)(this,"securityFeaturesSubscription",void 0),(0,i.default)(this,"stop$",new b.ReplaySubject(1)),(0,i.default)(this,"userMenuLinks$",new b.BehaviorSubject([]))}setup({securityLicense:e,logoutUrl:t,securityApiClients:s}){this.securityLicense=e,this.logoutUrl=t,this.securityApiClients=s}start({core:e,authc:t}){return this.securityFeaturesSubscription=this.securityLicense.features$.subscribe((({showLinks:s})=>{!e.http.anonymousPaths.isAnonymous(window.location.pathname)&&s&&!this.navControlRegistered&&this.registerSecurityNavControl(e,t)})),{getUserMenuLinks$:()=>this.userMenuLinks$.pipe((0,b.map)(this.sortUserMenuLinks),(0,b.takeUntil)(this.stop$)),addUserMenuLinks:e=>{const t=this.userMenuLinks$.value,s=t.find((({setAsProfile:e})=>!0===e)),i=e.filter((({setAsProfile:e})=>!0===e)).length;if(s&&i>0)throw new Error(`Only one custom profile link can be set. A custom profile link named ${s.label} (${s.href}) already exists`);if(i>1)throw new Error(`Only one custom profile link can be passed at a time (found ${i})`);const r=[...t,...e];this.userMenuLinks$.next(r)}}}stop(){this.securityFeaturesSubscription&&(this.securityFeaturesSubscription.unsubscribe(),this.securityFeaturesSubscription=void 0),this.navControlRegistered=!1,this.stop$.next()}registerSecurityNavControl(e,t){e.chrome.navControls.registerRight({order:4e3,mount:s=>(l().render(e.rendering.addContext((0,f.jsx)(Y,{services:e,authc:t,securityApiClients:this.securityApiClients},(0,f.jsx)(q,{editProfileUrl:e.http.basePath.prepend("/security/account"),logoutUrl:this.logoutUrl,userMenuLinks$:this.userMenuLinks$}))),s),()=>l().unmountComponentAtNode(s))}),this.navControlRegistered=!0}sortUserMenuLinks(e){return(0,m.sortBy)(e,"order")}}const Y=({authc:e,services:t,securityApiClients:s,children:i})=>(0,f.jsx)(u.KibanaContextProvider,{services:t},(0,f.jsx)(p.sH,{authc:e},(0,f.jsx)(p.Sh,s,(0,f.jsx)(z,{coreStart:t},i)))),Q=r.i18n.translate("xpack.security.checkup.insecureClusterTitle",{defaultMessage:"Your data is not secure"}),Z=Object.freeze({displayAlert:!1});class SecurityCheckupService{constructor(e,t){(0,i.default)(this,"enabled",void 0),(0,i.default)(this,"alertVisibility$",void 0),(0,i.default)(this,"storage",void 0),(0,i.default)(this,"alertToast",void 0),(0,i.default)(this,"storageKey",void 0),this.storage=t,this.enabled=e.showInsecureClusterWarning,this.alertVisibility$=new b.BehaviorSubject(this.enabled)}setup({http:e}){const t=e.basePath.serverBasePath;this.storageKey=`insecureClusterWarningVisibility${t}`,this.enabled=this.enabled&&this.getPersistedVisibilityPreference(),this.alertVisibility$.next(this.enabled)}start(e){this.enabled&&this.initializeAlert(e)}initializeAlert({http:e,notifications:t,...s}){const i=(0,b.from)(this.getSecurityCheckupState(e));(0,b.combineLatest)([i,this.alertVisibility$]).pipe((0,b.map)((([{displayAlert:e},t])=>e&&t)),(0,b.distinctUntilChanged)()).subscribe((e=>{var i,a;e&&!this.alertToast?this.alertToast=t.toasts.addWarning({title:Q,text:(i=s,a=e=>this.setAlertVisibility(!1,e),e=>{const{docLinks:t,...s}=i;return(0,o.render)(s.rendering.addContext((0,f.jsx)((()=>{const[e,s]=(0,n.useState)(!1),i=`${t.links.security.elasticsearchEnableSecurity}?blade=kibanasecuritymessage`;return(0,f.jsx)("div",{"data-test-subj":"insecureClusterAlertText"},(0,f.jsx)(V.EuiText,{size:"s"},(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.checkup.insecureClusterMessage",defaultMessage:"Donâ€™t lose one bit. Enable our free security features."})),(0,f.jsx)(V.EuiSpacer,null),(0,f.jsx)(V.EuiCheckbox,{id:"persistDismissedAlertPreference",checked:e,onChange:e=>s(e.target.checked),label:r.i18n.translate("xpack.security.checkup.dontShowAgain",{defaultMessage:"Don't show again"})}),(0,f.jsx)(V.EuiSpacer,null),(0,f.jsx)(V.EuiFlexGroup,{justifyContent:"spaceBetween"},(0,f.jsx)(V.EuiFlexItem,{grow:!1},(0,f.jsx)(V.EuiButton,{size:"s",color:"primary",fill:!0,href:i,target:"_blank","data-test-subj":"learnMoreButton"},r.i18n.translate("xpack.security.checkup.enableButtonText",{defaultMessage:"Enable security"}))),(0,f.jsx)(V.EuiFlexItem,{grow:!1},(0,f.jsx)(V.EuiButton,{size:"s",onClick:()=>a(e),"data-test-subj":"dismissAlertButton"},r.i18n.translate("xpack.security.checkup.dismissButtonText",{defaultMessage:"Dismiss"})))))}),null)),e),()=>(0,o.unmountComponentAtNode)(e)}),iconType:"warning"},{toastLifeTimeMs:864e6}):!e&&this.alertToast&&(t.toasts.remove(this.alertToast),this.alertToast=void 0)}))}getSecurityCheckupState(e){return e.anonymousPaths.isAnonymous(window.location.pathname)?Promise.resolve(Z):e.get("/internal/security/security_checkup/state").catch((()=>Z))}setAlertVisibility(e,t){this.enabled&&(this.alertVisibility$.next(e),t&&this.setPersistedVisibilityPreference(e))}getPersistedVisibilityPreference(){var e;const t=null!==(e=this.storage.getItem(this.storageKey))&&void 0!==e?e:"{}";try{const{show:e=!0}=JSON.parse(t);return e}catch(e){return!0}}setPersistedVisibilityPreference(e){this.storage.setItem(this.storageKey,JSON.stringify({show:e}))}}class SessionExpired{constructor(e,t,s){this.application=e,this.logoutUrl=t,this.tenant=s}logout(e){const t=(()=>{const{location:e}=window,t=encodeURIComponent(`${e.pathname}${e.search}${e.hash}`);return`&${A.Vd}=${t}`})(),s=(()=>{const e=`${this.tenant}/session_provider`,t=sessionStorage.getItem(e);return t?`&${A.QI}=${encodeURIComponent(t)}`:""})();this.application.navigateToUrl(`${this.logoutUrl}?${A.nz}=${e}${t}${s}`,{forceRedirect:!0,skipAppLeave:!0})}}var X=s(4048),ee=s.n(X);const te=({sessionState$:e,onExtend:t,onClose:s})=>{const i=(0,K.A)(e),[{loading:n},a]=ee()(t);if(!i||!i.expiresInMs)return null;const o=Math.max(i.expiresInMs-A.rX,0)/1e3;return(0,f.jsx)(V.EuiModal,{onClose:s,initialFocus:"[data-test-subj=session-expiration-extend-button]",role:"dialog","aria-labelledby":"session-expiration-modal-title"},(0,f.jsx)(V.EuiModalHeader,null,(0,f.jsx)(V.EuiModalHeaderTitle,{id:"session-expiration-modal-title"},(0,f.jsx)(V.EuiIcon,{type:"clock",color:"warning",size:"l",style:{marginRight:8}}),r.i18n.translate("xpack.security.sessionExpirationModal.title",{defaultMessage:"Session timeout"}))),(0,f.jsx)(V.EuiModalBody,null,(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.sessionExpirationModal.body",defaultMessage:"You will be logged out {timeout}. Please save your work and log in again.",values:{timeout:(0,f.jsx)(H.FormattedRelativeTime,{value:o,updateIntervalInSeconds:1})}})),(0,f.jsx)(V.EuiModalFooter,null,(0,f.jsx)(V.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},(0,f.jsx)(V.EuiButton,{color:"primary",isLoading:n,onClick:a,"data-test-subj":"session-expiration-extend-button",autoFocus:!0},(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.sessionExpirationModal.extendButton",defaultMessage:"Stay logged in"})))))},se=({sessionState$:e})=>{const t=(0,K.A)(e);if(!t||!t.expiresInMs)return null;const s=Math.max(t.expiresInMs-A.rX,0)/1e3;return(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.sessionExpirationToast.body",defaultMessage:"You will be logged out {timeout}. Please save your work and log in again.",values:{timeout:(0,f.jsx)(H.FormattedRelativeTime,{value:s,updateIntervalInSeconds:1})}})};let ie=function(e){return e.SESSION_EXPIRED="SESSION_EXPIRED",e.CONCURRENCY_LIMIT="CONCURRENCY_LIMIT",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.LOGGED_OUT="LOGGED_OUT",e.UNAUTHENTICATED="UNAUTHENTICATED",e}({});var re=s(3721);class SessionTimeout{constructor(e,t,s,n,a,o){(0,i.default)(this,"channel",void 0),(0,i.default)(this,"isVisible","hidden"!==document.visibilityState),(0,i.default)(this,"isFetchingSessionInfo",!1),(0,i.default)(this,"consecutiveErrorCount",0),(0,i.default)(this,"snoozedWarningState",void 0),(0,i.default)(this,"sessionState$",new b.BehaviorSubject({lastExtensionTime:0,expiresInMs:null,canBeExtended:!1})),(0,i.default)(this,"subscription",void 0),(0,i.default)(this,"warningToast",void 0),(0,i.default)(this,"warningModal",void 0),(0,i.default)(this,"stopActivityMonitor",void 0),(0,i.default)(this,"stopVisibilityMonitor",void 0),(0,i.default)(this,"removeHttpInterceptor",void 0),(0,i.default)(this,"stopRefreshTimer",void 0),(0,i.default)(this,"stopWarningTimer",void 0),(0,i.default)(this,"stopLogoutTimer",void 0),(0,i.default)(this,"handleChannelMessage",(e=>{this.isSessionState(e.data)&&this.sessionState$.next(e.data)})),(0,i.default)(this,"isSessionState",(e=>"object"==typeof e&&Object.hasOwn(null!=e?e:{},"canBeExtended"))),(0,i.default)(this,"handleHttpRequest",(e=>{if(-1===e.path.indexOf("://")&&!e.path.startsWith("//"))return e.asSystemRequest?void 0:{...e,asSystemRequest:!this.isVisible}})),(0,i.default)(this,"handleUserActivity",(()=>{this.shouldExtend()&&this.fetchSessionInfo(!0)})),(0,i.default)(this,"handleVisibilityChange",(e=>{this.isVisible=e,e&&this.handleUserActivity()})),(0,i.default)(this,"resetTimers",(({lastExtensionTime:e,expiresInMs:t})=>{var s,i,r;if(this.stopRefreshTimer=null===(s=this.stopRefreshTimer)||void 0===s?void 0:s.call(this),this.stopWarningTimer=null===(i=this.stopWarningTimer)||void 0===i?void 0:i.call(this),this.stopLogoutTimer=null===(r=this.stopLogoutTimer)||void 0===r?void 0:r.call(this),null!==t){const s=Math.max(t-A.rX,0),i=Math.max(s-A.Vz,this.snoozedWarningState?this.snoozedWarningState.lastExtensionTime+this.snoozedWarningState.expiresInMs-A.rX-e:0,0),r=i-A.B;this.stopLogoutTimer=ne((()=>this.sessionExpired.logout(ie.SESSION_EXPIRED)),s),i>0&&this.hideWarning(),i<s&&(this.stopWarningTimer=ne(this.showWarning,i)),r>0&&r<s&&(this.stopRefreshTimer=ne(this.fetchSessionInfo,r))}})),(0,i.default)(this,"toggleEventHandlers",(({expiresInMs:e,canBeExtended:t})=>{var s,i,r;null!==e?(t&&!this.stopActivityMonitor&&(this.stopActivityMonitor=function(e){const t=["mousemove","mousedown","wheel","touchstart","keydown"];for(const s of t)window.addEventListener(s,e);return()=>{for(const s of t)window.removeEventListener(s,e)}}(this.handleUserActivity)),this.removeHttpInterceptor||(this.removeHttpInterceptor=this.http.intercept({request:this.handleHttpRequest})),this.stopVisibilityMonitor||(this.stopVisibilityMonitor=function(e){const t=()=>e("hidden"!==document.visibilityState);return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}(this.handleVisibilityChange))):(this.removeHttpInterceptor=null===(s=this.removeHttpInterceptor)||void 0===s?void 0:s.call(this),this.stopActivityMonitor=null===(i=this.stopActivityMonitor)||void 0===i?void 0:i.call(this),this.stopVisibilityMonitor=null===(r=this.stopVisibilityMonitor)||void 0===r?void 0:r.call(this))})),(0,i.default)(this,"fetchSessionInfo",(async(e=!1)=>{this.isFetchingSessionInfo=!0;try{const t=await this.http.fetch(A.LV,{method:e?"POST":"GET",asSystemRequest:!e});if(this.consecutiveErrorCount=0,t){const{expiresInMs:e,canBeExtended:s}=t,i={lastExtensionTime:Date.now(),expiresInMs:e,canBeExtended:s};return this.sessionState$.next(i),this.channel&&this.channel.postMessage(i),i}}catch(e){this.consecutiveErrorCount++}finally{this.isFetchingSessionInfo=!1}})),(0,i.default)(this,"showWarning",(()=>{const{canBeExtended:e}=this.sessionState$.getValue(),t=async()=>{await this.fetchSessionInfo(!0)},s=()=>{if(this.hideWarning(!0),e)return t()};if(e&&!this.warningModal)this.warningModal=this.overlays.openModal(((e,t,s,i)=>(0,c.toMountPoint)((0,f.jsx)(te,{sessionState$:t,onExtend:s,onClose:i}),e))(this.startServices,this.sessionState$,t,s));else if(!e&&!this.warningToast){const e=((e,t,s)=>({color:"warning",iconType:"clock",title:r.i18n.translate("xpack.security.sessionExpirationToast.title",{defaultMessage:"Session timeout"}),text:(0,c.toMountPoint)((0,f.jsx)(se,{sessionState$:t}),e),onClose:s,toastLifeTimeMs:2147483647}))(this.startServices,this.sessionState$,s);this.warningToast=this.notifications.toasts.add(e)}})),(0,i.default)(this,"hideWarning",((e=!1)=>{this.warningToast&&(this.notifications.toasts.remove(this.warningToast),this.warningToast=void 0),this.warningModal&&(this.warningModal.close(),this.warningModal=void 0),e&&(this.snoozedWarningState=this.sessionState$.getValue())})),this.startServices=e,this.notifications=t,this.overlays=s,this.sessionExpired=n,this.http=a,this.tenant=o}async start(){if(!this.http.anonymousPaths.isAnonymous(window.location.pathname)){this.subscription=this.sessionState$.pipe((0,b.skip)(1),(0,b.throttleTime)(1e3),(0,b.tap)(this.toggleEventHandlers)).subscribe(this.resetTimers);try{this.channel=new BroadcastChannel(`${this.tenant}/session_timeout`),this.channel.onmessage=e=>this.handleChannelMessage(e)}catch(e){re.warn("Failed to load broadcast channel. Session management will not be kept in sync when multiple tabs are loaded.",e)}return this.fetchSessionInfo()}}stop(){var e,t;const s={lastExtensionTime:0,expiresInMs:null,canBeExtended:!1};this.toggleEventHandlers(s),this.resetTimers(s),null===(e=this.subscription)||void 0===e||e.unsubscribe(),null===(t=this.channel)||void 0===t||t.close()}shouldExtend(){const{lastExtensionTime:e}=this.sessionState$.getValue();return!this.isFetchingSessionInfo&&!this.warningToast&&!this.warningModal&&Date.now()>e+A.dZ*Math.exp(this.consecutiveErrorCount)}}function ne(e,t,s){var i;const r=2147483647;let n;return(s=null!==(i=s)&&void 0!==i?i:e=>n=e)(t>r?window.setTimeout((()=>ne(e,t-r,s)),r):window.setTimeout(e,t)),()=>clearTimeout(n)}class UnauthorizedResponseHttpInterceptor{constructor(e,t){this.sessionExpired=e,this.anonymousPaths=t}responseError(e,t){if(this.anonymousPaths.isAnonymous(window.location.pathname))return;if("omit"===e.request.credentials)return;const{response:s}=e;if(s&&401===s.status){const e=s.headers.get(A.x);this.sessionExpired.logout(e===ie.SESSION_EXPIRED||e===ie.CONCURRENCY_LIMIT?e:ie.AUTHENTICATION_ERROR),t.halt()}}}var ae=s(3185);class SuspenseErrorBoundary extends n.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{error:null})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){const{notifications:t}=this.props;if(t){const s=r.i18n.translate("xpack.security.uiApi.errorBoundaryToastTitle",{defaultMessage:"Failed to load Kibana asset"}),i=r.i18n.translate("xpack.security.uiApi.errorBoundaryToastMessage",{defaultMessage:"Reload page to continue."});t.toasts.addError(e,{title:s,toastMessage:i})}}render(){const{children:e,notifications:t}=this.props,{error:s}=this.state;return!t||s?null:(0,f.jsx)(n.Suspense,{fallback:(0,f.jsx)(V.EuiLoadingSpinner,null)},e)}}const oe=({fn:e,core:t,props:s})=>{const{notifications:i}=t,r=(0,n.useMemo)((()=>(0,n.lazy)((()=>e().then((e=>({default:e})))))),[e]);return i?(0,f.jsx)(SuspenseErrorBoundary,{notifications:i},(0,f.jsx)(r,s)):null},le=async()=>{const{PersonalInfo:e}=await s.e(643).then(s.bind(s,2643));return t=>(0,f.jsx)(e,t)},ue=({core:e})=>{function t(t){return s=>(0,f.jsx)(oe,{fn:t,core:e,props:s})}return{getPersonalInfo:t(le),getChangePassword:t((()=>(async e=>{const{ChangePassword:t}=await s.e(39).then(s.bind(s,3039));return s=>(0,f.jsx)(t,(0,ae.default)({notifications:e.notifications,userAPIClient:new B.UserAPIClient(e.http)},s))})(e)))}},ce=({core:e})=>({components:ue({core:e})});class SecurityLicenseService{constructor(){(0,i.default)(this,"licenseSubscription",void 0)}setup({license$:e}){let t;return this.licenseSubscription=e.subscribe((e=>{t=e})),{license:Object.freeze({isLicenseAvailable:()=>{var e,s;return null!==(e=null===(s=t)||void 0===s?void 0:s.isAvailable)&&void 0!==e&&e},getLicenseType:()=>{var e,s;return null!==(e=null===(s=t)||void 0===s?void 0:s.type)&&void 0!==e?e:void 0},getUnavailableReason:()=>{var e;return null===(e=t)||void 0===e?void 0:e.getUnavailableReason()},isEnabled:()=>this.isSecurityEnabledFromRawLicense(t),hasAtLeast:e=>{var s;return null===(s=t)||void 0===s?void 0:s.hasAtLeast(e)},getFeatures:()=>this.calculateFeaturesFromRawLicense(t),features$:e.pipe((0,b.map)((e=>this.calculateFeaturesFromRawLicense(e))))})}}stop(){this.licenseSubscription&&(this.licenseSubscription.unsubscribe(),this.licenseSubscription=void 0)}isSecurityEnabledFromRawLicense(e){if(!e)return!1;const t=e.getFeature("security");return void 0!==t&&t.isAvailable&&t.isEnabled}calculateFeaturesFromRawLicense(e){if(null==e||!e.isAvailable)return{showLogin:!0,allowLogin:!1,showLinks:!1,showRoleMappingsManagement:!1,allowAccessAgreement:!1,allowAuditLogging:!1,allowRoleDocumentLevelSecurity:!1,allowRoleFieldLevelSecurity:!1,allowRoleRemoteIndexPrivileges:!1,allowRemoteClusterPrivileges:!1,allowRbac:!1,allowSubFeaturePrivileges:!1,allowUserProfileCollaboration:!1,allowFips:!1,layout:void 0===e||null!=e&&e.isAvailable?"error-es-unavailable":"error-xpack-unavailable"};if(!this.isSecurityEnabledFromRawLicense(e))return{showLogin:!1,allowLogin:!1,showLinks:!1,showRoleMappingsManagement:!1,allowAccessAgreement:!1,allowAuditLogging:!1,allowRoleDocumentLevelSecurity:!1,allowRoleFieldLevelSecurity:!1,allowRoleRemoteIndexPrivileges:!1,allowRemoteClusterPrivileges:!1,allowRbac:!1,allowSubFeaturePrivileges:!1,allowUserProfileCollaboration:!1,allowFips:!1};const t=e.hasAtLeast("standard"),s=e.hasAtLeast("gold"),i=e.hasAtLeast("platinum");return{showLogin:!0,allowLogin:!0,showLinks:!0,showRoleMappingsManagement:s,allowAccessAgreement:s,allowAuditLogging:s,allowSubFeaturePrivileges:s,allowRoleDocumentLevelSecurity:i,allowRoleFieldLevelSecurity:i,allowRoleRemoteIndexPrivileges:i,allowRemoteClusterPrivileges:i,allowRbac:!0,allowUserProfileCollaboration:t,allowFips:i}}}class SecurityPlugin{constructor(e){(0,i.default)(this,"config",void 0),(0,i.default)(this,"sessionTimeout",void 0),(0,i.default)(this,"authenticationService",new AuthenticationService),(0,i.default)(this,"authorizationService",new AuthorizationService),(0,i.default)(this,"navControlService",void 0),(0,i.default)(this,"securityLicenseService",new SecurityLicenseService),(0,i.default)(this,"managementService",void 0),(0,i.default)(this,"securityCheckupService",void 0),(0,i.default)(this,"anonymousAccessService",new AnonymousAccessService),(0,i.default)(this,"analyticsService",new AnalyticsService),(0,i.default)(this,"authc",void 0),(0,i.default)(this,"authz",void 0),(0,i.default)(this,"securityApiClients",void 0),(0,i.default)(this,"buildFlavor",void 0),this.initializerContext=e,this.buildFlavor=e.env.packageInfo.buildFlavor,this.config=this.initializerContext.config.get(),this.securityCheckupService=new SecurityCheckupService(this.config,localStorage),this.navControlService=new SecurityNavControlService,this.managementService=new ManagementService(this.config)}setup(e,{cloud:t,home:s,licensing:i,management:n,share:a}){const{license:o}=this.securityLicenseService.setup({license$:i.license$});return this.securityCheckupService.setup({http:e.http}),this.authc=this.authenticationService.setup({application:e.application,fatalErrors:e.fatalErrors,config:this.config,getStartServices:e.getStartServices,http:e.http}),this.authz=this.authorizationService.setup({config:this.config,http:e.http}),this.securityApiClients={userProfiles:new UserProfileAPIClient(e.http),users:new F.UserAPIClient(e.http)},this.navControlService.setup({securityLicense:o,logoutUrl:he(e.http),securityApiClients:this.securityApiClients}),this.analyticsService.setup({analytics:e.analytics,authc:this.authc,cloudId:null==t?void 0:t.cloudId,http:e.http,securityLicense:o}),v.create({authc:this.authc,application:e.application,getStartServices:e.getStartServices,securityApiClients:this.securityApiClients}),e.security.registerSecurityDelegate((({authc:e})=>({authc:{getCurrentUser:()=>e.getCurrentUser()}}))({authc:this.authc})),e.userProfile.registerUserProfileDelegate((({userProfile:e})=>e)({userProfile:this.securityApiClients.userProfiles})),n&&this.managementService.setup({license:o,management:n,authc:this.authc,fatalErrors:e.fatalErrors,getStartServices:e.getStartServices,buildFlavor:this.buildFlavor}),n&&s&&s.featureCatalogue.register({id:"security",title:r.i18n.translate("xpack.security.registerFeature.securitySettingsTitle",{defaultMessage:"Manage permissions"}),description:r.i18n.translate("xpack.security.registerFeature.securitySettingsDescription",{defaultMessage:"Control who has access and what tasks they can perform."}),icon:"securityApp",path:"/app/management/security/roles",showOnHomePage:!0,category:"admin",order:600}),a&&this.anonymousAccessService.setup({share:a}),{authc:this.authc,authz:this.authz,license:o}}start(e,{management:t,share:s}){const{application:i,http:r,notifications:n,overlays:a}=e,{anonymousPaths:o}=r,l=he(r),u=r.basePath.serverBasePath,c=new SessionExpired(i,l,u);return r.intercept(new UnauthorizedResponseHttpInterceptor(c,o)),this.sessionTimeout=new SessionTimeout(e,n,a,c,r,u),this.sessionTimeout.start(),this.securityCheckupService.start(e),this.securityApiClients.userProfiles.start(),t&&this.managementService.start({capabilities:i.capabilities}),s&&this.anonymousAccessService.start({http:r}),this.analyticsService.start({http:e.http}),{uiApi:ce({core:e}),navControlService:this.navControlService.start({core:e,authc:this.authc}),authc:this.authc,authz:this.authz,userProfiles:{getCurrent:this.securityApiClients.userProfiles.getCurrent.bind(this.securityApiClients.userProfiles),bulkGet:this.securityApiClients.userProfiles.bulkGet.bind(this.securityApiClients.userProfiles),suggest:this.securityApiClients.userProfiles.suggest.bind(this.securityApiClients.userProfiles),update:this.securityApiClients.userProfiles.update.bind(this.securityApiClients.userProfiles),partialUpdate:this.securityApiClients.userProfiles.partialUpdate.bind(this.securityApiClients.userProfiles),userProfile$:this.securityApiClients.userProfiles.userProfile$,userProfileLoaded$:this.securityApiClients.userProfiles.userProfileLoaded$,enabled$:this.securityApiClients.userProfiles.enabled$}}}stop(){var e;null===(e=this.sessionTimeout)||void 0===e||e.stop(),this.navControlService.stop(),this.securityLicenseService.stop(),this.managementService.stop(),this.analyticsService.stop()}}function he(e){return`${e.basePath.serverBasePath}/logout`}const de=e=>new SecurityPlugin(e)},8558:(e,t,s)=>{"use strict";s.d(t,{G:()=>o});var i=s(5008),r=s(4286),n=s(409),a=s(1221);const o=({featureId:e,tooltip:t})=>{const{save:s}=(0,a.E)(e);return function(e,t=[null==e?void 0:e.iconType,null==e?void 0:e.text,null==e?void 0:e.tooltip]){const{services:s}=(0,n.useKibana)();(0,r.useEffect)((()=>{if(e)return s.chrome.setBadge(e),()=>s.chrome.setBadge()}),t)}(s?void 0:{iconType:"glasses",text:i.i18n.translate("xpack.security.management.readonlyBadge.text",{defaultMessage:"Read only"}),tooltip:t},[s]),null}},1726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PrivilegesAPIClient:()=>f.PrivilegesAPIClient,RolesAPIClient:()=>g.RolesAPIClient,rolesManagementApp:()=>p});var i=s(3185),r=(s(4286),s(2874)),n=s(1493),a=s(5008),o=s(409),l=s(193),u=s(38),c=s(8558),h=s(2527),d=s(6791);const p=Object.freeze({id:"roles",create({license:e,getStartServices:t,buildFlavor:p}){const g="serverless"===p?a.i18n.translate("xpack.security.management.rolesTitleServerless",{defaultMessage:"Custom Roles"}):a.i18n.translate("xpack.security.management.rolesTitle",{defaultMessage:"Roles"});return{id:this.id,order:20,title:g,async mount({element:f,setBreadcrumbs:v,history:y}){const[[m,{dataViews:b,features:x,spaces:S,cloud:w}],{RolesGridPage:_},{EditRolePage:A},{RolesAPIClient:P},{IndicesAPIClient:C},{PrivilegesAPIClient:j},{UserAPIClient:E}]=await Promise.all([t(),Promise.all([s.e(148),s.e(252)]).then(s.bind(s,252)),s.e(467).then(s.bind(s,6467)),Promise.resolve().then(s.bind(s,8680)),s.e(436).then(s.bind(s,8436)),Promise.resolve().then(s.bind(s,3979)),Promise.resolve().then(s.bind(s,5587))]),{application:M,http:I,chrome:k}=m;k.docTitle.change(g);const R=new P(I),U=({action:t})=>{const{roleName:s}=(0,n.useParams)(),r=s?(0,h.R)(s):void 0,o="edit"===t&&s&&r?{text:r,href:`/edit/${encodeURIComponent(s)}`}:{text:a.i18n.translate("xpack.security.roles.createBreadcrumb",{defaultMessage:"Create"})},l=null==S?void 0:S.ui;return(0,d.jsx)(u.Qp,{text:o.text,href:o.href},(0,d.jsx)(A,(0,i.default)({action:t,roleName:r,rolesAPIClient:R,userAPIClient:new E(I),indicesAPIClient:new C(I),privilegesAPIClient:new j(I),getFeatures:x.getFeatures,license:e,uiCapabilities:M.capabilities,dataViews:b,history:y,spacesApiUi:l,buildFlavor:p,cloudOrgUrl:null==w?void 0:w.organizationUrl},m)))};return(0,r.render)(m.rendering.addContext((0,d.jsx)(o.KibanaContextProvider,{services:m},(0,d.jsx)(l.Router,{history:y},(0,d.jsx)(c.G,{featureId:"roles",tooltip:a.i18n.translate("xpack.security.management.roles.readonlyTooltip",{defaultMessage:"Unable to create or edit roles"})}),(0,d.jsx)(u.gb,{onChange:(0,u.$c)(k,v)},(0,d.jsx)(u.Qp,{text:g,href:"/"},(0,d.jsx)(l.Route,{path:["/",""],exact:!0},(0,d.jsx)(_,(0,i.default)({rolesAPIClient:R,history:y,readOnly:!m.application.capabilities.roles.save,buildFlavor:p,cloudOrgUrl:null==w?void 0:w.organizationUrl},m))),(0,d.jsx)(l.Route,{path:"/edit/:roleName?"},(0,d.jsx)(U,{action:"edit"})),(0,d.jsx)(l.Route,{path:"/clone/:roleName"},(0,d.jsx)(U,{action:"clone"}))))))),f),()=>{(0,r.unmountComponentAtNode)(f)}}}}});var g=s(8680),f=s(3979)},3979:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PrivilegesAPIClient:()=>PrivilegesAPIClient});class PrivilegesAPIClientPublicContract{}class PrivilegesAPIClient extends PrivilegesAPIClientPublicContract{constructor(e){super(),this.http=e}async getAll({includeActions:e,respectLicenseLevel:t=!0}){return await this.http.get("/api/security/privileges",{query:{includeActions:e,respectLicenseLevel:t}})}async getBuiltIn(){return await this.http.get("/internal/security/esPrivileges/builtin")}}},8680:(e,t,s)=>{"use strict";s.r(t),s.d(t,{RolesAPIClient:()=>RolesAPIClient});var i=s(8915),r=s(2787),n=s(1672);const a=r.Bo.roles.public.v1;class RolesAPIClient{constructor(e){(0,i.default)(this,"getRoles",(async()=>await this.http.get("/api/security/role",{version:a,query:{replaceDeprecatedPrivileges:!0}}))),(0,i.default)(this,"queryRoles",(async e=>await this.http.post("/api/security/role/_query",{version:a,body:JSON.stringify(e||{})}))),(0,i.default)(this,"getRole",(async e=>await this.http.get(`/api/security/role/${encodeURIComponent(e)}`,{version:a,query:{replaceDeprecatedPrivileges:!0}}))),(0,i.default)(this,"deleteRole",(async e=>{await this.http.delete(`/api/security/role/${encodeURIComponent(e)}`,{version:a})})),(0,i.default)(this,"saveRole",(async({role:e,createOnly:t=!1})=>{await this.http.put(`/api/security/role/${encodeURIComponent(e.name)}`,{version:a,body:JSON.stringify(this.transformRoleForSave((0,n.iY)(e))),query:{createOnly:t}})})),(0,i.default)(this,"bulkUpdateRoles",(async({rolesUpdate:e})=>await this.http.post("/api/security/roles",{version:a,body:JSON.stringify({roles:Object.fromEntries(e.map((e=>[e.name,this.transformRoleForSave((0,n.iY)(e))])))})}))),(0,i.default)(this,"transformRoleForSave",(e=>{var t,s;const i=e=>!("clusters"in e&&e.clusters&&e.clusters.length>0)&&0===e.names.length&&0===e.privileges.length;return e.elasticsearch.indices=e.elasticsearch.indices.filter((e=>!i(e))),e.elasticsearch.remote_indices=null===(t=e.elasticsearch.remote_indices)||void 0===t?void 0:t.filter((e=>!i(e))),e.elasticsearch.indices.forEach((e=>e.query||delete e.query)),null===(s=e.elasticsearch.remote_indices)||void 0===s||s.forEach((e=>e.query||delete e.query)),e.kibana.forEach((e=>{e.base.length>0&&(e.feature={})})),delete e.name,delete e.transient_metadata,delete e._unrecognized_applications,delete e._transform_error,e})),this.http=e}}},2527:(e,t,s)=>{"use strict";s.d(t,{R:()=>i});const i=e=>{try{return decodeURIComponent(e)}catch{return e}}},5587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{UserAPIClient:()=>i.UserAPIClient,usersManagementApp:()=>g});var i=s(869),r=(s(4286),s(2874)),n=s(1493),a=s(5008),o=s(409),l=s(193),u=s(38),c=s(9942),h=s(8558),d=s(2527),p=s(6791);const g=Object.freeze({id:"users",create({authc:e,getStartServices:t}){const i=a.i18n.translate("xpack.security.management.usersTitle",{defaultMessage:"Users"});return{id:this.id,order:10,title:i,async mount({element:i,setBreadcrumbs:o,history:c}){const[[g],{UsersGridPage:v},{CreateUserPage:y,EditUserPage:m},{UserAPIClient:b},{RolesAPIClient:x}]=await Promise.all([t(),s.e(226).then(s.bind(s,6226)),s.e(945).then(s.bind(s,4945)),Promise.resolve().then(s.bind(s,869)),Promise.resolve().then(s.bind(s,1726))]);return(0,r.render)(g.rendering.addContext((0,p.jsx)(f,{services:g,history:c,authc:e,onChange:(0,u.$c)(g.chrome,o)},(0,p.jsx)(h.G,{featureId:"users",tooltip:a.i18n.translate("xpack.security.management.users.readonlyTooltip",{defaultMessage:"Unable to create or edit users"})}),(0,p.jsx)(u.Qp,{text:a.i18n.translate("xpack.security.users.breadcrumb",{defaultMessage:"Users"}),href:"/"},(0,p.jsx)(l.Routes,null,(0,p.jsx)(l.Route,{path:["/",""],exact:!0},(0,p.jsx)(v,{notifications:g.notifications,userAPIClient:new b(g.http),rolesAPIClient:new x(g.http),history:c,navigateToApp:g.application.navigateToApp,readOnly:!g.application.capabilities.users.save})),(0,p.jsx)(l.Route,{path:"/create"},(0,p.jsx)(u.Qp,{text:a.i18n.translate("xpack.security.users.editUserPage.createBreadcrumb",{defaultMessage:"Create"}),href:"/create"},(0,p.jsx)(y,null))),(0,p.jsx)(l.Route,{path:"/edit/:username",render:e=>{const t=(0,d.R)(e.match.params.username);return(0,p.jsx)(u.Qp,{text:t,href:`/edit/${encodeURIComponent(t)}`},(0,p.jsx)(m,{username:t}))}}),(0,p.jsx)(l.Route,{path:"/edit"},(0,p.jsx)(n.Redirect,{to:"/create"})))))),i),()=>{(0,r.unmountComponentAtNode)(i)}}}}}),f=({services:e,history:t,authc:s,onChange:i,children:r})=>(0,p.jsx)(o.KibanaContextProvider,{services:e},(0,p.jsx)(c.sH,{authc:s},(0,p.jsx)(l.Router,{history:t},(0,p.jsx)(u.gb,{onChange:i},r))))},869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{UserAPIClient:()=>UserAPIClient});const i="/internal/security/users";class UserAPIClient{constructor(e){this.http=e}async getUsers(){return await this.http.get(i)}async getUser(e){return await this.http.get(`${i}/${encodeURIComponent(e)}`)}async deleteUser(e){await this.http.delete(`${i}/${encodeURIComponent(e)}`)}async saveUser(e){await this.http.post(`${i}/${encodeURIComponent(e.username)}`,{body:JSON.stringify(e)})}async changePassword(e,t,s){const r={newPassword:t};s&&(r.password=s),await this.http.post(`${i}/${encodeURIComponent(e)}/password`,{body:JSON.stringify(r)})}async disableUser(e){await this.http.post(`${i}/${encodeURIComponent(e)}/_disable`)}async enableUser(e){await this.http.post(`${i}/${encodeURIComponent(e)}/_enable`)}}},3160:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(4286);s(3721);var r={};const n=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];var a=[],o=[],l=function(e){var t=(0,i.createContext)(r);a.push(t),o.push(function(e){return function(){return(0,i.useContext)(e)}}(t))};s.length?s.forEach((function(e){return l(e.name)})):l(e.name);return[function(t){for(var r=t.children,n=function(e,t){if(null==e)return{};var s,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)s=n[i],t.indexOf(s)>=0||(r[s]=e[s]);return r}(t,["children"]),o=e(n),l=r,u=0;u<a.length;u+=1){var c=a[u],h=s[u]||function(e){return e};l=(0,i.createElement)(c.Provider,{value:h(o)},l)}return l}].concat(o)}},6032:(e,t,s)=>{var i,r=s(2502);
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */
!function(){"use strict";var t="input is invalid type",n="object"==typeof window,a=n?window:{};a.JS_SHA256_NO_WINDOW&&(n=!1);var o=!n&&"object"==typeof self,l=!a.JS_SHA256_NO_NODE_JS&&"object"==typeof r&&r.versions&&r.versions.node&&"renderer"!=r.type;l?a=s.g:o&&(a=self);var u=!a.JS_SHA256_NO_COMMON_JS&&e.exports,c=s.amdO,h=!a.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,d="0123456789abcdef".split(""),p=[-2147483648,8388608,32768,128],g=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=["hex","array","digest","arrayBuffer"],y=[];!a.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!h||!a.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var m=function(e,t){return function(s){return new _(t,!0).update(s)[e]()}},b=function(e){var t=m("hex",e);l&&(t=x(t,e)),t.create=function(){return new _(e)},t.update=function(e){return t.create().update(e)};for(var s=0;s<v.length;++s){var i=v[s];t[i]=m(i,e)}return t},x=function(e,i){var r,n=s(4674),o=s(2718).Buffer,l=i?"sha224":"sha256";return r=o.from&&!a.JS_SHA256_NO_BUFFER_FROM?o.from:function(e){return new o(e)},function(s){if("string"==typeof s)return n.createHash(l).update(s,"utf8").digest("hex");if(null==s)throw new Error(t);return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===o?n.createHash(l).update(r(s)).digest("hex"):e(s)}},S=function(e,t){return function(s,i){return new A(s,t,!0).update(i)[e]()}},w=function(e){var t=S("hex",e);t.create=function(t){return new A(t,e)},t.update=function(e,s){return t.create(e).update(s)};for(var s=0;s<v.length;++s){var i=v[s];t[i]=S(i,e)}return t};function _(e,t){t?(y[0]=y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0,this.blocks=y):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function A(e,s,i){var r,n=typeof e;if("string"===n){var a,o=[],l=e.length,u=0;for(r=0;r<l;++r)(a=e.charCodeAt(r))<128?o[u++]=a:a<2048?(o[u++]=192|a>>>6,o[u++]=128|63&a):a<55296||a>=57344?(o[u++]=224|a>>>12,o[u++]=128|a>>>6&63,o[u++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++r)),o[u++]=240|a>>>18,o[u++]=128|a>>>12&63,o[u++]=128|a>>>6&63,o[u++]=128|63&a);e=o}else{if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(h&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||h&&ArrayBuffer.isView(e)))throw new Error(t)}e.length>64&&(e=new _(s,!0).update(e).array());var c=[],d=[];for(r=0;r<64;++r){var p=e[r]||0;c[r]=92^p,d[r]=54^p}_.call(this,s,i),this.update(d),this.oKeyPad=c,this.inner=!0,this.sharedMemory=i}_.prototype.update=function(e){if(!this.finalized){var s,i=typeof e;if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(h&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||h&&ArrayBuffer.isView(e)))throw new Error(t);s=!0}for(var r,n,a=0,o=e.length,l=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),s)for(n=this.start;a<o&&n<64;++a)l[n>>>2]|=e[a]<<g[3&n++];else for(n=this.start;a<o&&n<64;++a)(r=e.charCodeAt(a))<128?l[n>>>2]|=r<<g[3&n++]:r<2048?(l[n>>>2]|=(192|r>>>6)<<g[3&n++],l[n>>>2]|=(128|63&r)<<g[3&n++]):r<55296||r>=57344?(l[n>>>2]|=(224|r>>>12)<<g[3&n++],l[n>>>2]|=(128|r>>>6&63)<<g[3&n++],l[n>>>2]|=(128|63&r)<<g[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),l[n>>>2]|=(240|r>>>18)<<g[3&n++],l[n>>>2]|=(128|r>>>12&63)<<g[3&n++],l[n>>>2]|=(128|r>>>6&63)<<g[3&n++],l[n>>>2]|=(128|63&r)<<g[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=l[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=p[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},_.prototype.hash=function(){var e,t,s,i,r,n,a,o,l,u=this.h0,c=this.h1,h=this.h2,d=this.h3,p=this.h4,g=this.h5,v=this.h6,y=this.h7,m=this.blocks;for(e=16;e<64;++e)t=((r=m[e-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,s=((r=m[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,m[e]=m[e-16]+t+m[e-7]+s|0;for(l=c&h,e=0;e<64;e+=4)this.first?(this.is224?(n=300032,y=(r=m[0]-1413257819)-150054599|0,d=r+24177077|0):(n=704751109,y=(r=m[0]-210244248)-1521486534|0,d=r+143694565|0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),i=(n=u&c)^u&h^l,y=d+(r=y+(s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&g^~p&v)+f[e]+m[e])|0,d=r+(t+i)|0),t=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),i=(a=d&u)^d&c^n,v=h+(r=v+(s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&p^~y&g)+f[e+1]+m[e+1])|0,t=((h=r+(t+i)|0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),i=(o=h&d)^h&u^a,g=c+(r=g+(s=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&y^~v&p)+f[e+2]+m[e+2])|0,t=((c=r+(t+i)|0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),i=(l=c&h)^c&d^o,p=u+(r=p+(s=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&v^~g&y)+f[e+3]+m[e+3])|0,u=r+(t+i)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+u|0,this.h1=this.h1+c|0,this.h2=this.h2+h|0,this.h3=this.h3+d|0,this.h4=this.h4+p|0,this.h5=this.h5+g|0,this.h6=this.h6+v|0,this.h7=this.h7+y|0},_.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,i=this.h3,r=this.h4,n=this.h5,a=this.h6,o=this.h7,l=d[e>>>28&15]+d[e>>>24&15]+d[e>>>20&15]+d[e>>>16&15]+d[e>>>12&15]+d[e>>>8&15]+d[e>>>4&15]+d[15&e]+d[t>>>28&15]+d[t>>>24&15]+d[t>>>20&15]+d[t>>>16&15]+d[t>>>12&15]+d[t>>>8&15]+d[t>>>4&15]+d[15&t]+d[s>>>28&15]+d[s>>>24&15]+d[s>>>20&15]+d[s>>>16&15]+d[s>>>12&15]+d[s>>>8&15]+d[s>>>4&15]+d[15&s]+d[i>>>28&15]+d[i>>>24&15]+d[i>>>20&15]+d[i>>>16&15]+d[i>>>12&15]+d[i>>>8&15]+d[i>>>4&15]+d[15&i]+d[r>>>28&15]+d[r>>>24&15]+d[r>>>20&15]+d[r>>>16&15]+d[r>>>12&15]+d[r>>>8&15]+d[r>>>4&15]+d[15&r]+d[n>>>28&15]+d[n>>>24&15]+d[n>>>20&15]+d[n>>>16&15]+d[n>>>12&15]+d[n>>>8&15]+d[n>>>4&15]+d[15&n]+d[a>>>28&15]+d[a>>>24&15]+d[a>>>20&15]+d[a>>>16&15]+d[a>>>12&15]+d[a>>>8&15]+d[a>>>4&15]+d[15&a];return this.is224||(l+=d[o>>>28&15]+d[o>>>24&15]+d[o>>>20&15]+d[o>>>16&15]+d[o>>>12&15]+d[o>>>8&15]+d[o>>>4&15]+d[15&o]),l},_.prototype.toString=_.prototype.hex,_.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,i=this.h3,r=this.h4,n=this.h5,a=this.h6,o=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,s>>>24&255,s>>>16&255,s>>>8&255,255&s,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,255&o),l},_.prototype.array=_.prototype.digest,_.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},A.prototype=new _,A.prototype.finalize=function(){if(_.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();_.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),_.prototype.finalize.call(this)}};var P=b();P.sha256=P,P.sha224=b(!0),P.sha256.hmac=w(),P.sha224.hmac=w(!0),u?e.exports=P:(a.sha256=P.sha256,a.sha224=P.sha224,c&&(void 0===(i=function(){return P}.call(P,s,P,e))||(e.exports=i)))}()},6563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNavigator=t.isBrowser=t.off=t.on=t.noop=void 0,t.noop=function(){},t.on=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e&&e.addEventListener&&e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)},t.isBrowser="undefined"!=typeof window,t.isNavigator="undefined"!=typeof navigator},6943:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(4286),r=s(6563).isBrowser?i.useLayoutEffect:i.useEffect;t.default=r},7880:(e,t,s)=>{"use strict";var i=s(1941),r=s(4286),n=i.__importDefault(s(6943));t.A=function(e,t){var s=r.useState(t),i=s[0],a=s[1];return n.default((function(){var t=e.subscribe(a);return function(){return t.unsubscribe()}}),[e]),i}},7073:(e,t,s)=>{s.p=window.__kbnPublicPath__.security},8744:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},9118:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/features/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},409:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},6323:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/remoteClusters/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},1254:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/spaces/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},9610:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/spaces/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},2718:(e,t,s)=>{e.exports=s(2497)(20183)},3721:(e,t,s)=>{e.exports=s(2497)(4971)},3185:(e,t,s)=>{e.exports=s(2497)(51858)},8915:(e,t,s)=>{e.exports=s(2497)(67493)},2502:(e,t,s)=>{e.exports=s(2497)(69849)},5927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},1319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},6791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},7043:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},5008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},5879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},3999:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextTheme},5804:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaMount},193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},9433:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnStd},3803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},1783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},2488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},4286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},2874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},1493:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouterDom},6524:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useAsync},4048:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useAsyncFn},5668:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useUpdateEffect},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},5079:e=>{"use strict";e.exports=__kbnSharedDeps__.SaferLodashSet},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},2497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__},4674:()=>{}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,exports:{}};return i[e](s,s.exports,n),s.exports}n.m=i,n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"==typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"==typeof s.then)return s}var r=Object.create(null);n.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&s;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>s[e]));return a.default=()=>s,n.d(r,a),r},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,s)=>(n.f[s](e,t),t)),[])),n.u=e=>"security.chunk."+e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},n.l=(e,t,i,r)=>{if(s[e])s[e].push(t);else{var a,o;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==e){a=c;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=e),s[e]=[t];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(d);var r=s[e];if(delete s[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),t)return t(i)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),o&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={977:0};n.f.j=(t,s)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,r)=>i=e[t]=[s,r]));s.push(i[2]=r);var a=n.p+n.u(t),o=new Error;n.l(a,(s=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var i,r,[a,o,l]=s,u=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);l&&l(n)}for(t&&t(s);u<a.length;u++)r=a[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.security_bundle_jsonpfunction=self.security_bundle_jsonpfunction||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0,n(7073),__kbnBundles__.define("plugin/security/public",n,357)})();