(()=>{var e,t={699:(e,t,s)=>{"use strict";s.d(t,{VG:()=>i,ml:()=>n,PO:()=>a});const i=e=>{if(e){var t;const s=e=>e.type?e:e.child?s(e.child):void 0;return null===(t=s(e))||void 0===t?void 0:t.type}},n=e=>{if(e){var t;const s=e=>e.child?s(e.child):e;return null===(t=s(e))||void 0===t?void 0:t.type}};function a(e,t){return e&&e[t]?Object.fromEntries(Object.entries(e[t]).map((([e,t])=>"ignore"===t?[e,void 0]:[e,t]))):{}}s(195)},17:(e,t,s)=>{"use strict";s.r(t),s.d(t,{EXPRESSION_HEATMAP_NAME:()=>a,PLUGIN_ID:()=>h,PLUGIN_NAME:()=>m,heatmapFunction:()=>p,heatmapGridConfig:()=>g,heatmapLegendConfig:()=>u});var i=s(8),n=s(634);const a="heatmap",r="heatmap_legend",o="heatmap_grid",l=(e,t,s,i)=>{const n="string"==typeof t?((e,t)=>{var s,i;const n=e.find((e=>e.id===t));if(n)return{accessor:n,format:{id:null===(s=n.meta.params)||void 0===s?void 0:s.id,params:{...null===(i=n.meta.params)||void 0===i?void 0:i.params}},type:"vis_dimension"}})(e,t):t;n&&s.push([[n],i])},p=()=>({name:a,type:"render",inputTypes:["datatable"],help:i.i18n.translate("expressionHeatmap.function.help",{defaultMessage:"Heatmap visualization"}),args:{percentageMode:{types:["boolean"],default:!1,help:i.i18n.translate("expressionHeatmap.function.percentageMode.help",{defaultMessage:"When is on, tooltip and legends appear as percentages."})},palette:{types:["palette"],help:i.i18n.translate("expressionHeatmap.function.palette.help",{defaultMessage:"Provides colors for the values, based on the bounds."})},legend:{types:[r],help:i.i18n.translate("expressionHeatmap.function.legendConfig.help",{defaultMessage:"Configure the chart legend."}),default:`{${r}}`},gridConfig:{types:[o],help:i.i18n.translate("expressionHeatmap.function.gridConfig.help",{defaultMessage:"Configure the heatmap layout."}),default:`{${o}}`},showTooltip:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.addTooltipHelpText",{defaultMessage:"Show tooltip on hover"}),default:!0},highlightInHover:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.highlightInHoverHelpText",{defaultMessage:"When this is enabled, it highlights the ranges of the same color on legend hover"})},lastRangeIsRightOpen:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.lastRangeIsRightOpen",{defaultMessage:"If is set to true, the last range value will be right open"}),default:!0},xAccessor:{types:["string","vis_dimension"],help:i.i18n.translate("expressionHeatmap.function.args.xAccessorHelpText",{defaultMessage:"The id of the x axis column or the corresponding dimension"})},yAccessor:{types:["string","vis_dimension"],help:i.i18n.translate("expressionHeatmap.function.args.yAccessorHelpText",{defaultMessage:"The id of the y axis column or the corresponding dimension"})},valueAccessor:{types:["string","vis_dimension"],help:i.i18n.translate("expressionHeatmap.function.args.valueAccessorHelpText",{defaultMessage:"The id of the value column or the corresponding dimension"}),required:!0},splitRowAccessor:{types:["string","vis_dimension"],help:i.i18n.translate("expressionHeatmap.function.args.splitRowAccessorHelpText",{defaultMessage:"The id of the split row or the corresponding dimension"})},splitColumnAccessor:{types:["string","vis_dimension"],help:i.i18n.translate("expressionHeatmap.function.args.splitColumnAccessorHelpText",{defaultMessage:"The id of the split column or the corresponding dimension"})},ariaLabel:{types:["string"],help:i.i18n.translate("expressionHeatmap.functions.args.ariaLabelHelpText",{defaultMessage:"Specifies the aria label of the heat map"}),required:!1}},fn(e,t,s){var r,o,p,c,d,u,g,h,m,f,b,v;if((0,n.validateAccessor)(t.xAccessor,e.columns),(0,n.validateAccessor)(t.yAccessor,e.columns),(0,n.validateAccessor)(t.valueAccessor,e.columns),(0,n.validateAccessor)(t.splitRowAccessor,e.columns),(0,n.validateAccessor)(t.splitColumnAccessor,e.columns),null!=s&&null!==(r=s.inspectorAdapters)&&void 0!==r&&r.tables){s.inspectorAdapters.tables.reset(),s.inspectorAdapters.tables.allowCsvExport=!0;const a=[];t.valueAccessor&&l(e.columns,t.valueAccessor,a,i.i18n.translate("expressionHeatmap.function.dimension.metric",{defaultMessage:"Metric"})),t.yAccessor&&l(e.columns,t.yAccessor,a,i.i18n.translate("expressionHeatmap.function.dimension.yaxis",{defaultMessage:"Y axis"})),t.xAccessor&&l(e.columns,t.xAccessor,a,i.i18n.translate("expressionHeatmap.function.dimension.xaxis",{defaultMessage:"X axis"})),t.splitRowAccessor&&l(e.columns,t.splitRowAccessor,a,i.i18n.translate("expressionHeatmap.function.dimension.splitRow",{defaultMessage:"Split by row"})),t.splitColumnAccessor&&l(e.columns,t.splitColumnAccessor,a,i.i18n.translate("expressionHeatmap.function.dimension.splitColumn",{defaultMessage:"Split by column"}));const r=(0,n.prepareLogTable)(e,a,!0);s.inspectorAdapters.tables.logDatatable("default",r)}return{type:"render",as:a,value:{data:e,args:{...t,ariaLabel:null!==(o=null!==(p=t.ariaLabel)&&void 0!==p?p:null===(c=s.variables)||void 0===c?void 0:c.embeddableTitle)&&void 0!==o?o:null===(d=s.getExecutionContext)||void 0===d||null===(u=d.call(s))||void 0===u?void 0:u.description},syncTooltips:null!==(g=null===(h=s.isSyncTooltipsEnabled)||void 0===h?void 0:h.call(s))&&void 0!==g&&g,syncCursor:null===(m=null===(f=s.isSyncCursorEnabled)||void 0===f?void 0:f.call(s))||void 0===m||m,canNavigateToLens:Boolean(null===(b=s.variables)||void 0===b?void 0:b.canNavigateToLens),overrides:null===(v=s.variables)||void 0===v?void 0:v.overrides}}}});var c=s(59),d=s(134);const u={name:r,aliases:[],type:r,help:"Configure the heatmap chart's legend",inputTypes:["null"],args:{isVisible:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.legend.isVisible.help",{defaultMessage:"Specifies whether or not the legend is visible."})},position:{types:["string"],default:c.Position.Right,options:[c.Position.Top,c.Position.Right,c.Position.Bottom,c.Position.Left],help:i.i18n.translate("expressionHeatmap.function.args.legend.position.help",{defaultMessage:"Specifies the legend position."}),strict:!0},maxLines:{types:["number"],help:i.i18n.translate("expressionHeatmap.function.args.legend.maxLines.help",{defaultMessage:"Specifies the number of lines per legend item."})},shouldTruncate:{types:["boolean"],default:!0,help:i.i18n.translate("expressionHeatmap.function.args.legend.shouldTruncate.help",{defaultMessage:"Specifies whether or not the legend items should be truncated."})},legendSize:{types:["string"],default:d.DEFAULT_LEGEND_SIZE,help:i.i18n.translate("expressionHeatmap.function.args.legendSize.help",{defaultMessage:"Specifies the legend size."}),options:[d.LegendSize.AUTO,d.LegendSize.SMALL,d.LegendSize.MEDIUM,d.LegendSize.LARGE,d.LegendSize.EXTRA_LARGE],strict:!0}},fn:(e,t)=>({type:r,...t})},g={name:o,aliases:[],type:o,help:"Configure the heatmap layout",inputTypes:["null"],args:{strokeWidth:{types:["number"],help:i.i18n.translate("expressionHeatmap.function.args.grid.strokeWidth.help",{defaultMessage:"Specifies the grid stroke width"}),required:!1},strokeColor:{types:["string"],help:i.i18n.translate("expressionHeatmap.function.args.grid.strokeColor.help",{defaultMessage:"Specifies the grid stroke color"}),required:!1},isCellLabelVisible:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.grid.isCellLabelVisible.help",{defaultMessage:"Specifies whether or not the cell label is visible."})},isYAxisLabelVisible:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.grid.isYAxisLabelVisible.help",{defaultMessage:"Specifies whether or not the Y-axis labels are visible."})},isYAxisTitleVisible:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.grid.isYAxisTitleVisible.help",{defaultMessage:"Specifies whether or not the Y-axis title is visible."})},yTitle:{types:["string"],help:i.i18n.translate("expressionHeatmap.function.args.grid.yTitle.help",{defaultMessage:"Specifies the title of the y axis"}),required:!1},isXAxisLabelVisible:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.grid.isXAxisLabelVisible.help",{defaultMessage:"Specifies whether or not the X-axis labels are visible."})},xAxisLabelRotation:{types:["number"],help:i.i18n.translate("expressionHeatmap.function.args.grid.xAxisLabelRotation.help",{defaultMessage:"Specifies the rotation of the X-axis labels."})},isXAxisTitleVisible:{types:["boolean"],help:i.i18n.translate("expressionHeatmap.function.args.grid.isXAxisTitleVisible.help",{defaultMessage:"Specifies whether or not the X-axis title is visible."})},xTitle:{types:["string"],help:i.i18n.translate("expressionHeatmap.function.args.grid.xTitle.help",{defaultMessage:"Specifies the title of the x axis"}),required:!1}},fn:(e,t)=>({type:o,...t})},h="expressionHeatmap",m="expressionHeatmap"},589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>E});var i=s(215),n=s(17);const[a,r]=(0,i.createGetterSetter)("data.datatableUtilities"),[o,l]=(0,i.createGetterSetter)("fieldFormats"),[p,c]=(0,i.createGetterSetter)("palette"),[d,u]=(0,i.createGetterSetter)("core.uiSettings");var g=s(185),h=s(8);s(286);const m=__kbnSharedDeps__.ReactDom,f=__kbnSharedDeps__.Moment;var b=s.n(f);const v=__kbnSharedDeps__.KbnReactKibanaContextRender,_=__kbnSharedDeps__.KbnAnalytics,x=__kbnSharedDeps__.KbnEbtTools;var y=s(699),S=s(791);const A=({euiTheme:e})=>(0,S.css)({width:"100%",height:"100%",padding:e.size.s,overflow:"auto hidden",userSelect:"text"},"","");class ExpressionHeatmapPlugin{setup(e,{expressions:t,charts:r}){r.palettes.getPalettes().then((e=>{c(e)})),u(e.uiSettings);const l=(0,i.createStartServicesGetter)(e.getStartServices);t.registerFunction(n.heatmapFunction),t.registerFunction(n.heatmapLegendConfig),t.registerFunction(n.heatmapGridConfig),t.registerRenderer((({getStartDeps:e})=>({name:n.EXPRESSION_HEATMAP_NAME,displayName:h.i18n.translate("expressionHeatmap.visualizationName",{defaultMessage:"Heatmap"}),reuseDomNode:!0,render:async(t,i,r)=>{const l=(0,x.createPerformanceTracker)({type:x.PERFORMANCE_TRACKER_TYPES.PANEL,subType:n.EXPRESSION_HEATMAP_NAME});l.mark(x.PERFORMANCE_TRACKER_MARKS.PRE_RENDER);const{core:c,plugins:u}=e();r.onDestroy((()=>{(0,m.unmountComponentAtNode)(t)})),r.event({name:"chartSize",data:{maxDimensions:{x:{value:100,unit:"percentage"},y:{value:100,unit:"percentage"}}}});const h=function(e){var t,s;const i=e.get("dateFormat:tz");return null!==(t=null===(s=b().tz.zone(i))||void 0===s?void 0:s.name)&&void 0!==t?t:b().tz.guess(!0)}(d()),{HeatmapComponent:f}=await s.e(219).then(s.bind(s,219)),{isInteractive:E}=r;l.mark(x.PERFORMANCE_TRACKER_MARKS.RENDER_START),(0,m.render)((0,S.jsx)(v.KibanaRenderContextProvider,c,(0,S.jsx)("div",{className:"eui-scrollBar",css:A,"data-test-subj":"heatmapChart"},(0,S.jsx)(f,(0,g.default)({},i,{onClickValue:e=>{r.event({name:"filter",data:e})},onSelectRange:e=>{r.event({name:"brush",data:e})},timeZone:h,datatableUtilities:a(),formatFactory:o().deserialize,chartsThemeService:u.charts.theme,paletteService:p(),renderComplete:()=>{l.mark(x.PERFORMANCE_TRACKER_MARKS.RENDER_COMPLETE);const e=r.getExecutionContext(),t=(0,y.VG)(e),s=(0,y.ml)(e);if(t&&s){var a;const e=[`render_${s}_${n.EXPRESSION_HEATMAP_NAME}`,i.canNavigateToLens?`render_${s}_${n.EXPRESSION_HEATMAP_NAME}_convertable`:void 0].filter((e=>Boolean(e)));null===(a=u.usageCollection)||void 0===a||a.reportUiCounter(t,_.METRIC_TYPE.COUNT,e)}r.done()},uiState:r.uiState,interactive:E(),chartsActiveCursorService:u.charts.activeCursor,syncTooltips:i.syncTooltips,syncCursor:i.syncCursor,onClickMultiValue:e=>{r.event({name:"multiFilter",data:e})}})))),t)}}))({getStartDeps:l}))}start(e,{data:t,fieldFormats:s}){l(s),r(t.datatableUtilities)}}function E(){return new ExpressionHeatmapPlugin}},307:(e,t,s)=>{s.p=window.__kbnPublicPath__.expressionHeatmap},240:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},195:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},627:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},215:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},134:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},634:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},185:(e,t,s)=>{e.exports=s(497)(51858)},59:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},380:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextTheme},803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>"expressionHeatmap.chunk."+e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=(t,s,n,a)=>{if(e[t])e[t].push(s);else{var r,o;if(void 0!==n)for(var l=document.getElementsByTagName("script"),p=0;p<l.length;p++){var c=l[p];if(c.getAttribute("src")==t){r=c;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.src=t),e[t]=[s];var d=(s,i)=>{r.onerror=r.onload=null,clearTimeout(u);var n=e[t];if(delete e[t],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(i))),s)return s(i)},u=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),o&&document.head.appendChild(r)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=s[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={159:0};i.f.j=(t,s)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var a=new Promise(((s,i)=>n=e[t]=[s,i]));s.push(n[2]=a);var r=i.p+i.u(t),o=new Error;i.l(r,(s=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,n[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var n,a,[r,o,l]=s,p=0;if(r.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);l&&l(i)}for(t&&t(s);p<r.length;p++)a=r[p],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},s=self.expressionHeatmap_bundle_jsonpfunction=self.expressionHeatmap_bundle_jsonpfunction||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i(307),__kbnBundles__.define("plugin/expressionHeatmap/public",i,589),__kbnBundles__.define("plugin/expressionHeatmap/common",i,17)})();