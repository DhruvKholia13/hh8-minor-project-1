/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t,r,n={69219:(e,t,r)=>{"use strict";r.d(t,{BI:()=>T,Cl:()=>k,DW:()=>d,Ez:()=>v,Kp:()=>h,Rn:()=>P,Ry:()=>f,S2:()=>o,SL:()=>x,Wp:()=>p,ZQ:()=>w,_9:()=>R,at:()=>b,fJ:()=>D,gH:()=>i,h:()=>y,h9:()=>u,ht:()=>n,i2:()=>c,lj:()=>g,pR:()=>_,qT:()=>A,sR:()=>O,tU:()=>S,tV:()=>M,tg:()=>m,vT:()=>a,xv:()=>l,z1:()=>E,zt:()=>s});const n="@timestamp",a="kibana",s=`${a}.alert`,i=`${s}.rule`,o=`${a}.space_ids`,l=`${a}.version`,c=`${s}.action_group`,u=`${s}.case_ids`,p=`${s}.duration.us`,d=`${s}.end`,m=`${s}.flapping`,g=`${s}.maintenance_window_ids`,_=`${s}.instance.id`,b=`${s}.reason`,h=`${s}.start`,v=`${s}.status`,f=`${s}.time_range`,y=`${s}.uuid`,x=`${s}.workflow_status`,S=`${s}.workflow_tags`,k=`${s}.workflow_assignee_ids`,T=`${i}.category`,D=`${i}.consumer`,E=`${i}.execution.uuid`,A=`${i}.name`,w=`${i}.parameters`,P=`${i}.producer`,O=`${i}.tags`,M=`${i}.rule_type_id`,R=`${i}.uuid`},69397:(e,t,r)=>{"use strict";r.d(t,{bj:()=>a,lV:()=>l,wE:()=>n});const n="observability.rules.custom_threshold";let a=function(e){return e.ErrorCount="apm.error_rate",e.TransactionErrorRate="apm.transaction_error_rate",e.TransactionDuration="apm.transaction_duration",e.Anomaly="apm.anomaly",e}({});const s=Object.values(a),i=["xpack.synthetics.alerts.monitorStatus","xpack.synthetics.alerts.tls"];let o=function(e){return e.MetricThreshold="metrics.alert.threshold",e.InventoryThreshold="metrics.alert.inventory.threshold",e}({});const l=[...s,...i,...Object.values(o),"xpack.uptime.alerts.tls","xpack.uptime.alerts.tlsCertificate","xpack.uptime.alerts.monitorStatus","xpack.uptime.alerts.durationAnomaly","logs.alert.document.count","slo.rules.burnRate",n]},3489:(e,t,r)=>{"use strict";r.d(t,{KL:()=>i,QR:()=>s,TI:()=>u,Uv:()=>a,WT:()=>c,Xn:()=>p,_x:()=>l,iB:()=>o});var n=r(75008);r(55964);const a="ENVIRONMENT_ALL",s="ENVIRONMENT_NOT_DEFINED",i=n.i18n.translate("xpack.apm.filter.environment.allLabel",{defaultMessage:"All"});function o(e){return e&&e!==s?e===a?i:e:n.i18n.translate("xpack.apm.filter.environment.notDefinedLabel",{defaultMessage:"Not defined"})}const l={value:a,label:o(a)},c={value:s,label:o(s)};function u(e){return e&&e!==a}function p({requestedEnvironment:e,currentEnvironmentUrlParam:t}){return(e||c.value)===(t||l.value)&&t||l.value}},35344:(e,t,r)=>{"use strict";r.d(t,{x:()=>a});var n=r(75008);const a=n.i18n.translate("xpack.apm.notAvailableLabel",{defaultMessage:"N/A"});n.i18n.translate("xpack.apm.clickArialLabel.",{defaultMessage:"Click to view more details"})},33599:(e,t,r)=>{"use strict";r.d(t,{JU:()=>c,ZG:()=>l,aE:()=>d,qQ:()=>o,tm:()=>p,wG:()=>u}),r(25170);var n=r(26752),a=r.n(n),s=r(35344),i=r(89504);function o(e){return(0,i.B)(e)?a()(e).format("0,0.0"):s.x}function l(e,t=3){return(0,i.B)(e)?a()(e).format(`0,0.${"0".repeat(t)}`):s.x}function c(e){return(0,i.B)(e)?a()(e).format("0,0"):s.x}function u(e,t,r=s.x){if(!t||!(0,i.B)(e))return r;const n=e/t;return Math.abs(n)>=.1||0===n?a()(n).format("0%"):a()(n).format("0.0%")}function p(e,t=10){return(0,i.B)(e)?0===e||e>=t?c(e):o(e):s.x}function d(e){return e<1e3?c(e):e<1e6?`${c(e/1e3)}k`:e<1e9?`${c(e/1e6)}m`:e<1e12?`${c(e/1e9)}b`:`${c(e/1e12)}t`}},7252:(e,t,r)=>{"use strict";r.d(t,{Z0:()=>i,aE:()=>n.aE,qQ:()=>n.qQ,Fi:()=>f,dg:()=>w,Uw:()=>v,JU:()=>n.JU,Qy:()=>y,wG:()=>n.wG,ZG:()=>n.ZG,HZ:()=>b,MR:()=>h,L9:()=>C,oD:()=>j,tF:()=>_,No:()=>A});var n=r(33599),a=r(62488),s=r.n(a);function i(e,t="milliseconds"){const r=s()(e),n=function(e){const t=e.utcOffset()/60,r=t>0?`+${t}`:t,n=Number.isInteger(t)?r:"Z";return e.format(`(UTC${n})`)}(r);return r.format(`${function(e){switch(e){case"years":return"YYYY";case"months":return"MMM YYYY";case"days":return"MMM D, YYYY";default:return""}}("days")}, ${function(e){switch(e){case"hours":return"HH";case"minutes":return"HH:mm";case"seconds":return"HH:mm:ss";case"milliseconds":return"HH:mm:ss.SSS";default:return""}}(t)} ${n}`)}var o=r(75008),l=r(51783),c=r.n(l),u=r(30770),p=r(35344),d=r(89504);function m({unit:e,microseconds:t,defaultValue:r=p.x,threshold:a=10}){if(!(0,d.B)(t))return{value:r,formatted:r};const{convertedValue:s,unitLabel:i}=function(e,t,r=10){const a=t/1e3;switch(e){case"hours":return{unitLabel:o.i18n.translate("xpack.apm.formatters.hoursTimeUnitLabel",{defaultMessage:"h"}),convertedValue:(0,n.tm)(c().duration(a).asHours(),r)};case"minutes":return{unitLabel:o.i18n.translate("xpack.apm.formatters.minutesTimeUnitLabel",{defaultMessage:"min"}),convertedValue:(0,n.tm)(c().duration(a).asMinutes(),r)};case"seconds":return{unitLabel:o.i18n.translate("xpack.apm.formatters.secondsTimeUnitLabel",{defaultMessage:"s"}),convertedValue:(0,n.tm)(c().duration(a).asSeconds(),r)};case"milliseconds":return{unitLabel:o.i18n.translate("xpack.apm.formatters.millisTimeUnitLabel",{defaultMessage:"ms"}),convertedValue:(0,n.tm)(c().duration(a).asMilliseconds(),r)};case"microseconds":return{unitLabel:o.i18n.translate("xpack.apm.formatters.microsTimeUnitLabel",{defaultMessage:"Î¼s"}),convertedValue:(0,n.JU)(t)}}}(e,t,a);return{value:s,unit:i,formatted:`${s} ${i}`}}const g=(e,t)=>1e3*c().duration(e,t).asMilliseconds(),_=(0,u.memoize)(((e,t=10,r=1)=>{const n=function(e,t=10){return e>g(t,"hours")?"hours":e>g(t,"minutes")?"minutes":e>g(t,"seconds")?"seconds":e>g(1,"milliseconds")?"milliseconds":"microseconds"}(e,t);return(e,{defaultValue:a}={})=>m({unit:n,microseconds:(0,d.B)(e)?e*r:e,defaultValue:a,threshold:t})}),((e,t)=>`${e}_${t}`));function b(e){const t=h(e);return o.i18n.translate("xpack.apm.transactionRateLabel",{defaultMessage:"{displayedValue} tpm",values:{displayedValue:t}})}function h(e){if(!(0,d.B)(e))return p.x;let t;return t=0===e?"0":e<=.1?"< 0.1":(0,n.qQ)(e),t}function v(e){return o.i18n.translate("xpack.apm.exactTransactionRateLabel",{defaultMessage:"{value} tpm",values:{value:(0,n.tm)(e)}})}function f(e,{defaultValue:t=p.x}={}){return(0,d.B)(e)?_(e)(e,{defaultValue:t}).formatted:t}function y(e){return m({unit:"milliseconds",microseconds:e}).formatted}function x(e){return`${(0,n.qQ)(e/1e3)} KB`}function S(e){return`${(0,n.qQ)(e/1e6)} MB`}function k(e){return`${(0,n.qQ)(e/1e9)} GB`}function T(e){return`${(0,n.qQ)(e/1e12)} TB`}function D(e){return`${(0,n.qQ)(e)} B`}const E=e=>t=>null==t||isNaN(t)?"":e(t),A=(0,u.memoize)((e=>{const t=P(e);return E(t)})),w=E((e=>P(e)(e))),P=e=>e>1e12?T:e>1e9?k:e>1e6?S:e>1e3?x:D;var O=r(50306),M=r(3489);const R=({pathname:e,query:t})=>`${e}?${(0,O.stringify)(t)}`,C=(e,t)=>R({pathname:`/app/apm/services/${encodeURIComponent(e)}/errors`,query:{environment:null!=t?t:M._x.value}}),j=(e,t,r)=>R({pathname:`/app/apm/services/${encodeURIComponent(e)}`,query:{transactionType:r,environment:null!=t?t:M._x.value}})},89504:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(30770);function a(e){return(0,n.isFinite)(e)}},20458:(e,t,r)=>{"use strict";r.d(t,{LD:()=>n,QX:()=>s,g2:()=>a});const n="APM_ALERTING_FAILED_TRANSACTIONS_CHART_EMBEDDABLE",a="APM_ALERTING_LATENCY_CHART_EMBEDDABLE",s="APM_ALERTING_THROUGHPUT_CHART_EMBEDDABLE"},65715:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});const n="APM_TRACE_WATERFALL_EMBEDDABLE"},99876:(e,t,r)=>{"use strict";r.r(t),r.d(t,{plugin:()=>q});var n=r(68915),a=r(64390),s=r(75008),i=r(73780),o=r(16808),l=r(80190),c=r(84286),u=r.n(c),p=r(69397),d=r(69219),m=r(7252);const g=s.i18n.translate("xpack.apm.alertTypes.errorCount.defaultActionMessage",{defaultMessage:"'{{context.reason}}'\n\n'{{rule.name}}' is active with the following conditions:\n\n- Service name: '{{context.serviceName}}'\n- Environment: '{{context.environment}}'\n- Error count: '{{context.triggerValue}}' errors over the last '{{context.interval}}'\n- Threshold: '{{context.threshold}}'\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),_=s.i18n.translate("xpack.apm.alertTypes.errorCount.defaultRecoveryMessage",{defaultMessage:"Recovered: '{{context.reason}}'\n\n'{{rule.name}}' has recovered.\n\n- Service name: '{{context.serviceName}}'\n- Environment: '{{context.environment}}'\n- Error count: '{{context.triggerValue}}' errors over the last '{{context.interval}}'\n- Threshold: '{{context.threshold}}'\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),b=s.i18n.translate("xpack.apm.alertTypes.transactionDuration.defaultActionMessage",{defaultMessage:"'{{context.reason}}'\n\n'{{rule.name}}' is active with the following conditions:\n\n- Service name: '{{context.serviceName}}'\n- Transaction type: '{{context.transactionType}}'\n- Transaction name: '{{context.transactionName}}'\n- Environment: '{{context.environment}}'\n- Latency: '{{context.triggerValue}}' over the last '{{context.interval}}'\n- Threshold: '{{context.threshold}}'ms\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),h=s.i18n.translate("xpack.apm.alertTypes.transactionDuration.defaultRecoveryMessage",{defaultMessage:"Recovered: '{{context.reason}}'\n\n'{{rule.name}}' has recovered.\n\n- Service name: '{{context.serviceName}}'\n- Transaction type: '{{context.transactionType}}'\n- Transaction name: '{{context.transactionName}}'\n- Environment: '{{context.environment}}'\n- Latency: '{{context.triggerValue}}' over the last '{{context.interval}}'\n- Threshold: '{{context.threshold}}'ms\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),v=s.i18n.translate("xpack.apm.alertTypes.transactionErrorRate.defaultActionMessage",{defaultMessage:"'{{context.reason}}'\n\n'{{rule.name}}' is active with the following conditions:\n\n- Service name: '{{context.serviceName}}'\n- Transaction type: '{{context.transactionType}}'\n- Environment: '{{context.environment}}'\n- Failed transaction rate: '{{context.triggerValue}}'% of errors over the last '{{context.interval}}'\n- Threshold: '{{context.threshold}}'%\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),f=s.i18n.translate("xpack.apm.alertTypes.transactionErrorRate.defaultRecoveryMessage",{defaultMessage:"Recovered: '{{context.reason}}'\n\n'{{rule.name}}' has recovered.\n\n- Service name: '{{context.serviceName}}'\n- Transaction type: '{{context.transactionType}}'\n- Environment: '{{context.environment}}'\n- Failed transaction rate: '{{context.triggerValue}}'% of errors over the last '{{context.interval}}'\n- Threshold: '{{context.threshold}}'%\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),y=s.i18n.translate("xpack.apm.alertTypes.transactionDurationAnomaly.defaultActionMessage",{defaultMessage:"'{{context.reason}}'\n\n'{{rule.name}}' is active with the following conditions:\n\n- Service name: '{{context.serviceName}}'\n- Transaction type: '{{context.transactionType}}'\n- Environment: '{{context.environment}}'\n- Severity: '{{context.triggerValue}}'\n- Threshold: '{{context.threshold}}'\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),x=s.i18n.translate("xpack.apm.alertTypes.transactionDurationAnomaly.defaultRecoveryMessage",{defaultMessage:"Recovered: '{{context.reason}}'\n\n'{{rule.name}}' has recovered.\n\n- Service name: '{{context.serviceName}}'\n- Transaction type: '{{context.transactionType}}'\n- Environment: '{{context.environment}}'\n- Severity: '{{context.triggerValue}}'\n- Threshold: '{{context.threshold}}'\n\n[View alert details]('{{context.alertDetailsUrl}}')\n"}),S="service.environment",k="service.name",T="transaction.type";function D(e){const t={errors:{}},r={};return t.errors=r,e.anomalyDetectorTypes&&e.anomalyDetectorTypes.length<1&&(r.anomalyDetectorTypes=s.i18n.translate("xpack.apm.validateAnomalyRule.",{defaultMessage:"At least one detector type is required"})),t}var E=r(20458),A=r(65715),w=r(81319),P=r(20409),O=r(96791);function M(){const{http:e}=(0,P.useKibana)().services,t=null==e?void 0:e.basePath.prepend("/app/apm/tutorial");return(0,O.jsx)(u().Fragment,null,(0,O.jsx)(w.EuiText,null,(0,O.jsx)("p",null,s.i18n.translate("xpack.apm.fleetIntegration.enrollmentFlyout.installApmAgentDescription",{defaultMessage:"After the agent starts, you can install APM agents on your hosts to collect data from your applications and services."}))),(0,O.jsx)(w.EuiSpacer,{size:"m"}),(0,O.jsx)(w.EuiButton,{"data-test-subj":"apmStepComponentInstallApmAgentButton",fill:!0,href:t},s.i18n.translate("xpack.apm.fleetIntegration.enrollmentFlyout.installApmAgentButtonText",{defaultMessage:"Install APM Agent"})))}const R=(0,c.lazy)((async()=>{const{ApmCustomAssetsExtension:e}=await r.e(4791).then(r.bind(r,14791));return{default:e}})),C={id:"apm",title:"APM",description:s.i18n.translate("xpack.apm.apmDescription",{defaultMessage:"Automatically collect in-depth performance metrics and errors from inside your applications."}),icon:"apmApp",path:"/app/apm",showOnHomePage:!1,category:"data"};var j=r(77871),B=r(52715);const I=s.i18n.translate("xpack.apm.navigation.rootTitle",{defaultMessage:"Applications"}),U=s.i18n.translate("xpack.apm.navigation.servicesTitle",{defaultMessage:"Service inventory"}),L=s.i18n.translate("xpack.apm.navigation.serviceGroupsTitle",{defaultMessage:"Service groups"}),$=s.i18n.translate("xpack.apm.navigation.tracesTitle",{defaultMessage:"Traces"}),F=s.i18n.translate("xpack.apm.navigation.serviceMapTitle",{defaultMessage:"Service map"}),N=s.i18n.translate("xpack.apm.navigation.dependenciesTitle",{defaultMessage:"Dependencies"}),V=s.i18n.translate("xpack.apm.navigation.apmSettingsTitle",{defaultMessage:"Settings"}),K=s.i18n.translate("xpack.apm.navigation.apmStorageExplorerTitle",{defaultMessage:"Storage explorer"}),H=s.i18n.translate("xpack.apm.navigation.apmTutorialTitle",{defaultMessage:"Tutorial"});class ApmPlugin{constructor(e){(0,n.default)(this,"telemetry",void 0),(0,n.default)(this,"kibanaVersion",void 0),(0,n.default)(this,"isServerlessEnv",void 0),this.initializerContext=e,this.initializerContext=e,this.telemetry=new B.H0,this.kibanaVersion=e.env.packageInfo.version,this.isServerlessEnv="serverless"===e.env.packageInfo.buildFlavor}setup(e,t){var n,u,w,P,O,M;const R=this.initializerContext.config.get(),B=t,{featureFlags:q}=R;B.home&&B.home.featureCatalogue.register(C),t.observabilityShared.navigation.registerSections((0,l.from)(e.getStartServices()).pipe((0,l.map)((([e,t])=>e.application.capabilities.apm.show?[{label:I,sortKey:400,entries:[{label:U,app:"apm",path:"/services",matchPath:e=>["/service-groups","/mobile-services","/services","/service-map"].some((t=>e.startsWith(t)))},{label:$,app:"apm",path:"/traces"},{label:N,app:"apm",path:"/dependencies/inventory",onClick:()=>{const{usageCollection:e}=t;e&&e.reportUiCounter("apm",o.METRIC_TYPE.CLICK,"side_nav_dependency")}}]}]:[]))));const Q=async()=>{const{fetchObservabilityOverviewPageData:t,getHasData:n}=await Promise.all([r.e(2965),r.e(7559)]).then(r.bind(r,97559)),{fetchSpanLinks:a}=await Promise.all([r.e(2965),r.e(7250)]).then(r.bind(r,47250)),{fetchErrorsByTraceId:s}=await Promise.all([r.e(2965),r.e(8708)]).then(r.bind(r,8708)),{hasFleetApmIntegrations:i}=await Promise.all([r.e(2965),r.e(7584)]).then(r.bind(r,7584)),{createCallApmApi:o}=await r.e(2965).then(r.bind(r,12965));return o(e),{fetchObservabilityOverviewPageData:t,getHasData:n,hasFleetApmIntegrations:i,fetchSpanLinks:a,fetchErrorsByTraceId:s}};this.telemetry.setup({analytics:e.analytics}),null===(n=B.home)||void 0===n||n.tutorials.registerCustomStatusCheck("apm_fleet_server_status_check",(async()=>{const{hasFleetApmIntegrations:e}=await Q();return e()})),null===(u=B.home)||void 0===u||u.tutorials.registerCustomComponent("TutorialFleetInstructions",(()=>r.e(8299).then(r.bind(r,38299)).then((e=>e.TutorialFleetInstructions)))),null===(w=B.home)||void 0===w||w.tutorials.registerCustomComponent("TutorialConfigAgent",(()=>Promise.all([r.e(705),r.e(7141),r.e(7097)]).then(r.bind(r,87785)).then((e=>e.TutorialConfigAgent)))),null===(P=B.home)||void 0===P||P.tutorials.registerCustomComponent("TutorialConfigAgentRumScript",(()=>Promise.all([r.e(705),r.e(7141),r.e(7097),r.e(3402)]).then(r.bind(r,53402)).then((e=>e.TutorialConfigAgentRumScript)))),B.uiActions.registerTrigger({id:i.ObservabilityTriggerId.ApmTransactionContextMenu}),B.uiActions.registerTrigger({id:i.ObservabilityTriggerId.ApmErrorContextMenu}),t.observability.dashboard.register({appName:"apm",hasData:async()=>{const e=await Q();return await e.getHasData()},fetchData:async e=>{const t=await Q();return await t.fetchObservabilityOverviewPageData(e)}}),t.exploratoryView.register({appName:"apm",hasData:async()=>{const e=await Q();return await e.getHasData()},fetchData:async e=>{const t=await Q();return await t.fetchObservabilityOverviewPageData(e)}}),t.discoverShared.features.registry.register({id:"observability-traces-fetch-span-links",fetchSpanLinks:async(e,t)=>{const{fetchSpanLinks:r}=await Q();return r(e,t)}}),t.discoverShared.features.registry.register({id:"observability-traces-fetch-errors",fetchErrorsByTraceId:async(e,t)=>{const{fetchErrorsByTraceId:r}=await Q();return r(e,t)}});const{observabilityRuleTypeRegistry:z}=t.observability,Y=this.telemetry.start(),G={isCloudEnv:!(null===(O=B.cloud)||void 0===O||!O.isCloudEnabled),isServerlessEnv:(null===(M=B.cloud)||void 0===M?void 0:M.isServerlessEnabled)||this.isServerlessEnv,kibanaVersion:this.kibanaVersion};return e.application.register({id:"apm",title:"Applications",order:8300,euiIconType:"logoObservability",appRoute:"/app/apm",icon:"plugins/apm/public/icon.svg",category:a.DEFAULT_APP_CATEGORIES.observability,keywords:["apm"],deepLinks:[{id:"service-groups-list",title:L,path:"/service-groups"},{id:"services",title:U,path:"/services"},{id:"traces",title:$,path:"/traces"},{id:"service-map",title:F,path:"/service-map"},{id:"dependencies",title:N,path:"/dependencies/inventory"},{id:"settings",title:V,path:"/settings"},{id:"storage-explorer",title:K,path:"/storage-explorer",visibleIn:q.storageExplorerAvailable?["globalSearch"]:[]},{id:"tutorial",title:H,path:"/tutorial"}],mount:async t=>{const[{renderApp:n},[a,s]]=await Promise.all([Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(8740),r.e(9634),r.e(705),r.e(2814),r.e(1562),r.e(4523),r.e(5660),r.e(7371),r.e(6547)]).then(r.bind(r,76547)),e.getStartServices()]);return n({coreStart:a,pluginsSetup:B,appMountParameters:t,config:R,kibanaEnvironment:G,pluginsStart:s,observabilityRuleTypeRegistry:z,apmServices:{securityService:a.security,telemetry:Y}})}}),function(e){e.register({id:p.bj.ErrorCount,description:s.i18n.translate("xpack.apm.alertTypes.errorCount.description",{defaultMessage:"Alert when the number of errors in a service exceeds a defined threshold."}),format:({fields:e})=>({reason:e[d.at],link:(0,m.L9)(String(e[k][0]),e[S]&&String(e[S][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRulesErrorCount}`,ruleParamsExpression:(0,c.lazy)((()=>Promise.all([r.e(2965),r.e(2233),r.e(1449),r.e(6394)]).then(r.bind(r,96394)))),validate:()=>({errors:[]}),requiresAppContext:!1,defaultActionMessage:g,defaultRecoveryMessage:_,priority:80}),e.register({id:p.bj.TransactionDuration,description:s.i18n.translate("xpack.apm.alertTypes.transactionDuration.description",{defaultMessage:"Alert when the latency of a specific transaction type in a service exceeds a defined threshold."}),format:({fields:e})=>({reason:e[d.at],link:(0,m.oD)(String(e[k][0]),e[S]&&String(e[S][0]),String(e[T][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRulesTransactionDuration}`,ruleParamsExpression:(0,c.lazy)((()=>Promise.all([r.e(2965),r.e(2233),r.e(1449),r.e(9451)]).then(r.bind(r,39451)))),validate:()=>({errors:[]}),alertDetailsAppSection:(0,c.lazy)((()=>Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(8740),r.e(9634),r.e(2814),r.e(1562),r.e(4853),r.e(4104)]).then(r.bind(r,74104)))),requiresAppContext:!1,defaultActionMessage:b,defaultRecoveryMessage:h,priority:60}),e.register({id:p.bj.TransactionErrorRate,description:s.i18n.translate("xpack.apm.alertTypes.transactionErrorRate.description",{defaultMessage:"Alert when the rate of transaction errors in a service exceeds a defined threshold."}),format:({fields:e})=>({reason:e[d.at],link:(0,m.oD)(String(e[k][0]),e[S]&&String(e[S][0]),String(e[T][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRulesTransactionError}`,ruleParamsExpression:(0,c.lazy)((()=>Promise.all([r.e(2965),r.e(2233),r.e(1449),r.e(9248)]).then(r.bind(r,39248)))),validate:()=>({errors:[]}),requiresAppContext:!1,defaultActionMessage:v,defaultRecoveryMessage:f,priority:70}),e.register({id:p.bj.Anomaly,description:s.i18n.translate("xpack.apm.alertTypes.anomaly.description",{defaultMessage:"Alert when either the latency, throughput, or failed transaction rate of a service is anomalous."}),format:({fields:e})=>({reason:e[d.at],link:(0,m.oD)(String(e[k][0]),e[S]&&String(e[S][0]),String(e[T][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRulesAnomaly}`,ruleParamsExpression:(0,c.lazy)((()=>Promise.all([r.e(2965),r.e(1449),r.e(3728)]).then(r.bind(r,57359)))),validate:D,requiresAppContext:!1,defaultActionMessage:y,defaultRecoveryMessage:x,priority:90})}(z),async function(e){const t=e.coreSetup,n=e.pluginsSetup,[a,s]=await t.getStartServices(),i=n.embeddable.registerReactEmbeddableFactory;i(E.g2,(async()=>{const{getApmAlertingLatencyChartEmbeddableFactory:t}=await Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(8740),r.e(9634),r.e(2814),r.e(1562),r.e(6662),r.e(4853),r.e(6372)]).then(r.bind(r,36372));return t({...e,coreStart:a,pluginsStart:s})})),i(E.QX,(async()=>{const{getApmAlertingThroughputChartEmbeddableFactory:t}=await Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(8740),r.e(9634),r.e(6662),r.e(5082)]).then(r.bind(r,5082));return t({...e,coreStart:a,pluginsStart:s})})),i(E.LD,(async()=>{const{getApmAlertingFailedTransactionsChartEmbeddableFactory:t}=await Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(8740),r.e(9634),r.e(2814),r.e(6662),r.e(7739)]).then(r.bind(r,97739));return t({...e,coreStart:a,pluginsStart:s})})),i(A.e,(async()=>{const{getApmTraceWaterfallEmbeddableFactory:t}=await Promise.all([r.e(2965),r.e(8740),r.e(6662),r.e(4523),r.e(424)]).then(r.bind(r,42440));return t({...e,coreStart:a,pluginsStart:s})}))}({coreSetup:e,pluginsSetup:t,config:R,kibanaEnvironment:G,observabilityRuleTypeRegistry:z}),{locator:t.share.url.locators.create(new j.d(e.uiSettings))}}start(e,t){var n;const{fleet:a}=t;if(null===(n=t.observabilityAIAssistant)||void 0===n||n.service.register((async({registerRenderFunction:e})=>{(await Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(6499)]).then(r.bind(r,6499))).registerAssistantFunctions({registerRenderFunction:e})})),a){const e={title:s.i18n.translate("xpack.apm.fleetIntegration.enrollmentFlyout.installApmAgentTitle",{defaultMessage:"Install APM Agent"}),Component:M};a.registerExtension({package:"apm",view:"agent-enrollment-flyout",title:e.title,Component:e.Component}),a.registerExtension({package:"apm",view:"package-detail-assets",Component:R}),a.registerExtension({package:"apm",view:"package-policy-create",Component:(0,c.lazy)((async()=>{const{CreateAPMPolicyForm:e}=await Promise.all([r.e(9967),r.e(3953)]).then(r.bind(r,83953));return{default:e}}))}),a.registerExtension({package:"apm",view:"package-policy-edit",useLatestPackageVersion:!0,Component:(0,c.lazy)((async()=>{const{EditAPMPolicyForm:e}=await Promise.all([r.e(9967),r.e(2765)]).then(r.bind(r,82765));return{default:e}}))}),a.registerExtension({package:"apm",view:"package-policy-edit-tabs",tabs:[{title:"APM Agents",Component:(0,c.lazy)((async()=>{const{ApmAgents:e}=await Promise.all([r.e(2965),r.e(705),r.e(7141),r.e(5660),r.e(6457)]).then(r.bind(r,91287));return{default:e}}))}]})}}}const q=e=>new ApmPlugin(e)},77871:(e,t,r)=>{"use strict";r.d(t,{I:()=>o,d:()=>APMServiceDetailLocator});var n=r(68915),a=r(14627),s=r(25170),i=r(3489);const o="APM_LOCATOR";class APMServiceDetailLocator{constructor(e){(0,n.default)(this,"id",o),(0,n.default)(this,"uiSettings",void 0),this.uiSettings=e}async getLocation(e){const{getPathForServiceDetail:t}=await Promise.all([r.e(2965),r.e(2233),r.e(4988),r.e(8740),r.e(9634),r.e(705),r.e(2814),r.e(1562),r.e(4523),r.e(5660),r.e(7371),r.e(302)]).then(r.bind(r,40302));return{app:"apm",path:t(e,{...this.uiSettings.get(a.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),isComparisonEnabledByDefault:this.uiSettings.get(s.enableComparisonByDefault),defaultEnvironment:this.uiSettings.get(s.defaultApmServiceEnvironment,i._x.value)}),state:{}}}}},52715:(e,t,r)=>{"use strict";r.d(t,{A6:()=>a,H0:()=>TelemetryService});var n=r(68915);let a=function(e){return e.Submit="submit",e.Refresh="refresh",e}({}),s=function(e){return e.SEARCH_QUERY_SUBMITTED="Search Query Submitted",e}({});class TelemetryClient{constructor(e){(0,n.default)(this,"reportSearchQuerySubmitted",(({kueryFields:e,timerange:t,action:r})=>{this.analytics.reportEvent(s.SEARCH_QUERY_SUBMITTED,{kueryFields:e,timerange:t,action:r})})),this.analytics=e}}const i=[{eventType:s.SEARCH_QUERY_SUBMITTED,schema:{kueryFields:{type:"array",items:{type:"text",_meta:{description:"The kuery fields used in the search"}}},timerange:{type:"text",_meta:{description:"The timerange of the search"}},action:{type:"keyword",_meta:{description:"The action performed (e.g., submit, refresh)"}}}}];class TelemetryService{constructor(e=null){this.analytics=e}setup({analytics:e}){this.analytics=e,i.forEach((t=>e.registerEventType(t)))}start(){if(!this.analytics)throw new Error("The TelemetryService.setup() method has not been invoked, be sure to call it during the plugin setup.");return new TelemetryClient(this.analytics)}}},46238:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,n,a){r=r||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var i=/\+/g;e=e.split(r);var o=1e3;a&&"number"==typeof a.maxKeys&&(o=a.maxKeys);var l=e.length;o>0&&l>o&&(l=o);for(var c=0;c<l;++c){var u,p,d,m,g=e[c].replace(i,"%20"),_=g.indexOf(n);_>=0?(u=g.substr(0,_),p=g.substr(_+1)):(u=g,p=""),d=decodeURIComponent(u),m=decodeURIComponent(p),t(s,d)?Array.isArray(s[d])?s[d].push(m):s[d]=[s[d],m]:s[d]=m}return s}},79442:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,r,n,a){return r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(a){var s=encodeURIComponent(t(a))+n;return Array.isArray(e[a])?e[a].map((function(e){return s+encodeURIComponent(t(e))})).join(r):s+encodeURIComponent(t(e[a]))})).join(r):a?encodeURIComponent(t(a))+n+encodeURIComponent(t(e)):""}},50306:(e,t,r)=>{"use strict";r(46238),t.stringify=r(79442)},15327:(e,t,r)=>{r.p=window.__kbnPublicPath__.apm},82677:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/controls/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},64390:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},73961:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/dashboard/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7195:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},14627:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},67546:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},37634:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/exploratoryView/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},59589:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/fleet/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},52137:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},20409:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},61215:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},66764:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/logsShared/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},9130:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/maps/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},61474:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/metricsDataAccess/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},51808:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/ml/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},60636:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/ml/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},25170:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/observability/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},33838:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/observability/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},73780:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/observabilityShared/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},16808:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/observabilityShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},52713:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/savedSearch/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},13073:(e,t,r)=>{r.r(t);var n=__kbnBundles__.get("plugin/triggersActionsUi/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},68915:(e,t,r)=>{e.exports=r(52497)(67493)},65927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},43059:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},81319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},26752:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticNumeral},96791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},21639:e=>{"use strict";e.exports=__kbnSharedDeps__.FpTs.either},81455:e=>{"use strict";e.exports=__kbnSharedDeps__.FpTs.option},66730:e=>{"use strict";e.exports=__kbnSharedDeps__.FpTs.pipeable},43782:e=>{"use strict";e.exports=__kbnSharedDeps__.IoTs},32300:e=>{"use strict";e.exports=__kbnSharedDeps__.IoTsPathReporter},66744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},9424:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},76494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},21192:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEbtTools},55964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},91991:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsqlAst},75008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},75879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},30911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},20482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},43999:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextTheme},45804:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaMount},45995:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnRison},11728:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},30193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},53803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},30770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},51783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},62488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},84286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},22874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},13530:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactQuery},61747:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouter},1493:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouterDom},16524:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useAsync},18672:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useEffectOnce},57064:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useLocalStorage},29985:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useMount},60288:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useToggle},80190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},95079:e=>{"use strict";e.exports=__kbnSharedDeps__.SaferLodashSet},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},9472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},52497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=n,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var a=Object.create(null);s.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,s.d(a,i),a},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>"apm.chunk."+e+".js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},s.l=(e,t,n,a)=>{if(r[e])r[e].push(t);else{var i,o;if(void 0!==n)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e){i=u;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=e),r[e]=[t];var p=(t,n)=>{i.onerror=i.onload=null,clearTimeout(d);var a=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),o&&document.head.appendChild(i)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={6785:0};s.f.j=(t,r)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise(((r,a)=>n=e[t]=[r,a]));r.push(n[2]=a);var i=s.p+s.u(t),o=new Error;s.l(i,(r=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,a,[i,o,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);l&&l(s)}for(t&&t(r);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.apm_bundle_jsonpfunction=self.apm_bundle_jsonpfunction||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),s(15327),__kbnBundles__.define("plugin/apm/public",s,99876)})();