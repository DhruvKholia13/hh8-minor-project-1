/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t,a,n={1403:(e,t,a)=>{"use strict";a.d(t,{Rh:()=>n,w5:()=>s});const n="DISCOVER_ESQL_LOCATOR",s="LENS_APP_LOCATOR"},4479:(e,t,a)=>{"use strict";a.d(t,{SW:()=>n});const n=e=>Boolean(e&&void 0!==(null==e?void 0:e.esqlVariables$))},3778:(e,t,a)=>{"use strict";a.d(t,{O:()=>n});const n="enableESQL"},4331:(e,t,a)=>{"use strict";a.d(t,{a:()=>i,V:()=>r});const n="esql";var s=a(3142);async function i(e,t,i){var r,o,l;const u=(0,s.Pp)(e),c=(0,s.s3)(e),d=await async function(e){if(crypto.subtle){const t=new TextEncoder,a=await crypto.subtle.digest("SHA-256",t.encode(e));return Array.from(new Uint8Array(a)).map((e=>e.toString(16).padStart(2,"0"))).join("")}{const{sha256:t}=await a.e(525).then(a.bind(a,3525));return t(e)}}(`esql-${c}`);null!=i&&i.createNewInstanceEvenIfCachedOneAvailable&&t.clearInstanceCache(d);const p=await t.create({title:c,type:n,id:d,allowNoIndex:null==i?void 0:i.allowNoIndex});return p.timeFieldName=u,!u&&c&&"date"===(null==p||null===(r=p.fields)||void 0===r||null===(o=r.getByName)||void 0===o||null===(l=o.call(r,"@timestamp"))||void 0===l?void 0:l.type)&&(p.timeFieldName="@timestamp"),p}async function r(e){var t;const a=(await e.dataViews.getIndices({showAllIndices:!1,pattern:"*",isRollupIndex:()=>!1})).filter((e=>!e.name.startsWith("."))).map((e=>e.name));let n=a[0];return a.length>0&&a.find((e=>e.startsWith("logs")))&&(n="logs*"),null!==(t=n)&&void 0!==t?t:null}},3142:(e,t,a)=>{"use strict";a.d(t,{PC:()=>r,s3:()=>s,Pp:()=>i,kA:()=>o});const n=__kbnSharedDeps__.KbnEsqlAst;function s(e){var t;const{ast:a}=(0,n.parse)(e),s=a.find((({name:e})=>["from","ts"].includes(e))),i=(null!==(t=null==s?void 0:s.args)&&void 0!==t?t:[]).filter((e=>"index"===e.sourceType));return null==i?void 0:i.map((e=>e.name)).join(",")}a(4479);const i=e=>{const{ast:t}=(0,n.parse)(e),a=[];(0,n.walk)(t,{visitFunction:e=>a.push(e)});const s=n.Walker.params(t).find((e=>"_tstart"===e.value||"_tend"===e.value));if(!s||!a.length)return;const i=a.filter((({location:e})=>e.min<=s.location.min&&e.max>=s.location.max));if(!i.length)return;let r;return i[i.length-1].args.some((e=>{const t=e;return"column"===t.type?(r=t.name,!0):"inlineCast"===t.type&&"column"===t.value.type&&(r=t.value.name,!0)})),r},r=e=>{const{root:t}=(0,n.parse)(e);return n.Walker.params(t).map((e=>e.text.replace(/^\?+/,"")))},o=(e,t,a)=>{if(!t.length)return a;const n=r(e),s=new Set(n);return a.map((e=>{if(t.some((t=>t.value===e.id))){var a;const n=t.filter((t=>t.value===e.id)),i=n.find((e=>s.has(e.key)));e.variable=null!==(a=null==i?void 0:i.key)&&void 0!==a?a:""}})),a}},7534:(e,t,a)=>{"use strict";a.d(t,{E4:()=>u,G8:()=>d,dI:()=>c});var n=a(5008),s=a(6494),i=a.n(s),r=a(3304),o=a(190);const l=(e,t,a)=>{const n=((e,t)=>{const a=/\?_tstart/i.test(e),n=/\?_tend/i.test(e);if(t&&(a||n)){var s,r;const e={start:a?null===(s=i().parse(t.from))||void 0===s?void 0:s.toISOString():void 0,end:n?null===(r=i().parse(t.to,{roundUp:!0}))||void 0===r?void 0:r.toISOString():void 0},o=[];return null!=e&&e.start&&o.push({_tstart:e.start}),null!=e&&e.end&&o.push({_tend:e.end}),o}return[]})(e,t);return null!=a&&a.length&&(null==a||a.forEach((({key:e,value:t})=>{n.push({[e]:t})}))),n};function u(e){return e.map((({name:e,type:t})=>({id:e,name:e,meta:{type:(0,r.s0)(t),esType:t}})))}async function c({esqlQuery:e,search:t,signal:a,timeRange:s,variables:i}){try{var r;const c=await async function({esqlQuery:e,search:t,signal:a,timeRange:s,variables:i}){try{var r;const n=l(e,s,i);return null!==(r=(await(0,o.lastValueFrom)(t({params:{query:`${e} | limit 0`,...n.length?{params:n}:{}}},{abortSignal:a,strategy:"esql_async"}))).rawResponse.columns)&&void 0!==r?r:[]}catch(e){throw new Error(n.i18n.translate("esqlUtils.columnsErrorMsg",{defaultMessage:"Unable to load columns. {errorMessage}",values:{errorMessage:e.message}}))}}({esqlQuery:e,search:t,signal:a,timeRange:s,variables:i});return null!==(r=u(c))&&void 0!==r?r:[]}catch(e){throw new Error(n.i18n.translate("esqlUtils.columnsErrorMsg",{defaultMessage:"Unable to load columns. {errorMessage}",values:{errorMessage:e.message}}))}}async function d({esqlQuery:e,search:t,signal:a,filter:n,dropNullColumns:s,timeRange:i,variables:r}){const u=l(e,i,r),c=await(0,o.lastValueFrom)(t({params:{...n?{filter:n}:{},query:e,...s?{dropNullColumns:!0}:{},...u.length?{params:u}:{}}},{abortSignal:a,strategy:"esql_async"}));return{response:c.rawResponse,params:c.requestParams}}},3304:(e,t,a)=>{"use strict";a.d(t,{_c:()=>s,fM:()=>i,s0:()=>u});var n=a(8915);let s=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),i=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class KbnFieldType{constructor(e={}){(0,n.default)(this,"name",void 0),(0,n.default)(this,"sortable",void 0),(0,n.default)(this,"filterable",void 0),(0,n.default)(this,"esTypes",void 0),this.name=e.name||i.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}const r=new KbnFieldType({name:i.UNKNOWN}),o=[new KbnFieldType({name:i.STRING,sortable:!0,filterable:!0,esTypes:[s.STRING,s.TEXT,s.MATCH_ONLY_TEXT,s.KEYWORD,s.VERSION,s._TYPE,s._ID]}),new KbnFieldType({name:i.NUMBER,sortable:!0,filterable:!0,esTypes:[s.FLOAT,s.HALF_FLOAT,s.SCALED_FLOAT,s.DOUBLE,s.INTEGER,s.LONG,s.UNSIGNED_LONG,s.SHORT,s.BYTE,s.TOKEN_COUNT,s.AGGREGATE_METRIC_DOUBLE]}),new KbnFieldType({name:i.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[s.FLOAT_RANGE,s.DOUBLE_RANGE,s.INTEGER_RANGE,s.LONG_RANGE]}),new KbnFieldType({name:i.DATE,sortable:!0,filterable:!0,esTypes:[s.DATE,s.DATE_NANOS]}),new KbnFieldType({name:i.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[s.DATE_RANGE]}),new KbnFieldType({name:i.IP,sortable:!0,filterable:!0,esTypes:[s.IP]}),new KbnFieldType({name:i.IP_RANGE,sortable:!0,filterable:!0,esTypes:[s.IP_RANGE]}),new KbnFieldType({name:i.BOOLEAN,sortable:!0,filterable:!0,esTypes:[s.BOOLEAN]}),new KbnFieldType({name:i.OBJECT,esTypes:[s.OBJECT]}),new KbnFieldType({name:i.NESTED,esTypes:[s.NESTED]}),new KbnFieldType({name:i.GEO_POINT,esTypes:[s.GEO_POINT]}),new KbnFieldType({name:i.GEO_SHAPE,esTypes:[s.GEO_SHAPE]}),new KbnFieldType({name:i.ATTACHMENT,esTypes:[s.ATTACHMENT]}),new KbnFieldType({name:i.MURMUR3,esTypes:[s.MURMUR3]}),new KbnFieldType({name:i._SOURCE,esTypes:[s._SOURCE]}),new KbnFieldType({name:i.HISTOGRAM,filterable:!0,esTypes:[s.HISTOGRAM]}),new KbnFieldType({name:i.CONFLICT}),r],l=e=>{const t=o.find((t=>t.esTypes.includes(e)));return t&&t.name?t.name:i.UNKNOWN};function u(e){if(e.startsWith("counter_"))return i.NUMBER;switch(e){case s._INDEX:return i.STRING;case"_version":return i.NUMBER;case"datetime":return i.DATE;default:return l(e)}}},6536:(e,t,a)=>{"use strict";a.d(t,{u:()=>s});var n=a(5008);const s=({filters:e,query:t,suggestion:a,dataView:s})=>{var i;const r=Object.assign({},null==a?void 0:a.datasourceState),o=Object.assign({},null==a?void 0:a.visualizationState),l=a&&a.datasourceState?{[a.datasourceId]:{...r}}:{formBased:{}},u=o;return{title:null!==(i=null==a?void 0:a.title)&&void 0!==i?i:n.i18n.translate("visualizationUtils.config.suggestion.title",{defaultMessage:"New suggestion"}),references:[],state:{datasourceStates:l,filters:e,query:t,visualization:u,...s&&s.id&&!s.isPersisted()&&{adHocDataViews:{[s.id]:s.toMinimalSpec()}}},visualizationType:a?a.visualizationId:"lnsXY",version:1}}},662:(e,t,a)=>{"use strict";a.d(t,{HQ:()=>l,YN:()=>u,cH:()=>c,yW:()=>d});var n=a(5964),s=a(4513),i=a.n(s),r=a(4286),o=a(190);const l=e=>Boolean(e&&void 0!==(null==e?void 0:e.timeslice$)),u=e=>Boolean(e&&void 0!==(null==e?void 0:e.timeRange$)),c=e=>Boolean(e&&u(e)&&(e=>Boolean(e&&void 0!==(null==e?void 0:e.filters$)))(e)&&void 0!==(null==e?void 0:e.query$));function d({filters:e,query:t,timeRange:a}){const s=(0,r.useMemo)((()=>({filters$:new o.BehaviorSubject(e),query$:new o.BehaviorSubject(t),timeRange$:new o.BehaviorSubject(a)})),[]);return(0,r.useEffect)((()=>{(0,n.onlyDisabledFiltersChanged)(s.filters$.getValue(),e,{...n.COMPARE_ALL_OPTIONS,state:!1})||s.filters$.next(e)}),[e,s.filters$]),(0,r.useEffect)((()=>{i()(s.query$.getValue(),t)||s.query$.next(t)}),[t,s.query$]),(0,r.useEffect)((()=>{i()(s.timeRange$.getValue(),a)||s.timeRange$.next(a)}),[a,s.timeRange$]),s}},6578:(e,t,a)=>{"use strict";a.d(t,{X:()=>n});const n=e=>Boolean(e&&void 0!==(null==e?void 0:e.parentApi))},8357:(e,t,a)=>{"use strict";a.d(t,{m:()=>n});const n=(e,t)=>Boolean(e&&e.type)&&e.type===t},3934:(e,t,a)=>{"use strict";function n(e){var t,a,n;return null!==(t=null===(a=e.title$)||void 0===a?void 0:a.value)&&void 0!==t?t:null===(n=e.defaultTitle$)||void 0===n?void 0:n.value}a.d(t,{LK:()=>n,Qr:()=>s});const s=e=>Boolean(e&&void 0!==(null==e?void 0:e.title$)&&void 0!==(null==e?void 0:e.hideTitle$))},280:(e,t,a)=>{"use strict";a.d(t,{S:()=>n,r:()=>s});const n="savedObjectRef";function s(e,t){return t?t.find((t=>e===t.type&&t.name===n)):void 0}},5203:(e,t,a)=>{"use strict";a.r(t),a.d(t,{APP_ID:()=>u,BASE_API_URL:()=>g,COLOR_MAPPING_OFF_BY_DEFAULT:()=>C,CategoryDisplay:()=>O,DOCUMENT_FIELD_NAME:()=>D,DOC_TYPE:()=>c,INDEX_PATTERN_TYPE:()=>A,LENS_API_ACCESS:()=>E,LENS_API_CONTENT_MANAGEMENT_VERSION:()=>m,LENS_API_PATH:()=>y,LENS_API_VERSION:()=>v,LENS_APP_NAME:()=>d,LENS_CONTENT_TYPE:()=>o,LENS_EDIT_BY_VALUE:()=>b,LENS_EMBEDDABLE_TYPE:()=>p,LENS_ICON:()=>h,LENS_ITEM_LATEST_VERSION:()=>r,LENS_ITEM_VERSION_V1:()=>i,LENS_VIS_API_PATH:()=>T,LegendDisplay:()=>N,NOT_INTERNATIONALIZED_PRODUCT_NAME:()=>_,NumberDisplay:()=>w,PLUGIN_ID:()=>l,PieChartTypes:()=>S,STAGE_ID:()=>f,getBasePath:()=>I,getEditPath:()=>L,getFullPath:()=>R});var n=a(5995),s=a.n(n);const i=1,r=i,o="lens",l="lens",u=l,c="lens",d=l,p=c,_="Lens Visualizations",g="/api/lens",b="edit_by_value",h="lensApp",f="production",m=i,v="1",E="internal",y="/api/lens",T=`${y}/visualizations`,A="index-pattern",S={PIE:"pie",DONUT:"donut",TREEMAP:"treemap",MOSAIC:"mosaic",WAFFLE:"waffle"},O={DEFAULT:"default",INSIDE:"inside",HIDE:"hide"},w={HIDDEN:"hidden",PERCENT:"percent",VALUE:"value"},N={DEFAULT:"default",SHOW:"show",HIDE:"hide"},D="___records___";function I(){return"#/"}const P="_g";function L(e,t,a,n){const i={};t&&(i.time=t),a&&(i.filters=a),n&&(i.refreshInterval=n);const r=Object.keys(i).length?`?${P}=${s().encode(i)}`:"";return e?`#/edit/${encodeURIComponent(e)}${r}`:`#/${b}${r}`}function R(e){return`/app/${l}${e?L(e):"#/"}`}const C=!1},9223:(e,t,a)=>{"use strict";a.d(t,{a:()=>s});var n=a(5008);const s={name:"lens_collapse",type:"datatable",inputTypes:["datatable"],help:n.i18n.translate("xpack.lens.functions.collapse.help",{defaultMessage:"Collapses multiple rows into a single row using the specified aggregate function."}),args:{by:{help:n.i18n.translate("xpack.lens.functions.collapse.args.byHelpText",{defaultMessage:"Columns to group by - these columns are kept as-is"}),multi:!0,types:["string"],required:!1},metric:{help:n.i18n.translate("xpack.lens.functions.collapse.args.metricHelpText",{defaultMessage:"Column to calculate the specified aggregate function of"}),types:["string"],multi:!0,required:!1},fn:{help:n.i18n.translate("xpack.lens.functions.collapse.args.fnHelpText",{defaultMessage:"The aggregate function to apply"}),types:["string"],multi:!0,required:!0}},async fn(...e){const{collapseFn:t}=await a.e(865).then(a.bind(a,6865));return t(...e)}}},5839:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var n=a(5008);const s={name:"lens_counter_rate",type:"datatable",inputTypes:["datatable"],help:n.i18n.translate("xpack.lens.functions.counterRate.help",{defaultMessage:"Calculates the counter rate of a column in a data table"}),args:{by:{help:n.i18n.translate("xpack.lens.functions.counterRate.args.byHelpText",{defaultMessage:"Column to split the counter rate calculation by"}),multi:!0,types:["string"],required:!1},inputColumnId:{help:n.i18n.translate("xpack.lens.functions.counterRate.args.inputColumnIdHelpText",{defaultMessage:"Column to calculate the counter rate of"}),types:["string"],required:!0},outputColumnId:{help:n.i18n.translate("xpack.lens.functions.counterRate.args.outputColumnIdHelpText",{defaultMessage:"Column to store the resulting counter rate in"}),types:["string"],required:!0},outputColumnName:{help:n.i18n.translate("xpack.lens.functions.counterRate.args.outputColumnNameHelpText",{defaultMessage:"Name of the column to store the resulting counter rate in"}),types:["string"],required:!1}},async fn(...e){const{counterRateFn:t}=await a.e(865).then(a.bind(a,6865));return t(...e)}}},1128:(e,t,a)=>{"use strict";a.d(t,{H:()=>s,b:()=>i});var n=a(5008);const s={Default:"default",Transpose:"transpose"},i=e=>({name:"lens_datatable",type:"render",inputTypes:["datatable"],help:n.i18n.translate("xpack.lens.datatable.expressionHelpLabel",{defaultMessage:"Datatable renderer"}),args:{title:{types:["string"],help:n.i18n.translate("xpack.lens.datatable.titleLabel",{defaultMessage:"Title"})},description:{types:["string"],help:""},columns:{types:["lens_datatable_column"],help:"",multi:!0},sortingColumnId:{types:["string"],help:""},sortingDirection:{types:["string"],help:""},fitRowToContent:{types:["boolean"],help:""},rowHeightLines:{types:["number"],help:""},headerRowHeight:{types:["string"],help:""},headerRowHeightLines:{types:["number"],help:""},pageSize:{types:["number"],help:""},density:{types:["string"],help:""}},async fn(...t){const{datatableFn:n}=await a.e(865).then(a.bind(a,6865));return n(e)(...t)}})},214:(e,t,a)=>{"use strict";a.d(t,{q:()=>n});const n={name:"lens_format_column",type:"datatable",help:"",args:{format:{types:["string"],help:"",required:!0},columnId:{types:["string"],help:"",required:!0},decimals:{types:["number"],help:""},suffix:{types:["string"],help:""},parentFormat:{types:["string"],help:""},compact:{types:["boolean"],help:""},pattern:{types:["string"],help:""},fromUnit:{types:["string"],help:""},toUnit:{types:["string"],help:""}},inputTypes:["datatable"],async fn(...e){const{formatColumnFn:t}=await a.e(865).then(a.bind(a,6865));return t(...e)}}},9309:(e,t,a)=>{"use strict";a.d(t,{kd:()=>u,Tq:()=>c,P$:()=>l});var n=a(7195),s=a(1783),i=a.n(s),r=a(5008);const o=(e,t)=>{if(!e)return 0;const a=(0,n.getAbsoluteTimeRange)(e,null!=t?{forceNow:new Date(t)}:{});return e?i()(a.to).diff(i()(a.from)):0},l={name:"formula_time_range",help:r.i18n.translate("xpack.lens.formula.timeRange.help",{defaultMessage:"The specified time range, in milliseconds (ms)."}),args:{},fn(e,t,{getSearchContext:a}){const{timeRange:n,now:s}=a();return o(n,s)}},u={name:"formula_interval",help:r.i18n.translate("xpack.lens.formula.interval.help",{defaultMessage:"The specified minimum interval for the date histogram, in milliseconds (ms)."}),args:{targetBars:{types:["number"],help:r.i18n.translate("xpack.lens.formula.interval.targetBars.help",{defaultMessage:"The target number of bars for the date histogram."})}},fn(e,t,{getSearchContext:a}){const{timeRange:s,now:i}=a();return s&&t.targetBars?(0,n.calcAutoIntervalNear)(t.targetBars,o(s,i)).asMilliseconds():0}},c={name:"formula_now",help:r.i18n.translate("xpack.lens.formula.now.help",{defaultMessage:"The current now moment used in Kibana expressed in milliseconds (ms)."}),args:{},fn(e,t,{getSearchContext:a}){var n;return null!==(n=a().now)&&void 0!==n?n:Date.now()}}},6962:(e,t,a)=>{"use strict";a.d(t,{J:()=>s});var n=a(5008);const s={name:"lens_map_to_columns",type:"datatable",help:n.i18n.translate("xpack.lens.functions.mapToColumns.help",{defaultMessage:"A helper to transform a datatable to match Lens column definitions"}),args:{idMap:{types:["string"],help:n.i18n.translate("xpack.lens.functions.mapToColumns.idMap.help",{defaultMessage:"A JSON encoded object in which keys are the datatable column ids and values are the Lens column definitions. Any datatable columns not mentioned within the ID map will be kept unmapped."})},isTextBased:{types:["boolean"],help:n.i18n.translate("xpack.lens.functions.mapToColumns.isESQL.help",{defaultMessage:"An optional flag to indicate if this is about the text based datasource."})}},inputTypes:["datatable"],async fn(...e){var t;const{mapToOriginalColumns:n,mapToOriginalColumnsTextBased:s}=await a.e(865).then(a.bind(a,6865));return null!=e&&null!==(t=e[1])&&void 0!==t&&t.isTextBased?s(...e):n(...e)}}},815:(e,t,a)=>{"use strict";a.d(t,{T:()=>s});const n="lens_datatable_column",s={name:n,aliases:[],type:n,help:"",inputTypes:["null"],args:{columnId:{types:["string"],help:""},alignment:{types:["string"],help:""},sortingHint:{types:["string"],help:""},hidden:{types:["boolean"],help:""},oneClickFilter:{types:["boolean"],help:""},width:{types:["number"],help:""},isTransposed:{types:["boolean"],help:""},transposable:{types:["boolean"],help:""},colorMode:{types:["string"],help:""},palette:{types:["palette"],help:""},colorMapping:{types:["string"],help:""},summaryRow:{types:["string"],help:""},summaryLabel:{types:["string"],help:""}},fn:function(e,t){return{type:n,...t}}}},2601:(e,t,a)=>{"use strict";a.d(t,{v:()=>n});const n={DATA:"data",REFERENCELINE:"referenceLine",ANNOTATIONS:"annotations",METRIC_TRENDLINE:"metricTrendline"}},4077:(e,t,a)=>{"use strict";a.d(t,{U:()=>o,Z:()=>LensAppLocatorDefinition});var n=a(8915),s=a(5995),i=a.n(s),r=a(1403);const o="LENS_SHARE_STATE_ACTION";class LensAppLocatorDefinition{constructor(){(0,n.default)(this,"id",r.w5),(0,n.default)(this,"getLocation",(async e=>{const{filters:t,query:n,savedObjectId:s,resolvedDateRange:r,searchSessionId:l}=e,u=function(e){if(e.savedObjectId)return{};if(!(e.activeDatasourceId&&e.datasourceStates&&e.visualization&&e.references))return{};const t={activeDatasourceId:e.activeDatasourceId,visualization:e.visualization,datasourceStates:Object.fromEntries(Object.entries(e.datasourceStates).map((([e,{state:t}])=>[e,t]))),references:e.references};return e.dataViewSpecs&&(t.dataViewSpecs=e.dataViewSpecs),t}(e),c={},{isFilterPinned:d}=await Promise.resolve().then(a.t.bind(a,5964,23));n&&(u.query=n),r&&(u.resolvedDateRange=r,c.time={from:r.fromDate,to:r.toDate}),null!=t&&t.length&&(u.filters=t,c.filters=null==t?void 0:t.filter((e=>!d(e))));const p=s?`/edit/${encodeURIComponent(s)}`:"",_=`${window.location.origin}${window.location.pathname}`,g=new URL(_);return g.hash=p,g.searchParams.append("_g",i().encodeUnknown(c)||""),l&&(u.searchSessionId=l),{app:"lens",path:g.href.replace(_,""),state:{type:o,payload:u}}}))}}},8209:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LENS_EMBEDDABLE_TYPE:()=>c.LENS_EMBEDDABLE_TYPE,isLensApi:()=>$.$C,layerTypes:()=>q.v,plugin:()=>H});var n=a(8915),s=a(1215),i=a(7546),r=a(2500),o=a(4839),l=a(5008),u=a(4390),c=a(5203),d=a(9326),p=a(2631);const _={id:p.Eu,title:l.i18n.translate("xpack.lens.inAppEditTrigger.title",{defaultMessage:"In-app embeddable edit"}),description:l.i18n.translate("xpack.lens.inAppEditTrigger.description",{defaultMessage:"Triggers an in app flyout on the current embeddable"})};var g=a(3185),b=a(4286),h=a.n(b),f=a(1319),m=a(6791);const v=h().lazy((()=>a.e(921).then(a.bind(a,5691))));function E(){return(0,m.jsx)(f.EuiOverlayMask,null,(0,m.jsx)(f.EuiLoadingSpinner,null))}const y=e=>(0,m.jsx)(b.Suspense,{fallback:(0,m.jsx)(E,null)},(0,m.jsx)(v,e));function T(e,t){return n=>{const[s,i]=(0,b.useState)();return(0,b.useEffect)((()=>{!async function(){const{getLensServices:n,getLensAttributeService:s}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840)),r=await n(e,t,s(e.http));i(r)}()}),[]),s?(0,m.jsx)(f.EuiOverlayMask,null,(0,m.jsx)(y,(0,g.default)({},n,{lensServices:s}))):(0,m.jsx)(E,null)}}var A=a(1128),S=a(815),O=a(6962),w=a(214),N=a(5839);const D=(...e)=>({name:"lens_time_scale",type:"datatable",help:"",args:{dateColumnId:{types:["string"],help:""},inputColumnId:{types:["string"],help:"",required:!0},outputColumnId:{types:["string"],help:"",required:!0},outputColumnName:{types:["string"],help:""},targetUnit:{types:["string"],options:["s","m","h","d"],help:"",required:!0},reducedTimeRange:{types:["string"],help:""}},inputTypes:["datatable"],async fn(...t){const{timeScaleFn:n}=await a.e(865).then(a.bind(a,6865));return n(...e)(...t)}});var I=a(9223),P=a(9309),L=a(4627),R=a(8357);const C=async()=>await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));class OpenInDiscoverDrilldown{constructor(e){(0,n.default)(this,"id","OPEN_IN_DISCOVER_DRILLDOWN"),(0,n.default)(this,"order",8),(0,n.default)(this,"getDisplayName",(()=>l.i18n.translate("xpack.lens.app.exploreDataInDiscoverDrilldown",{defaultMessage:"Open in Discover"}))),(0,n.default)(this,"euiIcon","discoverApp"),(0,n.default)(this,"ReactCollectConfig",(({config:e,onConfig:t})=>(0,m.jsx)(f.EuiFormRow,{hasChildLabel:!1},(0,m.jsx)(f.EuiSwitch,{id:"openInNewTab",name:"openInNewTab",label:l.i18n.translate("xpack.lens.app.exploreDataInDiscoverDrilldown.newTabConfig",{defaultMessage:"Open in new tab"}),checked:e.openInNewTab,onChange:()=>t({...e,openInNewTab:!e.openInNewTab}),"data-test-subj":"openInDiscoverDrilldownOpenInNewTab"})))),(0,n.default)(this,"CollectConfig",this.ReactCollectConfig),(0,n.default)(this,"createConfig",(()=>({openInNewTab:!0}))),(0,n.default)(this,"isConfigValid",(e=>!0)),(0,n.default)(this,"isCompatible",(async(e,t)=>{const{isCompatible:a}=await C();return a({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable,...e})})),(0,n.default)(this,"isConfigurable",(e=>this.deps.hasDiscoverAccess()&&(0,R.m)(e.embeddable,c.DOC_TYPE))),(0,n.default)(this,"getHref",(async(e,t)=>{const{getHref:a}=await C();return a({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable})})),(0,n.default)(this,"execute",(async(e,t)=>{if(e.openInNewTab)window.open(await this.getHref(e,t),"_blank");else{const{getLocation:e}=await C(),{app:a,path:n,state:s}=await e({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable});await this.deps.application().navigateToApp(a,{path:n,state:s})}})),this.deps=e}supportedTriggers(){return[L.APPLY_FILTER_TRIGGER]}}var x=a(4077),M=a(662),B=a(190),k=a(4276);function V(e){const t=(0,b.useMemo)((()=>new B.BehaviorSubject(e)),[]);return(0,b.useEffect)((()=>{t.next(e)}),[t,e]),t}function j({title:e,withDefaultActions:t,extraActions:a,showInspector:n,syncColors:s,syncCursor:r,syncTooltips:o,viewMode:l,id:u,query:d,filters:p,timeRange:_,disabledActions:g,searchSessionId:h,forceDSL:f,hidePanelTitles:v,lastReloadRequestTime:E,...y}){const T=(0,b.useMemo)((()=>({syncColors$:new B.BehaviorSubject(!1),syncCursor$:new B.BehaviorSubject(!1),syncTooltips$:new B.BehaviorSubject(!1)})),[]),A=V(g),S=V(l),O=V(h),w=V(v),N=V(y.esqlVariables),[D,I]=(0,b.useState)(void 0),P=(0,b.useRef)(y.attributes?{attributes:y.attributes}:(0,k.pT)(null,e)),L=(0,M.yW)({query:d,filters:p,timeRange:_}),R=Boolean(t)||((null==a?void 0:a.length)||0)>0,C=(0,b.useMemo)((()=>new B.BehaviorSubject(void 0)),[]);(0,b.useEffect)((()=>{C.next()}),[C,E]),(0,b.useEffect)((()=>{D&&(D.updateAttributes({..."attributes"in P.current?P.current.attributes:P.current,...y.attributes}),D.updateOverrides(y.overrides))}),[D,y.attributes,y.overrides]),(0,b.useEffect)((()=>{null!=s&&T.syncColors$.getValue()!==s&&T.syncColors$.next(s),null!=r&&T.syncCursor$.getValue()!==r&&T.syncCursor$.next(r),null!=o&&T.syncTooltips$.getValue()!==o&&T.syncTooltips$.next(o)}),[T,s,r,o]);const x=(0,b.useMemo)((()=>({hideInspector:!n,showNotifications:!1,showShadow:!1,showBadges:!1,getActions:async(e,n)=>{const s=t?await(null==D?void 0:D.getTriggerCompatibleActions(e,n)):[];return(null!=a?a:[]).concat(s||[])}})),[n,t,a,D]);return(0,m.jsx)(i.EmbeddableRenderer,{type:c.LENS_EMBEDDABLE_TYPE,maybeId:u,getParentApi:()=>({...y,...L,searchSessionId$:O,disabledActionIds$:A,setDisabledActionIds:e=>A.next(e),viewMode$:S,settings:T,getSerializedStateForChild:()=>({rawState:P.current,references:[]}),getRuntimeStateForChild:()=>({...P.current,attributes:y.attributes}),forceDSL:f,esqlVariables$:N,hideTitle$:w,reload$:C}),onApiAvailable:I,hidePanelChrome:!R,panelProps:x})}var F=a(7195),z=a(7888),G=a(5879);function U(e){const t=[],a=e.some((e=>(0,F.tableHasFormulas)(e.columns,e.rows)));return a&&t.push({title:l.i18n.translate("xpack.lens.app.downloadButtonFormulasWarningTitle",{defaultMessage:"Formulas detected"}),message:l.i18n.translate("xpack.lens.app.downloadButtonFormulasWarningMessage",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})}),t}class LensPlugin{constructor(){(0,n.default)(this,"datatableVisualization",void 0),(0,n.default)(this,"editorFrameService",void 0),(0,n.default)(this,"editorFrameSetup",void 0),(0,n.default)(this,"queuedVisualizations",[]),(0,n.default)(this,"FormBasedDatasource",void 0),(0,n.default)(this,"TextBasedDatasource",void 0),(0,n.default)(this,"xyVisualization",void 0),(0,n.default)(this,"legacyMetricVisualization",void 0),(0,n.default)(this,"metricVisualization",void 0),(0,n.default)(this,"pieVisualization",void 0),(0,n.default)(this,"heatmapVisualization",void 0),(0,n.default)(this,"gaugeVisualization",void 0),(0,n.default)(this,"tagcloudVisualization",void 0),(0,n.default)(this,"topNavMenuEntries",[]),(0,n.default)(this,"hasDiscoverAccess",!1),(0,n.default)(this,"dataViewsService",void 0),(0,n.default)(this,"locator",void 0),(0,n.default)(this,"datasourceMap",void 0),(0,n.default)(this,"visualizationMap",void 0),(0,n.default)(this,"initEditorFrameService",(async()=>({datasourceMap:{},visualizationMap:{}})))}setup(e,{urlForwarding:t,expressions:n,data:i,fieldFormats:r,embeddable:o,visualizations:p,charts:_,globalSearch:g,usageCollection:b,uiActionsEnhanced:h,share:f,contentManagement:v}){const E=(0,s.createStartServicesGetter)(e.getStartServices),y=async()=>{const{core:t,plugins:n}=E(),[{getLensAttributeService:r,setUsageCollectionStart:o,initMemoizedErrorNotification:l},{visualizationMap:u,datasourceMap:c},d]=await Promise.all([Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840)),this.initEditorFrameService(),n.eventAnnotation.getService()]);return n.usageCollection&&o(n.usageCollection),l(t),{...n,attributeService:r(t.http),capabilities:t.application.capabilities,coreHttp:t.http,coreStart:t,timefilter:n.data.query.timefilter.timefilter,expressionRenderer:n.expressions.ReactExpressionRenderer,documentToExpression:(t,a)=>this.editorFrameService.documentToExpression(t,{dataViews:n.dataViews,storage:new s.Storage(localStorage),uiSettings:e.uiSettings,timefilter:n.data.query.timefilter.timefilter,nowProvider:n.data.nowProvider,forceDSL:a,eventAnnotationService:d}),injectFilterReferences:i.query.filterManager.inject.bind(i.query.filterManager),visualizationMap:u,datasourceMap:c,theme:e.theme,uiSettings:e.uiSettings}};return o&&(o.registerReactEmbeddableFactory(c.LENS_EMBEDDABLE_TYPE,(async()=>{const[e,{createLensEmbeddableFactory:t}]=await Promise.all([y(),Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840))]);return t(e)})),o.registerAddFromLibraryType({onAdd:async(e,t)=>{const{SAVED_OBJECT_REF_NAME:n}=await a.e(621).then(a.bind(a,6621));e.addNewPanel({panelType:c.LENS_EMBEDDABLE_TYPE,serializedState:{rawState:{},references:[...t.references,{name:n,type:c.LENS_EMBEDDABLE_TYPE,id:t.id}]}},!0)},savedObjectType:c.LENS_EMBEDDABLE_TYPE,savedObjectName:l.i18n.translate("xpack.lens.mapSavedObjectLabel",{defaultMessage:"Lens"}),getIconForSavedObject:()=>c.LENS_ICON})),f&&(this.locator=f.url.locators.create(new x.Z),f.registerShareIntegration("lens",(({uiSettings:e,formatFactoryFn:t,atLeastGold:a})=>({id:"csvDownloadLens",groupId:"export",getShareIntegrationConfig:async({sharingData:n})=>{const{title:s,datatables:i,csvEnabled:r}=n;return{id:"csvDownloadLens",name:l.i18n.translate("xpack.lens.reporting.shareContextMenu.csvReportsButtonLabel",{defaultMessage:"CSV Download"}),icon:"tableDensityNormal",sortOrder:1,label:"CSV",exportType:"lens_csv",supportedLayoutOptions:["print"],requiresSavedState:!1,generateAssetExport:()=>async function({title:e,datatables:t,formatFactory:a,uiSettings:n}){if(0===t.length)return void(window.ELASTIC_LENS_CSV_DOWNLOAD_DEBUG&&(window.ELASTIC_LENS_CSV_CONTENT=void 0));const s=t.reduce(((s,i,r)=>{if(i){const o=t.length>1?`-${r+1}`:"";s[`${e}${o}.csv`]={content:L.exporters.datatableToCSV(i,{csvSeparator:n.get("csv:separator",","),quoteValues:n.get("csv:quoteValues",!0),formatFactory:a,escapeFormulaValues:!1}),type:L.exporters.CSV_MIME_TYPE}}return s}),{});window.ELASTIC_LENS_CSV_DOWNLOAD_DEBUG&&(window.ELASTIC_LENS_CSV_CONTENT=s),s&&(0,z.downloadMultipleAs)(s)}({title:s,formatFactory:t(),datatables:i,uiSettings:e}),warnings:U(i),...a()?{disabled:!r,renderLayoutOptionSwitch:!1,getJobParams:void 0}:{helpText:(0,m.jsx)(G.FormattedMessage,{id:"xpack.lens.application.csvPanelContent.generationDescription",defaultMessage:"Download the data displayed in the visualization."}),generateExportButtonLabel:(0,m.jsx)(G.FormattedMessage,{id:"xpack.lens.share.csvButton",defaultMessage:"Download CSV"})}}}}))({uiSettings:e.uiSettings,formatFactoryFn:()=>E().plugins.fieldFormats.deserialize,atLeastGold:()=>{var e;let t=!1;return null===(e=E().plugins.licensing)||void 0===e||e.license$.pipe().subscribe((e=>{t=e.hasAtLeast("gold")})),t}}))),p.registerAlias(d.V),h.registerDrilldown(new OpenInDiscoverDrilldown({dataViews:()=>this.dataViewsService,locator:()=>null==f?void 0:f.url.locators.get("DISCOVER_APP_LOCATOR"),hasDiscoverAccess:()=>this.hasDiscoverAccess,application:()=>E().core.application})),v.registry.register({id:c.LENS_CONTENT_TYPE,version:{latest:c.LENS_ITEM_LATEST_VERSION},name:l.i18n.translate("xpack.lens.content.name",{defaultMessage:"Lens Visualization"})}),(t=>{[P.P$,P.Tq,P.kd,I.a,N.p,w.q,O.J,S.T,(0,A.b)((()=>E().plugins.fieldFormats.deserialize)),D((()=>E().plugins.data.datatableUtilities),(async()=>{const{getTimeZone:t}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return t(e.uiSettings)}),(()=>E().plugins.data.nowProvider.get()))].forEach((e=>t.registerFunction(e)))})(n),e.application.register({id:c.APP_ID,title:c.NOT_INTERNATIONALIZED_PRODUCT_NAME,visibleIn:["globalSearch"],category:u.DEFAULT_APP_CATEGORIES.kibana,euiIconType:"logoKibana",mount:async t=>{const{core:s,plugins:o}=E(),[{mountApp:l,getLensAttributeService:u,setUsageCollectionStart:c,initMemoizedErrorNotification:d}]=await Promise.all([Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840)),this.initParts(e,i,_,n,r,o.fieldFormats.deserialize)]);o.usageCollection&&c(o.usageCollection),d(s);const p=this.editorFrameService.start(s,o);return l(e,t,{createEditorFrame:p.createInstance,attributeService:u(s.http),topNavMenuEntryGenerators:this.topNavMenuEntries,locator:this.locator})}}),t.forwardApp(c.APP_ID,c.APP_ID),this.initEditorFrameService=async()=>{if(this.datasourceMap&&this.visualizationMap)return{datasourceMap:this.datasourceMap,visualizationMap:this.visualizationMap};const{plugins:t}=E();await this.initParts(e,i,_,n,r,t.fieldFormats.deserialize);const[a,s]=await Promise.all([this.editorFrameService.loadVisualizations(),this.editorFrameService.loadDatasources()]);return this.visualizationMap=a,this.datasourceMap=s,{datasourceMap:s,visualizationMap:a}},{registerVisualization:e=>{this.editorFrameSetup?this.editorFrameSetup.registerVisualization(e):this.queuedVisualizations.push(e)},registerTopNavMenuEntryGenerator:e=>{this.topNavMenuEntries.push(e)}}}async initParts(e,t,n,s,i,r){const{DatatableVisualization:o,EditorFrameService:l,FormBasedDatasource:u,XyVisualization:c,LegacyMetricVisualization:d,MetricVisualization:p,PieVisualization:_,HeatmapVisualization:g,GaugeVisualization:b,TagcloudVisualization:h,TextBasedDatasource:f}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));this.datatableVisualization=new o,this.editorFrameService=new l,this.FormBasedDatasource=new u,this.TextBasedDatasource=new f,this.xyVisualization=new c,this.legacyMetricVisualization=new d,this.metricVisualization=new p,this.pieVisualization=new _,this.heatmapVisualization=new g,this.gaugeVisualization=new b,this.tagcloudVisualization=new h;const m=this.editorFrameService.setup(),v={expressions:s,data:t,fieldFormats:i,charts:n,editorFrame:m,formatFactory:r};this.FormBasedDatasource.setup(e,v),this.TextBasedDatasource.setup(e,v),this.xyVisualization.setup(e,v),this.datatableVisualization.setup(e,v),this.legacyMetricVisualization.setup(e,v),this.metricVisualization.setup(e,v),this.pieVisualization.setup(e,v),this.heatmapVisualization.setup(e,v),this.gaugeVisualization.setup(e,v),this.tagcloudVisualization.setup(e,v),this.queuedVisualizations.forEach((e=>{m.registerVisualization(e)})),this.editorFrameSetup=m}start(e,t){var n;this.hasDiscoverAccess=e.application.capabilities.discover_v2.show,this.dataViewsService=t.dataViews,t.uiActions.hasAction(o.ACTION_VISUALIZE_FIELD)&&t.uiActions.unregisterAction(o.ACTION_VISUALIZE_FIELD),t.uiActions.registerTrigger(_),t.uiActions.addTriggerActionAsync(o.VISUALIZE_FIELD_TRIGGER,o.ACTION_VISUALIZE_LENS_FIELD,(async()=>{const{visualizeFieldAction:t}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return t(e.application)})),t.uiActions.addTriggerActionAsync(r.VISUALIZE_EDITOR_TRIGGER,r.ACTION_CONVERT_TO_LENS,(async()=>{const{visualizeTSVBAction:t}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return t(e.application)})),t.uiActions.addTriggerActionAsync(r.DASHBOARD_VISUALIZATION_PANEL_TRIGGER,r.ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS,(async()=>{const{convertToLensActionFactory:t}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return t(r.ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS,l.i18n.translate("xpack.lens.visualizeLegacyVisualizationChart",{defaultMessage:"Visualize legacy visualization chart"}),l.i18n.translate("xpack.lens.dashboardLabel",{defaultMessage:"Dashboard"}))(e.application)})),t.uiActions.addTriggerActionAsync(r.AGG_BASED_VISUALIZATION_TRIGGER,r.ACTION_CONVERT_AGG_BASED_TO_LENS,(async()=>{const{convertToLensActionFactory:t}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return t(r.ACTION_CONVERT_AGG_BASED_TO_LENS,l.i18n.translate("xpack.lens.visualizeAggBasedLegend",{defaultMessage:"Visualize agg based chart"}),l.i18n.translate("xpack.lens.AggBasedLabel",{defaultMessage:"aggregation based visualization"}))(e.application)})),t.uiActions.addTriggerActionAsync(p.Eu,p.rp,(async()=>{const{EditLensEmbeddableAction:n}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840)),{visualizationMap:s,datasourceMap:i}=await this.initEditorFrameService();return new n(e,{...t,visualizationMap:s,datasourceMap:i})})),t.uiActions.addTriggerActionAsync(o.ADD_PANEL_TRIGGER,p.ZD,(async()=>{const{AddESQLPanelAction:t}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return new t(e)})),t.uiActions.registerActionAsync("addLensPanelAction",(async()=>{const{getAddLensPanelAction:e}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return e(t)})),t.uiActions.attachAction(o.ADD_PANEL_TRIGGER,"addLensPanelAction"),t.uiActions.hasTrigger("ADD_CANVAS_ELEMENT_TRIGGER")&&t.uiActions.attachAction("ADD_CANVAS_ELEMENT_TRIGGER","addLensPanelAction");const s=null===(n=t.share)||void 0===n?void 0:n.url.locators.get("DISCOVER_APP_LOCATOR");return s&&t.uiActions.addTriggerActionAsync(i.CONTEXT_MENU_TRIGGER,"ACTION_OPEN_IN_DISCOVER",(async()=>{const{createOpenInDiscoverAction:e}=await a.e(162).then(a.bind(a,3162));return e(s,t.dataViews,this.hasDiscoverAccess)})),{EmbeddableComponent:j,SaveModalComponent:T(e,t),navigateToPrefilledEditor:(a,{openInNewTab:n=!1,originatingApp:s="",originatingPath:r,skipAppLeave:o=!1}={})=>{null!=a&&a.timeRange&&!n&&t.data.query.timefilter.timefilter.setTime(a.timeRange),new i.EmbeddableStateTransfer(e.application.navigateToApp,e.application.currentAppId$).navigateToEditor(c.APP_ID,{openInNewTab:n,path:(0,c.getEditPath)(void 0,n&&(null==a?void 0:a.timeRange)||void 0),state:{originatingApp:s,originatingPath:r,valueInput:a},skipAppLeave:o})},canUseEditor:()=>{var t;return Boolean(null===(t=e.application.capabilities.visualize_v2)||void 0===t?void 0:t.show)},getXyVisTypes:async()=>{const{visualizationSubtypes:e}=await Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840));return e},stateHelperApi:async()=>{const[{createChartInfoApi:e,suggestionsApi:n},{visualizationMap:s,datasourceMap:i}]=await Promise.all([Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840)),this.initEditorFrameService()]);return{chartInfo:e(t.dataViews,s,i),suggestions:(e,t,a,r,o)=>n({datasourceMap:i,visualizationMap:s,context:e,dataView:t,excludedVisualizations:a,preferredChartType:r,preferredVisAttributes:o})}},EditLensConfigPanelApi:async()=>{const[{visualizationMap:n,datasourceMap:s},{getEditLensConfiguration:i}]=await Promise.all([this.initEditorFrameService(),Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840))]);return await i(e,t,n,s)}}}stop(){}}var $=a(1971),q=a(2601);const H=()=>new LensPlugin},2952:(e,t,a)=>{"use strict";a.d(t,{W:()=>LensClient});var n=a(770),s=a(5203);const i={in(e){const{isNewApiFormat:t,...a}=e.state;return{...e,state:a}},out:e=>({...e,state:{...e.state,isNewApiFormat:!0}})};class LensClient{constructor(e){this.http=e}async get(e){const{data:t,meta:a}=await this.http.get(`${s.LENS_VIS_API_PATH}/${e}`,{version:s.LENS_API_VERSION});return{item:i.in(t),meta:a}}async create({description:e,visualizationType:t,state:a,title:r,version:o},l,u={}){if(null===t)throw new Error("Missing visualization type");const c={data:(0,n.omit)(i.out({id:"",description:e,visualizationType:t,state:a,title:r,version:o,references:l}),"id"),options:u},{data:d,meta:p}=await this.http.post(s.LENS_VIS_API_PATH,{body:JSON.stringify(c),version:s.LENS_API_VERSION});return{item:i.in(d),meta:p}}async update(e,{description:t,visualizationType:a,state:r,title:o,version:l},u,c={}){if(null===a)throw new Error("Missing visualization type");const d={data:(0,n.omit)(i.out({id:"",description:t,visualizationType:a,state:r,title:o,version:l,references:u}),"id"),options:c},{data:p,meta:_}=await this.http.put(`${s.LENS_VIS_API_PATH}/${e}`,{body:JSON.stringify(d),version:s.LENS_API_VERSION});return{item:i.in(p),meta:_}}async delete(e){var t,a;return{success:null!==(t=null===(a=(await this.http.delete(`${s.LENS_VIS_API_PATH}/${e}`,{asResponse:!0,version:s.LENS_API_VERSION})).response)||void 0===a?void 0:a.ok)&&void 0!==t&&t}}async search({query:e,page:t,perPage:a,fields:n,searchFields:r}){return(await this.http.get(s.LENS_VIS_API_PATH,{query:{query:e,page:t,perPage:a,fields:n,searchFields:r},version:s.LENS_API_VERSION})).data.map((({data:e})=>({...e,attributes:i.in(e)})))}}},4276:(e,t,a)=>{"use strict";a.d(t,{pT:()=>m,bf:()=>v,Lc:()=>S,Mw:()=>A,IN:()=>T,DO:()=>O,Lz:()=>y,zC:()=>E});var n=a(280);const s=e=>Boolean(e&&void 0!==(null==e?void 0:e.viewMode$));var i=a(6578);const r=e=>s(e)?e.viewMode$.getValue():(0,i.X)(e)&&s(e.parentApi)?e.parentApi.viewMode$.getValue():void 0,o=e=>Boolean(e&&"object"==typeof e&&Object.hasOwn(e,"executionContext"));var l=a(770),u=a(190),c=a(5964),d=a(4331);const p=e=>{if(!e)return"";const t="kuery"===e.language?"KQL":"lucene"===e.language?"QSTR":"";return t&&e.query?`${t}("""${"string"==typeof e.query&&"lucene"===e.language?(0,c.escapeQuotes)(e.query):e.query}""")`:""},_=(e,t)=>e&&t?` | WHERE ${e} AND ${t}`:e||t?` | WHERE ${e||t}`:"";var g=a(7534),b=a(6536),h=a(8497);var f=a(5203);function m(e=null,t,a,n,s){const i=n&&(0,c.isOfAggregateQueryType)(n);return{attributes:{version:f.LENS_ITEM_LATEST_VERSION,title:null!=t?t:"",description:null!=a?a:"",visualizationType:e,references:[],state:{query:n||{query:"",language:"kuery"},filters:s||[],internalReferences:[],datasourceStates:{...i?{textBased:{}}:{formBased:{}}},visualization:{}}}}}async function v({attributeService:e,...t},s,i){var r;const o=m().attributes,l=(0,n.r)(f.DOC_TYPE,i),u=null!==(r=null==l?void 0:l.id)&&void 0!==r?r:s.savedObjectId;if(u)try{const{attributes:t,managed:a,sharingSavedObjectProps:n}=await e.loadFromLibrary(u);return{...s,savedObjectId:u,attributes:t,managed:a,sharingSavedObjectProps:n}}catch(e){return{...s,attributes:o}}const c=e.injectReferences("attributes"in s?s:{attributes:s},null!=i&&i.length?i:void 0);if(c.isNewPanel)try{var v;const e=await async function({dataViews:e,data:t,visualizationMap:n,datasourceMap:s,uiSettings:i}){var r;if(!(0,h.m)({uiSettings:i}))return;const o=await(0,d.V)({dataViews:e});if(!o)return;const[l,{suggestionsApi:u}]=await Promise.all([(0,d.a)(`from ${o}`,e),Promise.all([a.e(921),a.e(840)]).then(a.bind(a,2840))]),c=function(e){var t,a,n;const s="date"===(null==e||null===(t=e.fields)||void 0===t||null===(a=t.getByName)||void 0===a||null===(n=a.call(t,"@timestamp"))||void 0===n?void 0:n.type),i=null==e?void 0:e.timeFieldName,r=!s&&i?`${i} >= ?_tstart AND ${i} <= ?_tend`:"",o=p(void 0),l=_(r,o);return`FROM ${e.getIndexPattern()}${l} | LIMIT 10`}(l),f={esql:c},m=new AbortController,v=await(0,g.dI)({esqlQuery:c,search:t.search.search,signal:m.signal,timeRange:t.query.timefilter.timefilter.getAbsoluteTime()}),E=null!==(r=u({context:{dataViewSpec:l.toSpec(!1),fieldName:"",textBasedColumns:v,query:f},dataView:l,datasourceMap:s,visualizationMap:n}))&&void 0!==r?r:[];if(!E.length)return;const[y]=E;return(0,b.u)({filters:[],query:f,suggestion:{...y,title:""},dataView:l})}(t);return{...c,attributes:null!==(v=null!=e?e:c.attributes)&&void 0!==v?v:o}}catch(e){return{...c,attributes:o}}return c}function E(e){var t;return(0,c.isOfAggregateQueryType)(null===(t=e.attributes)||void 0===t?void 0:t.state.query)}function y(e){return s(e)?r(e):void 0}function T(e){var t;const a=null!==(t=y(e))&&void 0!==t?t:"view";return"print"===a?"view":a}function A(e){return o(e)?e.executionContext:(t=e,(0,l.isObject)(t)&&"getAppContext"in t&&"function"==typeof t.getAppContext?{type:e.getAppContext().currentAppId}:void 0);var t}function S(e){return s(e)?e.viewMode$:(0,i.X)(e)?S(e.parentApi):new u.BehaviorSubject("view")}function O(e){var t,a,n,s,i,r;return{formBased:null!==(t=null!==(a=null==e||null===(n=e.formBased)||void 0===n?void 0:n.state)&&void 0!==a?a:null==e?void 0:e.formBased)&&void 0!==t?t:void 0,textBased:null!==(s=null!==(i=null==e||null===(r=e.textBased)||void 0===r?void 0:r.state)&&void 0!==i?i:null==e?void 0:e.textBased)&&void 0!==s?s:void 0}}},8497:(e,t,a)=>{"use strict";a.d(t,{m:()=>r,t:()=>o});var n=a(5964),s=a(3778),i=a(3142);function r({uiSettings:e}){return e.get(s.O)}function o(e,t){if((0,n.isOfAggregateQueryType)(e)){const a=(0,i.PC)(e.esql);return a.length?t.filter((e=>a.includes(e.key))):t}}},1971:(e,t,a)=>{"use strict";a.d(t,{$C:()=>o,Nq:()=>c,U6:()=>u,W:()=>l,n2:()=>d});var n=a(8357),s=a(3934),i=a(662),r=a(770);const o=e=>Boolean(e&&(0,n.m)(e,"lens")&&"canViewUnderlyingData$"in e&&function(e){return["getSavedVis","getViewUnderlyingDataArgs","isTextBasedLanguage","getTextBasedLanguage"].every((t=>"function"==typeof e[t]))}(e)&&(0,s.Qr)(e)&&(0,i.cH)(e));function l(e){return(0,r.isObject)(e)&&["onFilter","onBrushEnd","onLoad","onTableRowClick","onBeforeBadgesRender"].some((t=>Object.hasOwn(e,t)))}function u(e){return(0,r.isObject)(e)&&["style","className","noPadding","viewMode","abortController"].some((t=>Object.hasOwn(e,t)))}function c(e){return(0,r.isObject)(e)&&Object.hasOwn(e,"abortController")}function d(e){return(0,r.isObject)(e)&&Object.hasOwn(e,"canEditInline")}},2631:(e,t,a)=>{"use strict";a.d(t,{Eu:()=>i,ZD:()=>n,rp:()=>s});const n="ACTION_CREATE_ESQL_CHART",s="ACTION_EDIT_LENS_EMBEDDABLE",i="IN_APP_EMBEDDABLE_EDIT_TRIGGER"},9326:(e,t,a)=>{"use strict";a.d(t,{V:()=>o});var n=a(5008),s=a(5203),i=a(2952);function r({item:{id:e,references:t,...a},meta:{type:n,createdAt:s,updatedAt:i,createdBy:r,updatedBy:o,managed:l,originId:u}}){return{id:e,references:t,attributes:a,type:n,createdAt:s,updatedAt:i,createdBy:r,updatedBy:o,managed:l,originId:u}}const o={alias:{path:(0,s.getBasePath)(),app:s.APP_ID},name:s.APP_ID,promotion:!0,title:n.i18n.translate("xpack.lens.visTypeAlias.title",{defaultMessage:"Lens"}),description:n.i18n.translate("xpack.lens.visTypeAlias.description",{defaultMessage:"Create visualizations using an intuitive drag-and-drop interface. Smart suggestions help you follow best practices and find the chart types that best match your data."}),order:60,icon:s.LENS_ICON,stage:s.STAGE_ID,appExtensions:{visualizations:{docTypes:[s.LENS_EMBEDDABLE_TYPE],searchFields:["title^3"],clientOptions:{update:{overwrite:!0}},client:function(e,t){const a=new i.W(t);return{get:async e=>{const t=await a.get(e),n=r(t);return{item:{...n,attributes:n.attributes},meta:{outcome:t.meta.outcome}}},update:async({id:e,options:t={},data:n={}})=>{var s;const i=r(await a.update(e,n,null!==(s=t.references)&&void 0!==s?s:[]));return{item:{...i,attributes:i.attributes}}},delete:async e=>a.delete(e)}},toListItem(e){const{id:t,type:a,updatedAt:i,attributes:r,managed:o}=e,{title:l,description:u}=r;return{id:t,title:l,description:u,updatedAt:i,managed:o,editor:{editUrl:(0,s.getEditPath)(t),editApp:"lens"},icon:s.LENS_ICON,stage:s.STAGE_ID,savedObjectType:a,type:s.LENS_EMBEDDABLE_TYPE,typeTitle:n.i18n.translate("xpack.lens.visTypeAlias.type",{defaultMessage:"Lens"})}}}}}},4513:e=>{"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,s,i;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(s=n;0!==s--;)if(!e(t[s],a[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(s=n;0!==s--;)if(!Object.prototype.hasOwnProperty.call(a,i[s]))return!1;for(s=n;0!==s--;){var r=i[s];if(!e(t[r],a[r]))return!1}return!0}return t!=t&&a!=a}},399:(e,t,a)=>{a.p=window.__kbnPublicPath__.lens},2212:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},5240:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},4390:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7195:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},4627:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7674:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7574:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/dataViews/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7546:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},975:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/esqlDataGrid/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},104:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/esql/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},6525:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/eventAnnotation/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7951:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressionGauge/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},6239:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressionGauge/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},2123:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressionMetricVis/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},9789:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressionTagcloud/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},6707:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressionXY/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7876:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},904:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},2374:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},8370:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},409:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},1359:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},1215:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7704:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},2927:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7888:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/share/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},4839:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},1684:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},134:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/visualizations/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},8634:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},2500:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},3185:(e,t,a)=>{e.exports=a(2497)(51858)},8915:(e,t,a)=>{e.exports=a(2497)(67493)},9494:e=>{"use strict";e.exports=__kbnSharedDeps__.ChromaJs},5927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},3059:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},1319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},6791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},4682:e=>{"use strict";e.exports=__kbnSharedDeps__.FastestLevenshtein},6744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},9424:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},9551:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCryptoBrowser},6494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},1192:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEbtTools},5964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},5008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},5879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},3999:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextTheme},5804:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaMount},5995:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnRison},5735:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSearchErrors},1728:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},3803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},1783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},2488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},4286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},2874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},7012:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRedux},6524:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useAsync},7583:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useDebounce},1904:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useDeepCompareEffect},3467:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useLatest},7064:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useLocalStorage},9985:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useMount},693:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.usePrevious},6476:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useUnmount},5668:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactUse.useUpdateEffect},7150:e=>{"use strict";e.exports=__kbnSharedDeps__.ReduxjsToolkit},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},5079:e=>{"use strict";e.exports=__kbnSharedDeps__.SaferLodashSet},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},9472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},2497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"==typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"==typeof a.then)return a}var s=Object.create(null);i.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>r[e]=()=>a[e]));return r.default=()=>a,i.d(s,r),s},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,a)=>(i.f[a](e,t),t)),[])),i.u=e=>"lens.chunk."+e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},i.l=(e,t,n,s)=>{if(a[e])a[e].push(t);else{var r,o;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==e){r=c;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.src=e),a[e]=[t];var d=(t,n)=>{r.onerror=r.onload=null,clearTimeout(p);var s=a[e];if(delete a[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),o&&document.head.appendChild(r)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={167:0};i.f.j=(t,a)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var s=new Promise(((a,s)=>n=e[t]=[a,s]));a.push(n[2]=s);var r=i.p+i.u(t),o=new Error;i.l(r,(a=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,n[1](o)}}),"chunk-"+t,t)}};var t=(t,a)=>{var n,s,[r,o,l]=a,u=0;if(r.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);l&&l(i)}for(t&&t(a);u<r.length;u++)s=r[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=self.lens_bundle_jsonpfunction=self.lens_bundle_jsonpfunction||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),i.nc=void 0,i(399),__kbnBundles__.define("plugin/lens/public",i,8209),__kbnBundles__.define("plugin/lens/common/constants",i,5203)})();