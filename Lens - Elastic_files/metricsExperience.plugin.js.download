(()=>{var e={122:(e,r,t)=>{"use strict";t.r(r),t.d(r,{plugin:()=>h});const n=["delete","get","patch","post","put"];const o=__kbnSharedDeps__.Rxjs;class ParseError extends Error{constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function i(e){}const s=__kbnSharedDeps__.KbnI18n;let a=function(e){return e.error="error",e.data="data",e}({}),c=function(e){return e.internalError="internalError",e.requestError="requestError",e}({});class ServerSentEventError extends Error{constructor(e,r,t){super(r),this.code=e,this.meta=t}get status(){if("object"==typeof this.meta&&this.meta.status)return this.meta.status}toJSON(){return{type:a.error,error:{code:this.code,message:this.message,meta:this.meta}}}}function l(e=s.i18n.translate("sse.internalError",{defaultMessage:"An internal error occurred"})){return new ServerSentEventError(c.internalError,e,{})}function u(){return(0,o.switchMap)((e=>function(e){const r=e.response,t=null==r?void 0:r.body;return t?new o.Observable((e=>{const r=function(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:r=i,onError:t=i,onRetry:n=i,onComment:o}=e;let s,a="",c=!0,l="",u="";function d(e){if(""===e)return l.length>0&&r({id:s,event:u||void 0,data:l.endsWith("\n")?l.slice(0,-1):l}),s=void 0,l="",void(u="");if(e.startsWith(":"))return void(o&&o(e.slice(e.startsWith(": ")?2:1)));const t=e.indexOf(":");if(-1===t)p(e,"",e);else{const r=e.slice(0,t),n=" "===e[t+1]?2:1;p(r,e.slice(t+n),e)}}function p(e,r,o){switch(e){case"event":u=r;break;case"data":l=`${l}${r}\n`;break;case"id":s=r.includes("\0")?void 0:r;break;case"retry":/^\d+$/.test(r)?n(parseInt(r,10)):t(new ParseError(`Invalid \`retry\` value: "${r}"`,{type:"invalid-retry",value:r,line:o}));break;default:t(new ParseError(`Unknown field "${e.length>20?`${e.slice(0,20)}â€¦`:e}"`,{type:"unknown-field",field:e,value:r,line:o}))}}return{feed:function(e){const r=c?e.replace(/^\xEF\xBB\xBF/,""):e,[t,n]=function(e){const r=[];let t="",n=0;for(;n<e.length;){const o=e.indexOf("\r",n),i=e.indexOf("\n",n);let s=-1;if(-1!==o&&-1!==i?s=Math.min(o,i):-1!==o?s=o===e.length-1?-1:o:-1!==i&&(s=i),-1===s){t=e.slice(n);break}{const t=e.slice(n,s);r.push(t),n=s+1,"\r"===e[n-1]&&"\n"===e[n]&&n++}}return[r,t]}(`${a}${r}`);for(const e of t)d(e);a=n,c=!1},reset:function(e={}){a&&e.consume&&d(a),c=!0,s=void 0,l="",u="",a=""}}}({onEvent:r=>{try{const t=JSON.parse(r.data);if("error"===r.event){const r=t;e.error(new ServerSentEventError(r.error.code,r.error.message,r.error.meta))}else e.next({type:r.event||"event",...t})}catch(r){e.error(l("Failed to parse JSON"))}}});(async()=>{const e=t.getReader(),n=new TextDecoder,o=({done:t,value:i})=>t?Promise.resolve():(r.feed(n.decode(i,{stream:!0})),e.read().then(o));return e.read().then(o)})().then((()=>{e.complete()})).catch((r=>{e.error(r)}))})):(0,o.throwError)((()=>{throw l("No readable stream found in response")}))}(e)))}const d=__kbnSharedDeps__.Lodash;function p(e){const r=function(e){const r=(r,t,o)=>{const{method:i,pathname:s,version:a}=function(e,r={}){var t,o,i;const{method:s,pathname:a,version:c}=function(e){var r;const t=e.split(" "),o=t[0].trim().toLowerCase(),i=t[1].trim(),s=null===(r=t[2])||void 0===r?void 0:r.trim();if(!n.includes(o))throw new Error(`Endpoint ${e} was not prefixed with a valid HTTP method`);return{method:o,pathname:i,version:s}}(e),l=/(\/\{\w+\?\})/g,u=/(\/{)((.+?))(\})/g;if(0===(null===(t=Object.keys(r))||void 0===t?void 0:t.length))return{method:s,pathname:a.replace(u,""),version:c};const d=Object.keys(r).reduce(((e,t)=>e.replace(`{${t}}`,encodeURIComponent(r[t])).replace(`{${t}?}`,encodeURIComponent(r[t]))),a);if((null===(o=null!==(i=d.match(l))&&void 0!==i?i:[])||void 0===o?void 0:o.length)>0)throw new Error(`Missing parameters: ${d.match(l)}`);return{method:s,pathname:d,version:c}}(r,null==t?void 0:t.path);return e.http.fetch(s,{method:i.toUpperCase(),...o,body:t&&t.body?JSON.stringify(t.body):void 0,query:null==t?void 0:t.query,version:a})};return{fetch:(e,...t)=>{var n;const o=null!==(n=t[0])&&void 0!==n?n:{},i="params"in o?o.params:{},s=(0,d.omit)(o,"params");return r(e,i,s)},stream:(e,...t)=>{var n;const i=null!==(n=t[0])&&void 0!==n?n:{},s="params"in i?i.params:{},a=(0,d.omit)(i,"params");return(0,o.from)(r(e,s,{...a,asResponse:!0,rawResponse:!0})).pipe(u())}}}(e).fetch;return{getDimensions:(e,t)=>r("GET /internal/metrics_experience/dimensions",{params:{query:e},signal:t}),getFields:(e,t)=>r("GET /internal/metrics_experience/fields",{params:{query:e},signal:t})}}class MetricsExperiencePlugin{setup(e){return{}}start(e){return{metricsExperienceClient:e.featureFlags.getBooleanValue("metricsExperienceEnabled",!0)?p(e):void 0}}stop(){}}const h=()=>new MetricsExperiencePlugin},849:(e,r,t)=>{t.p=window.__kbnPublicPath__.metricsExperience}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(e=r.currentScript.src),!e)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t(849),__kbnBundles__.define("plugin/metricsExperience/public",t,122)})();