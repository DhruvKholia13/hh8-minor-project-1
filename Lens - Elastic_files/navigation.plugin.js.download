(()=>{var e={884:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Plugin:()=>NavigationPublicPlugin,TopNavMenu:()=>S,TopNavMenuBadges:()=>g,TopNavMenuItems:()=>h,plugin:()=>P});var n=i(185);const s=__kbnSharedDeps__.React;var r=i.n(s);const o=__kbnSharedDeps__.KbnI18nReact,a=__kbnSharedDeps__.EmotionReact,u=__kbnSharedDeps__.KbnReactKibanaMount,l=__kbnSharedDeps__.ElasticEui,c=__kbnSharedDeps__.Lodash;function d(e){var t,i,s;function o(){return(0,c.isFunction)(e.disableButton)?e.disableButton():e.disableButton}function u(){const{euiTheme:t}=(0,l.useEuiTheme)();return e.badge?(0,a.jsx)(r().Fragment,null,(0,a.jsx)(l.EuiBetaBadge,(0,n.default)({css:(0,a.css)("margin-right:",t.size.s,";vertical-align:middle;button:hover &,button:focus &{text-decoration:underline;}button:hover &{cursor:pointer;}","")},e.badge,{size:"s"})),(0,c.upperFirst)(e.label||e.id)):(0,c.upperFirst)(e.label||e.id)}function d(t){o()||(e.run(t.currentTarget),e.isMobileMenu&&e.closePopover())}const p=e.href?(({href:e,onClick:t})=>({href:e,onClick:e=>{e.defaultPrevented||!(e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(e)&&(e=>0===e.button)(e)&&(e.preventDefault(),t(e))}}))({href:e.href,onClick:d}):{onClick:d},h={id:e.htmlId,isDisabled:o(),isLoading:e.isLoading,iconType:e.iconType,iconSide:e.iconSide,"data-test-subj":e.testId,className:e.className,color:null!==(t=e.color)&&void 0!==t?t:"primary",...p},g=e.target&&e.href?{onClick:void 0,href:e.href,target:e.target}:{},v=e.iconOnly&&e.iconType&&!e.isMobileMenu?r().createElement(e.disableButton?r().Fragment:l.EuiToolTip,{...e.disableButton?{key:e.label||e.id}:{content:(0,c.upperFirst)(e.label||e.id),position:"bottom",delay:"long"}},(0,a.jsx)(l.EuiButtonIcon,(0,n.default)({size:"s"},(0,c.omit)(h,"iconSide"),{iconType:e.iconType,display:e.emphasize&&(null===(i=e.fill)||void 0===i||i)?"fill":void 0,"aria-label":(0,c.upperFirst)(e.label||e.id)}))):e.emphasize?(0,a.jsx)(l.EuiButton,(0,n.default)({size:"s",fullWidth:e.isMobileMenu},h,{fill:null===(s=e.fill)||void 0===s||s}),(0,a.jsx)(u,null)):(0,a.jsx)(l.EuiHeaderLink,(0,n.default)({size:"s"},h,g),(0,a.jsx)(u,null)),f=(0,c.isFunction)(e.tooltip)?e.tooltip():e.tooltip;return f?(0,a.jsx)(l.EuiToolTip,{content:f},v):v}d.defaultProps={disableButton:!1,tooltip:""};const p=["xs","s"],h=({config:e,className:t,popoverBreakpoints:i=p,gutterSize:s="xs"})=>{const r=(0,l.useIsWithinBreakpoints)(i);return e&&0!==e.length?(0,a.jsx)(l.EuiHeaderLinks,{"data-test-subj":"top-nav",gutterSize:s,className:t,popoverBreakpoints:i},(t=>e.map(((e,i)=>(0,a.jsx)(d,(0,n.default)({key:`nav-menu-${i}`,isMobileMenu:r,closePopover:t},e)))))):null},g=({badges:e})=>{const{euiTheme:t}=(0,l.useEuiTheme)();return e&&0!==e.length?(0,a.jsx)(l.EuiBadgeGroup,{css:(0,a.css)("margin-right:",t.size.m,";",""),"data-test-subj":"kbn-top-nav-menu-badge-group"},e.map(v)):null};function v({badgeText:e,toolTipProps:t,renderCustomBadge:i,...r},o){const u=`nav-menu-badge-${o}`,c=()=>(0,a.jsx)(l.EuiBadge,(0,n.default)({tabIndex:0},r),e);return i?(0,a.jsx)(s.Fragment,{key:u},i({badgeText:e})):t?(0,a.jsx)(l.EuiToolTip,(0,n.default)({key:u},t),(0,a.jsx)(c,null)):(0,a.jsx)(c,{key:u})}var f={name:"eivff4",styles:"display:none"},b={name:"s5xdrg",styles:"display:flex;align-items:center"},m={name:"12uvhm6",styles:"button:last-child{margin-right:0;}"};function S(e){const{config:t,badges:i,showSearchBar:n,gutterSize:s,...o}=e;if(!(t&&0!==t.length||n&&e.unifiedSearch))return null;function l(){return(0,a.jsx)(h,{config:t,className:e.className,"data-test-subj":"kbn-top-nav-menu-wrapper",css:m,popoverBreakpoints:e.popoverBreakpoints,gutterSize:s})}function c(){if(!n||!e.unifiedSearch)return null;const{AggregateQuerySearchBar:t}=e.unifiedSearch.ui;return(0,a.jsx)(t,o)}return function(){const{setMenuMountPoint:t,visible:n}=e,s={badgeWrapper:b,hidden:f};if(t){const e=(0,a.jsx)(g,{badges:i}),o=l();return(0,a.jsx)(r().Fragment,null,(e||o)&&(0,a.jsx)(u.MountPointPortal,{setMountPoint:t},(0,a.jsx)("span",{className:"kbnTopNavMenu__wrapper",css:[s.badgeWrapper,!1===n&&s.hidden,"",""]},e,o)),c())}return(0,a.jsx)(r().Fragment,null,(0,a.jsx)("span",{css:[!1===n&&s.hidden,"",""]},l()),c())}()}function T(e,t){return i=>{const s=t.filter((e=>void 0===e.appName||e.appName===i.appName)),r=(i.config||[]).concat(s);return(0,a.jsx)(o.I18nProvider,null,(0,a.jsx)(S,(0,n.default)({},i,{unifiedSearch:e,config:r})))}}S.defaultProps={showSearchBar:!1,showQueryInput:!0,showDatePicker:!0,showFilterBar:!0,screenTitle:""};var y=i(915);class TopNavMenuExtensionsRegistry{constructor(){(0,y.default)(this,"menuItems",void 0),this.menuItems=[]}register(e){this.menuItems.push(e)}getAll(){return this.menuItems}clear(){this.menuItems.length=0}}const _=__kbnSharedDeps__.Rxjs;i(721);let k=function(e){return e.CLICK_NAVLINK="solutionNav_click_navlink",e}({}),E=function(e){return e.ID="id",e.PATH="path",e.HREF="href",e.HREF_PREV="href_prev",e}({});const N={[E.ID]:{[E.ID]:{type:"keyword",_meta:{description:"The ID of navigation node."}}},[E.PATH]:{[E.PATH]:{type:"keyword",_meta:{description:"The path of the navigation node within the tree."}}},[E.HREF]:{[E.HREF]:{type:"keyword",_meta:{description:"The href of the navigation node.",optional:!0}}},[E.HREF_PREV]:{[E.HREF_PREV]:{type:"keyword",_meta:{description:"The previous href before clicking on a navigation node.",optional:!0}}}},w=[{eventType:k.CLICK_NAVLINK,schema:{...N[E.ID],...N[E.HREF],...N[E.HREF_PREV]}}],x={solutionNavigationTour:1,siemMigrationSetupTour:2},I=e=>x[e];class TourQueueStateManager{constructor(){(0,y.default)(this,"registeredTourIds",[]),(0,y.default)(this,"completedTourIds",new Set),(0,y.default)(this,"isQueueSkipped",!1),(0,y.default)(this,"subscribers",new Set)}register(e){return this.registeredTourIds.includes(e)||(this.registeredTourIds=[...this.registeredTourIds,e].sort(((e,t)=>I(e)-I(t))),this.notifySubscribers()),{isActive:()=>this.isActive(e),skip:()=>{this.skipAll()},complete:()=>{this.complete(e)},unregister:()=>{this.unregister(e)}}}getActive(){if(this.isQueueSkipped)return null;const e=this.registeredTourIds.find((e=>!this.completedTourIds.has(e)));return null!=e?e:null}isActive(e){return this.getActive()===e}unregister(e){this.registeredTourIds=this.registeredTourIds.filter((t=>t!==e)),this.notifySubscribers()}complete(e){this.completedTourIds.add(e),this.notifySubscribers()}skipAll(){this.isQueueSkipped=!0,this.notifySubscribers()}getState(){return{registeredTourIds:[...this.registeredTourIds],completedTourIds:new Set(this.completedTourIds),isQueueSkipped:this.isQueueSkipped}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}notifySubscribers(){this.subscribers.forEach((e=>e()))}}class SolutionNavigationTourManager{constructor(e){(0,y.default)(this,"tourQueue",(()=>{const e="undefined"==typeof globalThis?{}:globalThis.__KIBANA_TOUR_QUEUE_CTX__??={};return e.tourQueueStateManager??=new TourQueueStateManager})()),this.deps=e}async startTour(){const e=this.tourQueue.register("solutionNavigationTour");if(e.isActive())try{if(this.deps.spacesSolutionViewTourManager&&"started"===(await this.deps.spacesSolutionViewTourManager.startTour()).result&&await this.deps.spacesSolutionViewTourManager.waitForTourEnd(),"v2"!==(()=>{const e=this.deps.featureFlags.getStringValue("core.chrome.projectSideNav","v2");if("v1"!==e&&"v2"!==e&&"both"!==e)throw new Error(`Invalid project side nav feature flag value: ${e}. Expected 'v1' or 'v2'.`);return e})())return;if(await async function(e){try{var t;if("true"===localStorage.getItem(j))return!0;const i=await e.getCurrent({dataPath:j});return!i||!0===(null===(t=i.data)||void 0===t?void 0:t[j])}catch(e){return!0}}(this.deps.userProfile))return void e.complete();this.deps.navigationTourManager.startTour(),"skipped"===await this.deps.navigationTourManager.waitForTourEnd()&&e.skip(),await async function(e){try{return localStorage.setItem(j,"true"),await e.partialUpdate({[j]:!0})}catch(e){}}(this.deps.userProfile),e.complete()}finally{e.unregister()}else e.unregister()}}const j="solutionNavigationTour:completed";class NavigationPublicPlugin{constructor(e){(0,y.default)(this,"topNavMenuExtensionsRegistry",new TopNavMenuExtensionsRegistry),(0,y.default)(this,"stop$",new _.ReplaySubject(1)),(0,y.default)(this,"coreStart",void 0),(0,y.default)(this,"isSolutionNavEnabled",!1),(0,y.default)(this,"isCloudTrialUser",!1),this.initializerContext=e}setup(e,t){var i;!function(e){const{analytics:t}=e;for(const e of w)t.registerEventType(e)}(e);const n=null===(i=t.cloud)||void 0===i?void 0:i.trialEndDate;return n&&(this.isCloudTrialUser=n.getTime()>Date.now()),{registerMenuItem:this.topNavMenuExtensionsRegistry.register.bind(this.topNavMenuExtensionsRegistry)}}start(e,t){var i,n;this.coreStart=e;const{unifiedSearch:s,cloud:r,spaces:o}=t,a=this.topNavMenuExtensionsRegistry.getAll(),u=e.chrome,l=null!==(i=null==o?void 0:o.getActiveSpace$())&&void 0!==i?i:(0,_.of)(void 0),c="serverless"===this.initializerContext.env.packageInfo.buildFlavor;this.isSolutionNavEnabled=null!==(n=null==o?void 0:o.isSolutionViewEnabled)&&void 0!==n&&n;const d=e=>{var t;this.initiateChromeStyleAndSideNav(u,{isServerless:c,activeSpace:e});const i=this.buildFeedbackUrlParams(c,null!==(t=null==r?void 0:r.isCloudEnabled)&&void 0!==t&&t);u.project.setFeedbackUrlParams(i),this.isSolutionNavEnabled&&r&&(u.project.setCloudUrls(r.getUrls()),r.getPrivilegedUrls().then((e=>{0!==Object.keys(e).length&&u.project.setCloudUrls({...e,...r.getUrls()})})))};if(this.getIsUnauthenticated(e.http)?d():l.pipe((0,_.take)(1)).subscribe(d),o&&this.isSolutionNavEnabled&&!e.settings.client.get("hideAnnouncements",!1)){const{project:t}=e.chrome;new SolutionNavigationTourManager({navigationTourManager:t.navigationTourManager,spacesSolutionViewTourManager:o.solutionViewTourManager,userProfile:e.userProfile,capabilities:e.application.capabilities,featureFlags:e.featureFlags}).startTour()}return{ui:{TopNavMenu:T(s,a),AggregateQueryTopNavMenu:T(s,a),createTopNavWithCustomContext:(e,t)=>T(null!=e?e:s,null!=t?t:a)},addSolutionNavigation:e=>{this.isSolutionNavEnabled&&this.addSolutionNavigation(e)},isSolutionNavEnabled$:(0,_.of)(this.getIsUnauthenticated(e.http)).pipe((0,_.switchMap)((e=>e?(0,_.of)(!1):l.pipe((0,_.map)((e=>this.isSolutionNavEnabled&&M(null==e?void 0:e.solution)))))))}}stop(){this.stop$.next()}addSolutionNavigation(e){if(!this.coreStart)throw new Error("coreStart is not available");const{project:t}=this.coreStart.chrome;t.updateSolutionNavigations({[e.id]:e})}initiateChromeStyleAndSideNav(e,{isServerless:t,activeSpace:i}){const n=null==i?void 0:i.solution,s=this.isSolutionNavEnabled&&M(n);t||(e.setChromeStyle(s?"project":"classic"),s&&e.sideNav.setIsFeedbackBtnVisible(!this.isCloudTrialUser)),s&&"classic"!==n&&e.project.changeActiveSolutionNavigation(n)}getIsUnauthenticated(e){const{anonymousPaths:t}=e;return t.isAnonymous(window.location.pathname)}buildFeedbackUrlParams(e,t){const i=this.initializerContext.env.packageInfo.version;return new URLSearchParams({version:i,type:e?"serverless":t?"ech":"local"})}}function M(e){return Boolean(e)&&(t=e,Boolean(t)&&["oblt","es","security"].includes(t));var t}function P(e){return new NavigationPublicPlugin(e)}},112:(e,t,i)=>{i.p=window.__kbnPublicPath__.navigation},721:(e,t,i)=>{e.exports=i(497)(4971)},185:(e,t,i)=>{e.exports=i(497)(51858)},915:(e,t,i)=>{e.exports=i(497)(67493)},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i(112),__kbnBundles__.define("plugin/navigation/public",i,884)})();