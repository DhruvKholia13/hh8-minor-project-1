/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e={360:(e,t,a)=>{"use strict";a.r(t),a.d(t,{plugin:()=>Z});var r=a(915),s=a(286),i=a.n(s);const n=__kbnSharedDeps__.ReactDom;var o=a.n(n);const c=__kbnSharedDeps__.EmotionReact,l=__kbnSharedDeps__.ElasticEui,u=__kbnSharedDeps__.KbnI18nReact,h=__kbnSharedDeps__.ElasticApmRumCore;var p=function(){function e(e,t){this._disable=t,this.serviceFactory=e,this._initialized=!1}var t=e.prototype;return t.isEnabled=function(){return!this._disable},t.isActive=function(){var e=this.serviceFactory.getService(h.CONFIG_SERVICE);return this.isEnabled()&&this._initialized&&e.get("active")},t.init=function(e){var t=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var a=this.serviceFactory.getService([h.CONFIG_SERVICE,h.LOGGING_SERVICE,h.TRANSACTION_SERVICE]),r=a[0],s=a[1],i=a[2];r.setVersion("5.17.0"),this.config(e);var n=r.get("logLevel");if(s.setLevel(n),r.get("active")){this.serviceFactory.init();var o=(0,h.getInstrumentationFlags)(r.get("instrument"),r.get("disableInstrumentations"));if(this.serviceFactory.getService(h.PERFORMANCE_MONITORING).init(o),o[h.ERROR]&&this.serviceFactory.getService(h.ERROR_LOGGING).registerListeners(),r.get("session")){var c=r.getLocalConfig();c&&c.session&&r.setConfig({session:c.session})}var l=function(){return o[h.PAGE_LOAD]&&t._sendPageLoadMetrics()};r.get("centralConfig")?this.fetchCentralConfig().then(l):l(),(0,h.observePageVisibility)(r,i),o[h.EVENT_TARGET]&&o[h.CLICK]&&(0,h.observePageClicks)(i),(0,h.observeUserInteractions)()}else this._disable=!0,s.warn("RUM agent is inactive")}return this},t.fetchCentralConfig=function(){var e=this.serviceFactory.getService([h.APM_SERVER,h.LOGGING_SERVICE,h.CONFIG_SERVICE]),t=e[0],a=e[1],r=e[2];return t.fetchConfig(r.get("serviceName"),r.get("environment")).then((function(e){var t=e.transaction_sample_rate;if(t){var s={transactionSampleRate:t=Number(t)},i=r.validate(s).invalid;if(0===i.length)r.setConfig(s);else{var n=i[0],o=n.key,c=n.value,l=n.allowed;a.warn('invalid value "'+c+'" for '+o+". Allowed: "+l+".")}}return e})).catch((function(e){a.warn("failed fetching config:",e)}))},t._sendPageLoadMetrics=function(){var e=this.startTransaction(void 0,h.PAGE_LOAD,{managed:!0,canReuse:!0});if(e){e.addTask(h.PAGE_LOAD);var t=function(){setTimeout((function(){return e.removeTask(h.PAGE_LOAD)}),h.PAGE_LOAD_DELAY)};"complete"===document.readyState?t():window.addEventListener("load",t)}},t.observe=function(e,t){this.serviceFactory.getService(h.CONFIG_SERVICE).events.observe(e,t)},t.config=function(e){var t=this.serviceFactory.getService([h.CONFIG_SERVICE,h.LOGGING_SERVICE]),a=t[0],r=t[1],s=a.validate(e),i=s.missing,n=s.invalid,o=s.unknown;if(o.length>0){var c="Unknown config options are specified for RUM agent: "+o.join(", ");r.warn(c)}if(0===i.length&&0===n.length)a.setConfig(e);else{var l=", ",u="RUM agent isn't correctly configured. ";i.length>0&&(u+=i.join(l)+" is missing",n.length>0&&(u+=l)),n.forEach((function(e,t){var a=e.key,r=e.value,s=e.allowed;u+=a+' "'+r+'" contains invalid characters! (allowed: '+s+")"+(t!==n.length-1?l:"")})),r.error(u),a.setConfig({active:!1})}},t.setUserContext=function(e){this.serviceFactory.getService(h.CONFIG_SERVICE).setUserContext(e)},t.setCustomContext=function(e){this.serviceFactory.getService(h.CONFIG_SERVICE).setCustomContext(e)},t.addLabels=function(e){this.serviceFactory.getService(h.CONFIG_SERVICE).addLabels(e)},t.setInitialPageLoadName=function(e){this.serviceFactory.getService(h.CONFIG_SERVICE).setConfig({pageLoadTransactionName:e})},t.startTransaction=function(e,t,a){if(this.isEnabled())return this.serviceFactory.getService(h.TRANSACTION_SERVICE).startTransaction(e,t,a)},t.startSpan=function(e,t,a){if(this.isEnabled())return this.serviceFactory.getService(h.TRANSACTION_SERVICE).startSpan(e,t,a)},t.getCurrentTransaction=function(){if(this.isEnabled())return this.serviceFactory.getService(h.TRANSACTION_SERVICE).getCurrentTransaction()},t.captureError=function(e,t){if(this.isEnabled())return this.serviceFactory.getService(h.ERROR_LOGGING).logError(e,t)},t.addFilter=function(e){this.serviceFactory.getService(h.CONFIG_SERVICE).addFilter(e)},e}(),d=function(){if(h.isBrowser&&window.elasticApm)return window.elasticApm;var e=(0,h.bootstrap)(),t=(0,h.createServiceFactory)(),a=new p(t,!e);return h.isBrowser&&(window.elasticApm=a),a}();d.init.bind(d);const g=__kbnSharedDeps__.ReactUse.useDebounce;var _=a.n(g);const E=__kbnSharedDeps__.ReactUse.useEvent;var v=a.n(E);const f=__kbnSharedDeps__.ReactUse.useMountedState;var S=a.n(f),b=a(880);const m=navigator.platform.toLowerCase().indexOf("mac")>=0,C=new FocusEvent("focusout",{bubbles:!0}),T=(e,t)=>e.score<t.score?1:e.score>t.score?-1:0,y=(e,t)=>{const a=e.title.toUpperCase(),r=t.title.toUpperCase();return a<r?-1:a>r?1:0},x=__kbnSharedDeps__.KbnI18n,A=({children:e})=>{const{euiTheme:t}=(0,l.useEuiTheme)(),a=(0,c.css)({display:"inline-block",[(0,l.useEuiMaxBreakpoint)("m")]:{display:"none"},".kbnSearchOption__tagsListItem":{display:"inline-block",maxWidth:(0,l.mathWithUnits)(t.size.xxl,(e=>2*e)),marginRight:t.size.s}},"","");return(0,c.jsx)("ul",{css:a,"aria-label":x.i18n.translate("xpack.globalSearchBar.searchBar.optionTagListAriaLabel",{defaultMessage:"Tags"})},e)},I=({color:e,name:t,id:a})=>(0,c.jsx)("li",{className:"kbnSearchOption__tagsListItem",key:a},(0,c.jsx)(l.EuiBadge,{color:e},t)),L=({tags:e,searchTagIds:t})=>{if(!(e.length>3))return(0,c.jsx)(A,null,e.map(I));e.sort((e=>t.find((t=>t===e.id))?-1:1));const a=e.splice(3),r=x.i18n.translate("xpack.globalSearchBar.searchbar.overflowTagsAriaLabel",{defaultMessage:"{n} more {n, plural, one {tag} other {tags}}: {tags}",values:{n:a.length,tags:a.map((({name:e})=>e))}});return(0,c.jsx)(A,null,e.map(I),(0,c.jsx)("li",{className:"kbnSearchOption__tagsListItem","aria-label":r},(0,c.jsx)(l.EuiBadge,{title:r},"+",a.length)))};var R=a(721);const k=e=>{const{key:t,label:a,description:r,icon:s,suggestedSearch:i}=e;return{key:t,label:a,type:"__suggestion__",icon:{type:s},suggestion:i,meta:[{text:r}],"data-test-subj":"nav-search-option"}},B=["tag","type"],j={tag:["tags"],type:["types"]},w=e=>[...new Set(e.map((e=>e.replace(/[-\s]+/g," ").trim())))],M=e=>e.map((e=>String(e))),O={placeholderText:x.i18n.translate("xpack.globalSearchBar.searchBar.placeholder",{defaultMessage:"Find apps, content, and more."}),popoverButton:x.i18n.translate("xpack.globalSearchBar.searchBar.mobileSearchButtonAriaLabel",{defaultMessage:"Site-wide search"}),showSearchAriaText:x.i18n.translate("xpack.globalSearchBar.searchBar.showSearchAriaText",{defaultMessage:"Show search bar"}),closeSearchAriaText:x.i18n.translate("xpack.globalSearchBar.searchBar.closeSearchAriaText",{defaultMessage:"Close search bar"}),keyboardShortcutTooltip:{prefix:x.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.description",{defaultMessage:"Keyboard shortcut"}),onMac:x.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.macCommandDescription",{defaultMessage:"Command + /"}),onNotMac:x.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.windowsCommandDescription",{defaultMessage:"Control + /"})}},F=(e,t)=>e.toLowerCase()===t.toLowerCase(),N=e=>/\s/g.test(e)?`"${e}"`:e,D=({isMac:e})=>(0,c.jsx)(l.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1,wrap:!0},(0,c.jsx)(l.EuiFlexItem,null,(0,c.jsx)(l.EuiText,{color:"subdued",size:"xs"},(0,c.jsx)("p",null,(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.helpText.helpTextPrefix",defaultMessage:"Filter by"})," ",(0,c.jsx)(l.EuiCode,null,"type:")," ",(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.helpText.helpTextConjunction",defaultMessage:"or"})," ",(0,c.jsx)(l.EuiCode,null,"tag:")))),(0,c.jsx)(l.EuiFlexItem,{grow:!1},(0,c.jsx)(l.EuiText,{color:"subdued",size:"xs"},(0,c.jsx)("p",null,(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.shortcutDetail",defaultMessage:"{shortcutDescription} {commandDescription}",values:{shortcutDescription:(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.shortcutInstructionDescription",defaultMessage:"Shortcut"}),commandDescription:(0,c.jsx)(l.EuiCode,null,e?(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.macCommandDescription",defaultMessage:"Command + /"}):(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.windowsCommandDescription",defaultMessage:"Control + /"}))}}))))),P=({basePath:e,customPlaceholderMessage:t})=>{const{colorMode:a}=(0,l.useEuiTheme)();return(0,c.jsx)(l.EuiFlexGroup,{style:{minHeight:300},"data-test-subj":"nav-search-no-results",direction:"column",gutterSize:"xs",alignItems:"center",justifyContent:"center"},(0,c.jsx)(l.EuiFlexItem,{grow:!1},(0,c.jsx)(l.EuiImage,{alt:x.i18n.translate("xpack.globalSearchBar.searchBar.noResultsImageAlt",{defaultMessage:"Illustration of black hole"}),size:"fullWidth",url:`${e}illustration_product_no_search_results_${"DARK"===a?"dark":"light"}.svg`}),null!=t?t:(0,c.jsx)(i().Fragment,null,(0,c.jsx)(l.EuiText,{size:"m"},(0,c.jsx)("p",null,(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.noResultsHeading",defaultMessage:"No results found"}))),(0,c.jsx)("p",null,(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.noResults",defaultMessage:"Try searching for applications, dashboards, visualizations, and more."})))))};var U=a(721);const V=e=>{const t=(0,c.jsx)(i().Fragment,null,(0,c.jsx)(l.EuiText,{size:"m"},(0,c.jsx)("p",{"data-test-subj":"searchCharLimitExceededMessageHeading"},(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.searchCharLimitExceededHeading",defaultMessage:"Search character limit exceeded"}))),(0,c.jsx)("p",null,(0,c.jsx)(u.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.searchCharLimitExceeded",defaultMessage:"Try searching for applications, dashboards, visualizations, and more."})));return(0,c.jsx)(P,{basePath:e.basePathUrl,customPlaceholderMessage:t})};var G={name:"vc763q",styles:"min-height:300px"};const $=()=>(0,c.jsx)(l.EuiFlexGroup,{direction:"column",justifyContent:"center",css:G},(0,c.jsx)(l.EuiFlexItem,{grow:!1},(0,c.jsx)(l.EuiLoadingSpinner,{size:"xl"})));var K={name:"nvzj33",styles:"max-block-size:75vh"};const z=e=>{const{globalSearch:t,taggingApi:a,navigateToUrl:r,reportEvent:i,chromeStyle$:n,...o}=e,u=S()(),{euiTheme:h}=(0,l.useEuiTheme)(),p=(0,b.A)(n),[g,E]=(0,s.useState)(!1),f=(0,s.useRef)(null),[A,I]=(0,s.useState)(!1),[G,z]=(0,s.useState)(""),[H,J]=(0,s.useState)(null),[Y,W]=(0,s.useState)(null),q=(0,s.useRef)(null),[Q,X]=(0,s.useState)([]),[Z,ee]=(0,s.useState)([]),[te,ae]=(0,s.useState)(!0),re="__unknown__",[se,ie]=(0,s.useState)(!1),[ne,oe]=(0,s.useState)(!1),ce=(0,c.css)({[(0,l.useEuiBreakpoint)(["m","l"])]:{width:(0,l.mathWithUnits)(h.size.xxl,(e=>10*e))},[(0,l.useEuiMinBreakpoint)("xl")]:{width:(0,l.mathWithUnits)(h.size.xxl,(e=>15*e))}},"","");(0,s.useEffect)((()=>{A&&(async()=>{const e=await t.getSearchableTypes();ee(e)})()}),[t,A]),(0,s.useEffect)((()=>{ie(!0)}),[G]);const le=(0,s.useCallback)((e=>(({searchTerm:e,searchableTypes:t,tagCache:a})=>{const r=[],s=e.trim(),i=((e,t)=>{for(const a of e)if(F(a,t))return a})(t,s);if(i){const e=N(i);r.push({key:"__type__suggestion__",label:`type: ${i}`,icon:"filter",description:x.i18n.translate("xpack.globalSearchBar.suggestions.filterByTypeLabel",{defaultMessage:"Filter by type"}),suggestedSearch:`type:${e}`})}if(a&&e){const e=a.getState().find((e=>F(e.name,s)));if(e){const t=N(e.name);r.push({key:"__tag__suggestion__",label:`tag: ${e.name}`,icon:"tag",description:x.i18n.translate("xpack.globalSearchBar.suggestions.filterByTagLabel",{defaultMessage:"Filter by tag name"}),suggestedSearch:`tag:${t}`})}}return r})({searchTerm:e,searchableTypes:Z,tagCache:null==a?void 0:a.cache})),[a,Z]),ue=(0,s.useCallback)(((e,t,r=[])=>{X([...t.map(k),...e.map((e=>{var t;return((e,t,a)=>{var r;const{id:s,title:i,url:n,icon:o,type:l,meta:u={}}=e,{tagIds:h=[],categoryLabel:p=""}=u,d="application"===l||"integration"===l||"enterprise search"===l.toLowerCase()||"elasticsearch"===l.toLowerCase()||"search"===l.toLowerCase()||"index"===l.toLowerCase()||"connector"===l.toLowerCase(),g={key:s,label:i,url:n,type:l,icon:{type:d&&o?o:"empty"},"data-test-subj":"nav-search-option"};var _;if(g.meta="application"===l?[{text:p}]:[{text:(_=null!==(r=u.displayName)&&void 0!==r?r:l,(_.charAt(0).toUpperCase()+_.slice(1)).replace(/-/g," "))}],h.length&&a){const r=a(),s=[];for(let t=0;t<h.length;t++){const a=r.find((e=>e.id===h[t]));a?s.push(a):R.warn(`SearchBar: Tag with id "${h[t]}" not found. Tag "${h[t]}" is referenced by the search result "${e.type}:${e.id}". Skipping displaying the missing tag.`)}s.length&&(g.append=(0,c.jsx)(L,{tags:s,searchTagIds:t}))}return g})(e,null!==(t=null==r?void 0:r.filter((e=>e!==re)))&&void 0!==t?t:[],null==a?void 0:a.ui.getTagList)}))])}),[X,a]);_()((()=>{if(A){if(q.current&&(q.current.unsubscribe(),q.current=null),G.length>t.searchCharLimit)return void oe(!0);oe(!1);const e=le(G.toLowerCase());let r=[];0!==G.length&&i.searchRequest();const s=((e,t)=>{const a=B.concat(...Object.values(j));let r;const s=((e,t)=>{if(!t.length)return e.replace(/(type:|types:)\s*([^"']*?)\b([^"'\s]+)/gi,((e,t,a,r)=>`${t}${a.trim()}${r}`));const a=t.join("|"),r=new RegExp(`(type:|types:)\\s*([^"']*?)\\b((${a})\\b|[^\\s"']+)`,"gi");return e.replace(r,((e,t,a,r)=>{const s=`${t}${a.trim()}`;return/['"]/.test(r)?`${s}${r}`:`${s}"${r}"`}))})(e,t.filter((e=>/[ -]/.test(e))).map((e=>e.replace(/-/g," "))));try{r=l.Query.parse(s,{schema:{recognizedFields:a}})}catch(t){return{term:e,filters:{}}}const i=(e=>{var t;let a;return e.ast.getTermClauses().length&&(a=e.ast.getTermClauses().map((e=>e.value)).join(" ").replace(/\s{2,}/g," ").trim()),null!==(t=a)&&void 0!==t&&t.length?a:void 0})(r),n=((e,t)=>{const a={};Object.entries(t).forEach((([e,t])=>{t.forEach((t=>{a[t]=e}))}));const r=new Map;return e.forEach(((e,t)=>{var s,i;const n=null!==(s=a[t])&&void 0!==s?s:t;r.set(n,[...null!==(i=r.get(n))&&void 0!==i?i:[],...e])})),r})((e=>{const t=new Map;return e.ast.clauses.forEach((e=>{if("field"===e.type){var a;const{field:r,value:s}=e;t.set(r,[...null!==(a=t.get(r))&&void 0!==a?a:[],...Array.isArray(s)?s:[s]])}})),t})(r),j),o=n.get("tag"),c=n.get("type");return{term:i,filters:{tags:o?M(o):void 0,types:c?w(M(c)):void 0}}})(G.toLowerCase(),Z);let n;n=a&&s.filters.tags?s.filters.tags.map((e=>{var t;return null!==(t=a.ui.getTagIdFromName(e))&&void 0!==t?t:re})):void 0;const o={term:s.term,types:s.filters.types,tags:n};q.current=t.find(o,{}).subscribe({next:({results:t})=>{if(u()){if(G.length>0)return r=[...t,...r].sort(T),void ue(r,e,o.tags);t=t.filter((({type:e})=>"application"===e)),r=[...t,...r].sort(y),ue(r,e,o.tags)}},error:e=>{ie(!1),d.captureError(e,{labels:{SearchValue:G}})},complete:()=>{ie(!1)}})}}),350,[G,le,Z,A]);const he=(0,s.useCallback)((e=>{var t;"/"===e.key&&(m?e.metaKey:e.ctrlKey)&&(e.preventDefault(),i.shortcutUsed(),"project"!==p||g?H?H.focus():Y&&Y.children[0].click():null===(t=f.current)||void 0===t||t.click())}),[p,g,Y,H,i]),pe=(0,s.useCallback)(((e,t)=>{var a;let s=null;const n=e.find((({checked:e},t)=>{const a="on"===e;return a&&(s=t+1),a}));if(!n)return;const o=null!==(a=n.label)&&void 0!==a?a:null,{url:c,type:l,suggestion:u}=n;if("__suggestion__"!==l){try{if("application"===l){var h;const e=`${(null!==(h=n.key)&&void 0!==h?h:"unknown").toLowerCase().replaceAll(" ","_")}`;i.navigateToApplication({application:e,searchValue:G,selectedLabel:o,selectedRank:s})}else i.navigateToSavedObject({type:l,searchValue:G,selectedLabel:o,selectedRank:s})}catch(e){d.captureError(e,{labels:{SearchValue:G}}),U.log("Error trying to track searchbar metrics",e)}t.shiftKey?window.open(c):t.ctrlKey||t.metaKey?window.open(c,"_blank"):r(c),document.activeElement.blur(),H&&(de(),H.dispatchEvent(C))}else z(u)}),[i,r,H,G]),de=()=>z(""),ge=`${O.keyboardShortcutTooltip.prefix}: ${m?O.keyboardShortcutTooltip.onMac:O.keyboardShortcutTooltip.onNotMac}`;return v()("keydown",he),"project"!==p||g?(0,c.jsx)(l.EuiSelectableTemplateSitewide,{isLoading:se,isPreFiltered:!0,onChange:pe,options:Q,css:ce,popoverButtonBreakpoints:["xs","s"],singleSelection:!0,renderOption:e=>(0,l.euiSelectableTemplateSitewideRenderOptions)(e,G),colorModes:"project"!==p?{search:"dark",popover:"global"}:void 0,listProps:{className:"eui-yScroll",css:K},searchProps:{autoFocus:"project"===p,value:G,onInput:e=>z(e.currentTarget.value),"data-test-subj":"nav-search-input",inputRef:J,compressed:!0,"aria-label":O.placeholderText,placeholder:O.placeholderText,onFocus:()=>{i.searchFocus(),I(!0),ae(!1)},onBlur:()=>{i.searchBlur(),ae(!G.length)},fullWidth:!0,append:"project"===p?(0,c.jsx)(l.EuiButtonIcon,{"aria-label":O.closeSearchAriaText,color:"text","data-test-subj":"nav-search-conceal",iconType:"cross",onClick:()=>{i.searchBlur(),E(!1)}}):te?(0,c.jsx)(l.EuiFormLabel,{title:ge,css:(0,c.css)({fontFamily:h.font.familyCode},"","")},m?"⌘/":"^/"):void 0},errorMessage:ne?(0,c.jsx)(V,o):null,emptyMessage:(0,c.jsx)($,null),noMatchesMessage:(0,c.jsx)(P,{basePath:o.basePathUrl}),popoverProps:{zIndex:Number(h.levels.navigation),"data-test-subj":"nav-search-popover",panelClassName:"navSearch__panel",repositionOnScroll:!0,popoverRef:W,panelStyle:{marginTop:"6px"}},popoverButton:(0,c.jsx)(l.EuiHeaderSectionItemButton,{"aria-label":O.popoverButton},(0,c.jsx)(l.EuiIcon,{type:"search",size:"m"})),popoverFooter:(0,c.jsx)(D,{isMac:m})}):(0,c.jsx)(l.EuiHeaderSectionItemButton,{"aria-label":O.showSearchAriaText,buttonRef:f,color:"text","data-test-subj":"nav-search-reveal",onClick:()=>{E(!0)}},(0,c.jsx)(l.EuiIcon,{type:"search",size:"m"}))},H=__kbnSharedDeps__.KbnAnalytics;let J=function(e){return e.SHORTCUT_USED="shortcut_used",e.SEARCH_FOCUS="search_focus",e.SEARCH_REQUEST="search_request",e}({}),Y=function(e){return e.USER_NAVIGATED_TO_APPLICATION="user_navigated_to_application",e.USER_NAVIGATED_TO_SAVED_OBJECT="user_navigated_to_saved_object",e}({}),W=function(e){return e.CLICK_APPLICATION="global_search_bar_click_application",e.CLICK_SAVED_OBJECT="global_search_bar_click_saved_object",e.SEARCH_BLUR="global_search_bar_blur",e}({}),q=function(e){return e.APPLICATION="application",e.SAVED_OBJECT_TYPE="saved_object_type",e.FOCUS_TIME="focus_time_ms",e.SELECTED_LABEL="selected_label",e.SELECTED_RANK="selected_rank",e.TERMS="terms",e}({});class EventReporter{constructor({analytics:e,usageCollection:t}){(0,r.default)(this,"reportEvent",void 0),(0,r.default)(this,"trackUiMetric",void 0),(0,r.default)(this,"focusStart",1/0),this.reportEvent=e.reportEvent,this.trackUiMetric=t?(e,a,r)=>{let s;switch(a){case Y.USER_NAVIGATED_TO_APPLICATION:case Y.USER_NAVIGATED_TO_SAVED_OBJECT:s=[e,[a,`${a}_${r}`]];break;default:s=[e,a]}t.reportUiCounter("global_search_bar",...s)}:()=>{}}searchFocus(){this.trackUiMetric(H.METRIC_TYPE.COUNT,J.SEARCH_FOCUS),this.focusStart=Date.now()}searchBlur(){const e=Date.now()-this.focusStart;e>0&&this.reportEvent(W.SEARCH_BLUR,{[q.FOCUS_TIME]:e}),this.focusStart=1/0}searchRequest(){this.trackUiMetric(H.METRIC_TYPE.COUNT,J.SEARCH_REQUEST)}shortcutUsed(){this.trackUiMetric(H.METRIC_TYPE.COUNT,J.SHORTCUT_USED)}navigateToApplication(e){var t,a;const r=null!==(t=null==e?void 0:e.application)&&void 0!==t?t:"unknown";this.trackUiMetric(H.METRIC_TYPE.CLICK,Y.USER_NAVIGATED_TO_APPLICATION,r);const s=null!==(a=null==e?void 0:e.searchValue)&&void 0!==a?a:"";this.reportEvent(W.CLICK_APPLICATION,{[q.TERMS]:s,[q.APPLICATION]:r,[q.SELECTED_RANK]:e.selectedRank,[q.SELECTED_LABEL]:e.selectedLabel})}navigateToSavedObject(e){var t,a;const r=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"unknown";this.trackUiMetric(H.METRIC_TYPE.CLICK,Y.USER_NAVIGATED_TO_SAVED_OBJECT,r);const s=null!==(a=null==e?void 0:e.searchValue)&&void 0!==a?a:"";this.reportEvent(W.CLICK_SAVED_OBJECT,{[q.TERMS]:s,[q.SAVED_OBJECT_TYPE]:r,[q.SELECTED_RANK]:e.selectedRank,[q.SELECTED_LABEL]:e.selectedLabel})}}const Q={[q.APPLICATION]:{[q.APPLICATION]:{type:"keyword",_meta:{description:"The name of the application selected in the global search bar results."}}},[q.SAVED_OBJECT_TYPE]:{[q.SAVED_OBJECT_TYPE]:{type:"keyword",_meta:{description:"The type of the saved object selected in the global search bar results."}}},[q.FOCUS_TIME]:{[q.FOCUS_TIME]:{type:"long",_meta:{description:"The length in milliseconds the global search bar had the cursor focused."}}},[q.SELECTED_RANK]:{[q.SELECTED_RANK]:{type:"short",_meta:{description:"The ranking of placement of the selected option in the results list."}}},[q.SELECTED_LABEL]:{[q.SELECTED_LABEL]:{type:"keyword",_meta:{description:"The text of the selected option in the results list."}}},[q.TERMS]:{[q.TERMS]:{type:"keyword",_meta:{description:"The search terms entered by the user."}}}},X=[{eventType:W.CLICK_APPLICATION,schema:{...Q[q.APPLICATION],...Q[q.TERMS],...Q[q.SELECTED_RANK],...Q[q.SELECTED_LABEL]}},{eventType:W.CLICK_SAVED_OBJECT,schema:{...Q[q.SAVED_OBJECT_TYPE],...Q[q.TERMS],...Q[q.SELECTED_RANK],...Q[q.SELECTED_LABEL]}},{eventType:W.SEARCH_BLUR,schema:{...Q[q.FOCUS_TIME]}}];class GlobalSearchBarPlugin{constructor(e){(0,r.default)(this,"config",void 0),this.config=e.config.get()}setup({analytics:e}){return X.forEach((t=>{e.registerEventType(t)})),{}}start(e,t){return e.chrome.navControls.registerCenter(this.getNavControl({core:e,...t})),{}}getNavControl(e){const{core:t,globalSearch:a,savedObjectsTagging:r,usageCollection:s}=e,{application:i,http:n}=t,l=new EventReporter({analytics:t.analytics,usageCollection:s});return{order:1e3,mount:e=>(o().render(t.rendering.addContext((0,c.jsx)(z,{globalSearch:{...a,searchCharLimit:this.config.input_max_limit},navigateToUrl:i.navigateToUrl,taggingApi:r,basePathUrl:n.basePath.prepend("/plugins/globalSearchBar/assets/"),chromeStyle$:t.chrome.getChromeStyle$(),reportEvent:l})),e),()=>o().unmountComponentAtNode(e))}}}const Z=e=>new GlobalSearchBarPlugin(e)},563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNavigator=t.isBrowser=t.off=t.on=t.noop=void 0,t.noop=function(){},t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];e&&e.addEventListener&&e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)},t.isBrowser="undefined"!=typeof window,t.isNavigator="undefined"!=typeof navigator},943:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(286),s=a(563).isBrowser?r.useLayoutEffect:r.useEffect;t.default=s},880:(e,t,a)=>{"use strict";var r=a(941),s=a(286),i=r.__importDefault(a(943));t.A=function(e,t){var a=s.useState(t),r=a[0],n=a[1];return i.default((function(){var t=e.subscribe(n);return function(){return t.unsubscribe()}}),[e]),r}},155:(e,t,a)=>{a.p=window.__kbnPublicPath__.globalSearchBar},721:(e,t,a)=>{e.exports=a(497)(4971)},915:(e,t,a)=>{e.exports=a(497)(67493)},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),a(155),__kbnBundles__.define("plugin/globalSearchBar/public",a,360)})();