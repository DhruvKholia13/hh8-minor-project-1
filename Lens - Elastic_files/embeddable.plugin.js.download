(()=>{var e,t={850:(e,t,a)=>{"use strict";a.r(t)},72:(e,t,a)=>{"use strict";a.d(t,{FE:()=>o,N5:()=>s,mx:()=>i});var r=a(286);const n=new Map,i=({onAdd:e,savedObjectType:t,savedObjectName:a,getIconForSavedObject:r,getSavedObjectSubType:i,getTooltipForSavedObject:s})=>{if(n.has(t))throw new Error(`Saved object type '${t}' already exists in the 'Add from Library' registry.`);n.set(t,{onAdd:e,savedObjectMetaData:{name:a,type:t,getIconForSavedObject:r,getTooltipForSavedObject:s,getSavedObjectSubType:i}})};function s(){return(0,r.useMemo)((()=>[...n.entries()].map((([e,t])=>t.savedObjectMetaData)).sort(((e,t)=>e.type.localeCompare(t.type)))),[])}const o=e=>n.get(e)},655:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ADD_PANEL_ANNOTATION_GROUP:()=>q,ADD_PANEL_OTHER_GROUP:()=>Z,ADD_PANEL_VISUALIZATION_GROUP:()=>X,CELL_VALUE_TRIGGER:()=>f,CONTEXT_MENU_TRIGGER:()=>i,EmbeddableRenderer:()=>U,EmbeddableStateTransfer:()=>EmbeddableStateTransfer,MULTI_VALUE_CLICK_TRIGGER:()=>m,PANEL_BADGE_TRIGGER:()=>o,PANEL_NOTIFICATION_TRIGGER:()=>d,PanelIncompatibleError:()=>PanelIncompatibleError,PanelNotFoundError:()=>PanelNotFoundError,SELECT_RANGE_TRIGGER:()=>u,VALUE_CLICK_TRIGGER:()=>g,cellValueTrigger:()=>v,contextMenuTrigger:()=>s,isMultiValueClickTriggerContext:()=>E,isRangeSelectTriggerContext:()=>_,isRowClickTriggerContext:()=>y,isValueClickTriggerContext:()=>T,panelBadgeTrigger:()=>l,panelNotificationTrigger:()=>c,plugin:()=>J,useAddFromLibraryTypes:()=>V.N5});var r=a(915),n=a(8);const i="CONTEXT_MENU_TRIGGER",s={id:i,title:n.i18n.translate("embeddableApi.contextMenuTrigger.title",{defaultMessage:"Context menu"}),description:n.i18n.translate("embeddableApi.contextMenuTrigger.description",{defaultMessage:"A new action will be added to the panel's context menu"})},o="PANEL_BADGE_TRIGGER",l={id:o,title:n.i18n.translate("embeddableApi.panelBadgeTrigger.title",{defaultMessage:"Panel badges"}),description:n.i18n.translate("embeddableApi.panelBadgeTrigger.description",{defaultMessage:"Actions appear in title bar when an embeddable loads in a panel."})},d="PANEL_NOTIFICATION_TRIGGER",c={id:d,title:n.i18n.translate("embeddableApi.panelNotificationTrigger.title",{defaultMessage:"Panel notifications"}),description:n.i18n.translate("embeddableApi.panelNotificationTrigger.description",{defaultMessage:"Actions appear in top-right corner of a panel."})},u="SELECT_RANGE_TRIGGER",p={id:u,title:n.i18n.translate("embeddableApi.selectRangeTrigger.title",{defaultMessage:"Range selection"}),description:n.i18n.translate("embeddableApi.selectRangeTrigger.description",{defaultMessage:"A range of values on the visualization"})},g="VALUE_CLICK_TRIGGER",b={id:g,title:n.i18n.translate("embeddableApi.valueClickTrigger.title",{defaultMessage:"Single click"}),description:n.i18n.translate("embeddableApi.valueClickTrigger.description",{defaultMessage:"A data point click on the visualization"})},m="MULTI_VALUE_CLICK_TRIGGER",h={id:m,title:n.i18n.translate("embeddableApi.multiValueClickTrigger.title",{defaultMessage:"Multi click"}),description:n.i18n.translate("embeddableApi.multiValueClickTrigger.description",{defaultMessage:"Selecting multiple values of a single dimension on the visualization"})},f="CELL_VALUE_TRIGGER",v={id:f,title:n.i18n.translate("embeddableApi.cellValueTrigger.title",{defaultMessage:"Cell value"}),description:n.i18n.translate("embeddableApi.cellValueTrigger.description",{defaultMessage:"Actions appear in the cell value options on the visualization"})},T=e=>e.data&&"data"in e.data&&Array.isArray(e.data.data)&&e.data.data.length>0&&"column"in e.data.data[0],E=e=>e.data&&"data"in e.data&&Array.isArray(e.data.data)&&e.data.data.length>0&&"cells"in e.data.data[0],_=e=>e.data&&"range"in e.data,y=e=>!!e.data&&"object"==typeof e.data&&"number"==typeof e.data.rowIndex,A=__kbnSharedDeps__.Lodash;var S=a(215);const P="embeddable_editor_state";function w(e){return L("originatingApp",e,"string")}const I="embeddable_package_state";function R(e){return L("type",e,"string")&&L("serializedState",e,"object")}function L(e,t,a){return Boolean(t)&&e in t&&(!a||typeof t[e]===a)}const k="EMBEDDABLE_STATE_TRANSFER";class EmbeddableStateTransfer{constructor(e,t,a,n){(0,r.default)(this,"isTransferInProgress",void 0),(0,r.default)(this,"storage",void 0),(0,r.default)(this,"appList",void 0),(0,r.default)(this,"getAppNameFromId",(e=>{var t,a;return null===(t=this.appList)||void 0===t||null===(a=t.get(e))||void 0===a?void 0:a.title})),this.navigateToApp=e,this.storage=n||new S.Storage(sessionStorage),this.isTransferInProgress=!1,this.appList=a,t.subscribe((()=>{this.isTransferInProgress=!1}))}getIncomingEditorState(e,t){return this.getIncomingState(w,e,P,{keysToRemoveAfterFetch:t?[P]:void 0})}clearEditorState(e){const t=this.storage.get(k);var a;t&&(e?null===(a=t[P])||void 0===a||delete a[e]:delete t[P],this.storage.set(k,t))}getIncomingEmbeddablePackage(e,t){return this.getIncomingState(R,e,I,{keysToRemoveAfterFetch:t?[I]:void 0})}async navigateToEditor(e,t){this.isTransferInProgress=!0,await this.navigateToWithState(e,P,{...t})}async navigateToWithEmbeddablePackage(e,t){this.isTransferInProgress=!0,await this.navigateToWithState(e,I,{...t})}getIncomingState(e,t,a,r){var n,i;const s=null===(n=this.storage.get(k))||void 0===n||null===(i=n[a])||void 0===i?void 0:i[t],o=!e||e(s)?(0,A.cloneDeep)(s):void 0;if(o&&null!=r&&r.keysToRemoveAfterFetch){const e={...this.storage.get(k)};r.keysToRemoveAfterFetch.forEach((t=>{delete e[t]})),this.storage.set(k,e)}return o}async navigateToWithState(e,t,a){var r;const n=(null===(r=this.storage.get(k))||void 0===r?void 0:r[t])||{},i={...this.storage.get(k),[t]:{...n,[e]:null==a?void 0:a.state}};this.storage.set(k,i),await this.navigateToApp(e,{path:null==a?void 0:a.path,openInNewTab:null==a?void 0:a.openInNewTab,skipAppLeave:null==a?void 0:a.skipAppLeave})}}var N=a(723);class PanelIncompatibleError extends Error{constructor(){super(n.i18n.translate("embeddableApi.errors.panelIncompatibleError",{defaultMessage:"Panel api is incompatible"})),(0,r.default)(this,"code","PANEL_INCOMPATIBLE")}}class PanelNotFoundError extends Error{constructor(){super(n.i18n.translate("embeddableApi.errors.paneldoesNotExist",{defaultMessage:"Panel not found"})),(0,r.default)(this,"code","PANEL_NOT_FOUND")}}const O={},C=(e,t)=>{if(void 0!==O[e])throw new Error(n.i18n.translate("embeddableApi.reactEmbeddable.factoryAlreadyExistsError",{defaultMessage:"An embeddable factory for type: {key} is already registered.",values:{key:e}}));O[e]=t};var j=a(185),M=a(190);const x=e=>Boolean(null==e?void 0:e.children$);var G=a(370),D=a(286),B=a.n(D);const F=__kbnSharedDeps__.Uuid;class PhaseTracker{constructor(){(0,r.default)(this,"firstLoadCompleteTime",void 0),(0,r.default)(this,"embeddableStartTime",performance.now()),(0,r.default)(this,"subscriptions",new M.Subscription),(0,r.default)(this,"phase$",new M.BehaviorSubject(void 0))}getPhase$(){return this.phase$}trackPhaseEvents(e,t){const a=(r=t,Boolean(r&&void 0!==(null==r?void 0:r.dataLoading$))?t.dataLoading$:new M.BehaviorSubject(!1));var r;const n=(e=>Boolean(e&&void 0!==(null==e?void 0:e.rendered$)))(t)?t.rendered$:new M.BehaviorSubject(!0);this.subscriptions.add((0,M.combineLatest)([a,n]).subscribe((([t,a])=>{this.firstLoadCompleteTime||(this.firstLoadCompleteTime=performance.now());const r=this.firstLoadCompleteTime-this.embeddableStartTime,n=t||!a?"loading":"rendered";this.phase$.next({id:e,status:n,timeToEvent:r})})))}cleanup(){this.subscriptions.unsubscribe()}}var $=a(791);const U=({type:e,maybeId:t,getParentApi:a,panelProps:r,onApiAvailable:i,hidePanelChrome:s})=>{const o=(0,D.useRef)(new PhaseTracker),l=(0,D.useMemo)((()=>{const r=null!=t?t:(0,F.v4)();return(async()=>{const t=a();try{const{api:a,Component:s}=await(async()=>{var a;const i=await(async e=>{if(void 0===O[e])throw new Error(n.i18n.translate("embeddableApi.reactEmbeddable.factoryNotFoundError",{defaultMessage:"No embeddable factory found for type: {key}",values:{key:e}}));return O[e]()})(e),s=null!==(a=t.getSerializedStateForChild(r))&&void 0!==a?a:{rawState:{}},{api:l,Component:d}=await i.buildEmbeddable({initialState:s,finalizeApi:e=>{const a=new M.BehaviorSubject(!1);return{...e,uuid:r,phase$:o.current.getPhase$(),parentApi:t,hasLockedHoverActions$:a,lockHoverActions:e=>{a.next(e)},type:i.type}},uuid:r,parentApi:t});return o.current.trackPhaseEvents(r,l),{api:l,Component:d}})();return null==i||i(a),B().forwardRef(((e,t)=>((0,D.useImperativeHandle)(t,(()=>a),[]),(0,$.jsx)(s,null))))}catch(e){const a={uuid:r,blockingError$:new M.BehaviorSubject(e)};return s=t,Boolean((e=>"function"==typeof(null==e?void 0:e.addNewPanel))(s)&&"function"==typeof(null==s?void 0:s.removePanel)&&"function"==typeof(null==s?void 0:s.replacePanel)&&"function"==typeof(null==s?void 0:s.addNewPanel)&&x(s))&&(a.parentApi=t),B().forwardRef(((e,t)=>((0,D.useImperativeHandle)(t,(()=>a),[]),null)))}var s})()}),[e]);return(0,$.jsx)(G.PresentationPanel,(0,j.default)({hidePanelChrome:s},r,{Component:l}))};var V=a(72);class EnhancementsRegistry{constructor(){(0,r.default)(this,"registry",new Map),(0,r.default)(this,"registerEnhancement",(e=>{if(this.registry.has(e.id))throw new Error(`enhancement with id ${e.id} already exists in the registry`);this.registry.set(e.id,{id:e.id,telemetry:e.telemetry||((e,t)=>t),inject:e.inject||A.identity,extract:e.extract||(e=>({state:e,references:[]})),migrations:e.migrations||{}})})),(0,r.default)(this,"getEnhancements",(()=>Array.from(this.registry.values()))),(0,r.default)(this,"getEnhancement",(e=>this.registry.get(e)||{id:"unknown",telemetry:(e,t)=>t,inject:A.identity,extract:e=>({state:e,references:[]}),migrations:{}})),(0,r.default)(this,"transformIn",(e=>{const t={},a=[];return Object.keys(e).forEach((r=>{if(!e[r])return;const n=this.getEnhancement(r),{state:i,references:s}=n?n.extract(e[r]):{state:e[r],references:[]};t[r]=i,a.push(...s)})),{enhancementsState:t,enhancementsReferences:a}})),(0,r.default)(this,"transformOut",((e,t)=>{const a={};return Object.keys(e).forEach((r=>{if(!e[r])return;const n=this.getEnhancement(r);a[r]=n?n.inject(e[r],t):e[r]})),a}))}}const z={};function K(e,t){if(z[e])throw new Error(`Embeddable transforms for type "${e}" are already registered.`);z[e]=t}async function H(e){var t;return await(null===(t=z[e])||void 0===t?void 0:t.call(z))}function W(e){return Boolean(z[e])}class EmbeddablePublicPlugin{constructor(e){(0,r.default)(this,"stateTransferService",{}),(0,r.default)(this,"appList",void 0),(0,r.default)(this,"appListSubscription",void 0),(0,r.default)(this,"enhancementsRegistry",new EnhancementsRegistry)}setup(e,{uiActions:t}){return(e=>{e.registerTrigger(s),e.registerTrigger(l),e.registerTrigger(c),e.registerTrigger(p),e.registerTrigger(b),e.registerTrigger(h),e.registerTrigger(v)})(t),{registerReactEmbeddableFactory:C,registerAddFromLibraryType:V.mx,registerTransforms:K,registerEnhancement:this.enhancementsRegistry.registerEnhancement,transformEnhancementsIn:this.enhancementsRegistry.transformIn,transformEnhancementsOut:this.enhancementsRegistry.transformOut}}start(e,t){this.appListSubscription=e.application.applications$.subscribe((e=>{this.appList=e})),this.stateTransferService=new EmbeddableStateTransfer(e.application.navigateToApp,e.application.currentAppId$,this.appList);const r={getAddFromLibraryComponent:async()=>{const{AddFromLibraryFlyout:e}=await a.e(36).then(a.bind(a,36));return e},getStateTransfer:t=>t?new EmbeddableStateTransfer(e.application.navigateToApp,e.application.currentAppId$,this.appList,t):this.stateTransferService,getTransforms:H,hasTransforms:W,getEnhancement:this.enhancementsRegistry.getEnhancement};return(0,N.bE)(e,r,t),r}stop(){this.appListSubscription&&this.appListSubscription.unsubscribe()}}const X={id:"visualizations",getDisplayName:()=>n.i18n.translate("embeddableApi.common.constants.grouping.visualizations",{defaultMessage:"Visualizations"}),getIconType:()=>"visGauge",order:1e3},q={id:"annotation-and-navigation",getDisplayName:()=>n.i18n.translate("embeddableApi.common.constants.grouping.annotations",{defaultMessage:"Annotations and Navigation"}),order:900},Z={id:"other",getDisplayName:()=>n.i18n.translate("embeddableApi.common.constants.grouping.other",{defaultMessage:"Other"}),getIconType:()=>"empty",order:-1};function J(e){return new EmbeddablePublicPlugin(e)}},723:(e,t,a)=>{"use strict";let r,n,i,s,o,l,d,c;a.d(t,{I8:()=>r,Mb:()=>o,Ng:()=>c,bE:()=>p,mt:()=>d});const u=new(a(190).BehaviorSubject)(!1),p=(e,t,a)=>{r=e,i=a.uiActions,s=a.inspector,n=t,o=a.usageCollection,l=a.savedObjectsManagement,d=a.savedObjectsTaggingOss,c=a.contentManagement,u.next(!0)}},3:(e,t,a)=>{a.p=window.__kbnPublicPath__.embeddable},215:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},370:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/presentationPanel/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},260:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/savedObjectsFinder/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},185:(e,t,a)=>{e.exports=a(497)(51858)},915:(e,t,a)=>{e.exports=a(497)(67493)},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[])),r.u=e=>"embeddable.chunk."+e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},r.l=(t,a,n,i)=>{if(e[t])e[t].push(a);else{var s,o;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==t){s=c;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=t),e[t]=[a];var u=(a,r)=>{s.onerror=s.onload=null,clearTimeout(p);var n=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(r))),a)return a(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),o&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={774:0};r.f.j=(t,a)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var i=new Promise(((a,r)=>n=e[t]=[a,r]));a.push(n[2]=i);var s=r.p+r.u(t),o=new Error;r.l(s,(a=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,n[1](o)}}),"chunk-"+t,t)}};var t=(t,a)=>{var n,i,[s,o,l]=a,d=0;if(s.some((t=>0!==e[t]))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);l&&l(r)}for(t&&t(a);d<s.length;d++)i=s[d],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},a=self.embeddable_bundle_jsonpfunction=self.embeddable_bundle_jsonpfunction||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),r(3),__kbnBundles__.define("plugin/embeddable/public",r,655),__kbnBundles__.define("plugin/embeddable/common",r,850)})();